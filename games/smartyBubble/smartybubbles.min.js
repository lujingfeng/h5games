!function(t){function e(t,e){function i(){}i.prototype=t;var s,n=new i;for(s in e)n[s]=e[s];return e.toString!==Object.prototype.toString&&(n.toString=e.toString),n}function i(t){return t instanceof Array?function(){return d.iter(t)}:"function"==typeof t.iterator?s(t,t.iterator):t.iterator}function s(t,e){if(null==e)return null;null==e.__id__&&(e.__id__=Vs++);var i;return null==t.hx__closures__?t.hx__closures__={}:i=t.hx__closures__[e.__id__],null==i&&(i=function(){return i.method.apply(i.scope,arguments)},i.scope=t,i.method=e,t.hx__closures__[e.__id__]=i),i}var n=function(){return Us.__string_rec(this,"")},a=function(t){this.shown=this.isVisible=!1,this._app=t,this._scratchVec=new le,this._scratchAABB=new xi,this.container=new Ts(H.getClassName(H.getClass(this)))};a.__name__=["AbstractScreen"],a.prototype={free:function(){this.hide(),this._app=null},show:function(){this.shown=!0,this._app.activeScreen=H.getClass(this),this._touchStarted=!1,this.onShow(),this.update(),this.container.set_visible(!this._app.isLandscape),zi.getScene().addChild(this.container.node),zi.getScene().updateGeometricState(0),zi.drawScene(),this.registerTouchEvents()},onShow:function(){},hide:function(){this.shown=!1,this.onHide(),this.update(),zi.getScene().removeChild(this.container.node),this.unregisterTouchEvents()},onHide:function(){},update:function(){this.container.applyChanges(),this.container.spatial.updateGeometricState(0)},onTick:function(){},onDraw:function(){},onResize:function(){},createSprite:function(t,e,i,s,n,a){return null==a&&(a=this.container),t=new l(t,a),t.setTexture(e,i),t.mX=s,t.mY=n,t.mFlags|=1,t},createTextField:function(t,e,i){t=t.clone(),t.minY+=i/2,t.maxY+=i/2,new xs("spritefont_a",this.container).addString(e,t,ys.Left,i)},createTitle:function(t){var e=new xi(0,100,u.NATIVE_WIDTH,200);new xs("spritefont_c",this.container).addString(t,e,ys.Center,80)},createTextLine:function(t,e,i,s,n,a){null==a&&(a=1),null==n&&(n=0),t=t.clone(),t.minY+=i/2,t.maxY+=i/2,s=new xs(s,this.container),s.addString(e,t,0==n?ys.Center:-1==n?ys.Left:ys.Right,i),1>a&&s.set_alpha(a)},onTouchStart:function(){},onTouchMove:function(){},onTouchEnd:function(){},mapFromScreenToContainerSpace:function(t,e){var i=this._scratchVec;return i.x=t,i.y=e,this.container.spatial.world.applyInverse2(i,i),i},registerTouchEvents:function(){var t=this;this._app.inputSystem.onTouchStart=function(e,i){var s=t.mapFromScreenToContainerSpace(e,i);t.onTouchStart(s.x,s.y)},this._app.inputSystem.onTouchEnd=function(e,i){var s=t.mapFromScreenToContainerSpace(e,i);t.onTouchEnd(s.x,s.y)},this._app.inputSystem.onTouchMove=function(e,i){var s=t.mapFromScreenToContainerSpace(e,i);t.onTouchMove(s.x,s.y)}},unregisterTouchEvents:function(){this._app.inputSystem.onTouchStart=null,this._app.inputSystem.onTouchEnd=null,this._app.inputSystem.onTouchMove=null},hitTest:function(t,e,i){return t=t.localBox(),e>=t.minX&&e<=t.maxX&&i>=t.minY&&i<=t.maxY},__class__:a};var r=function(){this._portraitHint=null;var t=this;p.init("en");try{this._visibility=new Ii(s(this,this.onVisibilityChanged))}catch(e){}try{this.fullscreenSupported=Ti.isFullscreenSupported(),this._isFullscreen=!1,this.fullscreenSupported&&this.addVendorListener(window.document,"fullscreenchange",function(){t.updateFullscreen()},!1)}catch(i){}try{null!=window.orientation&&(window.addEventListener("orientationchange",s(this,this.onOrientationChange),!1),this.onOrientationChange(null))}catch(n){}try{this.lockOrientation(Ui.Portrait)}catch(a){}this._screenLookup=new Bi,this._screenList=[],this.statistics={numBubblesCleared:0,numGamesPlayed:0,numGamesWon:0,numFewestShots:-1,timePlayed:0,numYellowBubblesCleared:0,numBlueBubblesCleared:0,numGreenBubblesCleared:0,numRedBubblesCleared:0,numTurquoiseBubblesCleared:0,numPurpleBubblesCleared:0},this.highScoreTable=[{score:1e3,name:"Player"},{score:900,name:"Player"},{score:800,name:"Player"},{score:700,name:"Player"},{score:600,name:"Player"},{score:500,name:"Player"}],Ti.fixAndroidMath(),this.saveGame=new T(this),this.logic=new m,this.logic.setLevel(u.LEVEL_SETTINGS[0]),zi.init();var r=new Qi;r.setBackgroundColor(108798),zi.setRenderer(r);var o=new Ji;f.canvas=o.mCanvas,r.setSurface(o),this.inputSystem=new f(this),this.isDesktop=Ti.isDesktop(),this.isLandscape=!1,this.window=new Xi(r,s(this,this.onResize)),r=new ns(C.getString("res/chunkfive.fnt")),zi.defineImage("spritefont_a",C.get("res/chunkfive_a.png"),r),zi.defineImage("spritefont_b",C.get("res/chunkfive_b.png"),r),zi.defineImage("spritefont_c",C.get("res/chunkfive_c.png"),r),zi.defineImage("spritefont_d",C.get("res/chunkfive_d.png"),r),zi.defineImage("spritefont_e",C.get("res/chunkfive_e.png"),r),zi.defineImage("texture0",C.get("res/sprites_0.png"),new os(C.get("res/sprites_0.json"))),zi.defineImage("texture1",C.get("res/sprites_1.png"),new os(C.get("res/sprites_1.json"))),zi.defineImage("texture2",C.get(window.famobi.__("more_games_image3"))),zi.defineImage("orientation",C.get("res/orientation.png")),this.isDesktop||(this._portraitHint=new l("portrait"),this._portraitHint.setTexture("orientation"),zi.getScene().addChild(this._portraitHint.spatial),this._portraitHint.set_x(u.NATIVE_WIDTH/2),this._portraitHint.set_y(u.NATIVE_HEIGHT/2),this._portraitHint.centerOrigin(),this._portraitHint.set_visible(this.isLandscape),this._portraitHint.applyChanges()),this.showMainMenu()};r.__name__=["App"],r.orientation=function(t){switch(t){case-90:case 90:return Ui.Landscape;default:return Ui.Portrait}},r.prototype={tick:function(t){if(f.timeLastTouch+=t,!(30<f.timeLastTouch))for(var e=0,i=this._screenList;e<i.length;){var s=i[e];++e,s.shown&&s.container.spatial.get_cullingMode()!=ps.CullAlways&&s.onTick(t)}},draw:function(t){if(!(30<f.timeLastTouch)){for(var e=0,i=this._screenList;e<i.length;){var s=i[e];++e,s.shown&&s.container.spatial.get_cullingMode()!=ps.CullAlways&&!this.isLandscape&&s.onDraw(t)}zi.getScene().updateGeometricState(0),zi.drawScene()}},onVisibilityChanged:function(t){t?ge.resume():ge.halt()},onResize:function(t,e){var i=1,i=window.devicePixelRatio,i=this.fitBoundShowAll(Math.round(t*i),Math.round(e*i),u.NATIVE_WIDTH,u.NATIVE_HEIGHT);if(zi.getScene().local.setUniformScale2(i.scale),zi.getScene().local.setTranslate2(i.x,i.y),!this.isDesktop){this.isLandscape=t>e,null!=this._portraitHint&&this._portraitHint.set_visible(this.isLandscape);for(var i=0,s=this._screenList;i<s.length;){var n=s[i];++i,n.container.set_visible(!this.isLandscape),n.onResize(t,e)}}zi.getScene().updateGeometricState(0)},fitBoundShowAll:function(t,e,i,s,n,a){null==n&&(n=0),a=t/i;var r=e/s,o=1,_=0,l=0;return r>=a?(l=Math.round((e-s*a)/2),n>(e-a*s)/e?(l=0,_=Math.round((t-i*r)/2)):o=a):(_=Math.round((t-i*r)/2),n>(t-r*i)/t?(r=a,_=0,l=Math.round((e-s*r)/2)):o=r),{x:_,y:l,scale:o}},startGame:function(){this.hideScreen(O),this.showScreen(k),this.logic.start()},pauseGame:function(){this.logic.pause(),this.getScreen(k).container.spatial.set_cullingMode(ps.CullAlways),this.showScreen(M)},resumeGame:function(){this.hideScreen(M),this.logic.unpause(),this.getScreen(k).container.spatial.set_cullingMode(ps.CullDynamic),this.getScreen(k).registerTouchEvents()},confirmRestart:function(){this.hideScreen(M),this.showScreen(A)},confirmAbort:function(){this.hideScreen(M),this.showScreen(E)},restartGame:function(){this.hideScreen(A),this.logic.stop(),this.logic.start(),this.getScreen(k).container.spatial.set_cullingMode(ps.CullDynamic),this.getScreen(k).registerTouchEvents()},cancelRestart:function(){this.hideScreen(A),this.showScreen(M)},cancelAbort:function(){this.hideScreen(E),this.showScreen(M)},abortGame:function(){this.logic.stop(),this.hideScreen(E),this.hideScreen(k),this.showScreen(O)},gameOver:function(){try{window.famobi.submitHighscore("",this.logic._score)}catch(t){}var e=this.logic._score>this.highScoreTable[0].score;this.highScoreTable.push({score:this.logic._score,name:"Player"}),this.highScoreTable.sort(function(t,e){return e.score-t.score}),this.highScoreTable.pop(),this.saveGame.writeHighscoreTable(),this.gameResult={newHighscore:e,gameWon:4==this.logic._status,score:this.logic._score,numBubblesCleared:this.logic.statBubblesCleared,numBallsShot:this.logic.statBallsShot,largestGroup:this.logic.statLargestGroupCleared,time:this.logic.statPlayTime,hitRatioPercent:Math.floor(100*this.logic.statNumHits/this.logic.statBallsShot)},this.statistics.numBubblesCleared+=this.logic.statBubblesCleared,this.statistics.numGamesPlayed++,this.statistics.numGamesWon=this.gameResult.gameWon?this.statistics.numGamesWon+1:this.statistics.numGamesWon+0,this.statistics.numFewestShots=-1==this.statistics.numFewestShots?this.gameResult.numBallsShot:X["int"](Math.min(this.gameResult.numBallsShot,this.statistics.numFewestShots)),this.statistics.timePlayed+=this.gameResult.time,this.statistics.numBlueBubblesCleared+=this.logic.getStatBubblesClearedPerType(1),this.statistics.numGreenBubblesCleared+=this.logic.getStatBubblesClearedPerType(2),this.statistics.numYellowBubblesCleared+=this.logic.getStatBubblesClearedPerType(3),this.statistics.numTurquoiseBubblesCleared+=this.logic.getStatBubblesClearedPerType(4),this.statistics.numPurpleBubblesCleared+=this.logic.getStatBubblesClearedPerType(5),this.statistics.numRedBubblesCleared+=this.logic.getStatBubblesClearedPerType(6),this.hideScreen(k),this.showScreen(N)},showMainMenu:function(){this.getScreen(P).shown&&this.getScreen(P).hide(),this.getScreen(L).shown&&this.getScreen(L).hide(),this.getScreen(N).shown&&(this.getScreen(N).hide(),this.logic.stop()),this.showScreen(O)},showHighscores:function(){this.getScreen(O).hide(),this.getScreen(L).show()},showStatistics:function(){this.getScreen(O).hide(),this.getScreen(P).show()},showScreen:function(t){this.getScreen(t).show()},hideScreen:function(t){this.getScreen(t).hide()},getScreen:function(t){var e=H.getClassName(t);return this._screenLookup.exists(e)?this._screenLookup.get(e):(t=H.createInstance(t,[this]),this._screenLookup.set(e,t),this._screenList.push(t),t)},addVendorListener:function(t,e,i,s){for(var n=0,a=["webkit","moz","ms","o","khtml"];n<a.length;){var r=a[n];++n,t.addEventListener(r+e,i,s)}t.addEventListener(e,i,s)},updateFullscreen:function(){this._isFullscreen=1==Ti.getFeature2(["fullscreen","fullScreen","isFullScreen"],window.document).feature},lockOrientation:function(t){var e=Ti.getFeature("lockOrientation",window.screen).feature;if(null!=e){var i;switch(t[1]){case 0:i="portrait";break;case 1:i="landscape"}e.apply(window.screen,[i])||null}},unlockOrientation:function(){var t=Ti.getFeature("unlockOrientation",window.screen).feature;null!=t&&t.apply(window.screen,[])},onOrientationChange:function(t){if(t=r.orientation(window.orientation),this.window.onScreenWindowResize(),!this.isDesktop){t=t==Ui.Landscape,null!=this._portraitHint&&(this._portraitHint.spatial.set_cullingMode(t?ps.CullDynamic:ps.CullAlways),t);for(var e=0,i=this._screenList;e<i.length;){var s=i[e];++e,s.container.set_visible(!t),s.onResize(this.window.resolution.x,this.window.resolution.y)}}},requestFullscreen:function(t){if(null==t&&(t=!0),t){t=window.document.documentElement;var e=Ti.getFeature2(["requestFullscreen","requestFullScreen"],t).feature;null!=e&&e.apply(t,[])}else t=Ti.getFeature2(["cancelFullscreen","cancelFullScreen"],window.document).feature,null!=t&&B.callMethod(window.document,t,[])},__class__:r};var o=function(t){this.radius=0,this.freeFloat=this.enabled=this.connected=this.moving=!1,this.type=-1,this.freeFloat=t,this.lastPosY=this.lastPosX=this._posY=this._posX=this.speedY=this.speedX=0,this.neighbors=[]};o.__name__=["Bubble"],o.prototype={destroy:function(){this.enabled&&this.disable(),this.removeNeighbors(),this.neighbors=null},enable:function(t,e,i,s){this.type=t,this.radius=e,this._posX=this.lastPosX=i,this._posY=this.lastPosY=s,this.connected=!1,this.enabled=!0,y.dispatch(0,null,this)},disable:function(){this.enabled=this.moving=!1,y.dispatch(1,null,this)},addNeighbor:function(t){this.neighbors.push(t)},removeNeighbors:function(){this.neighbors=[]},shoot:function(t,e){this.moving=!0,this.speedX=e*Math.sin(t/180*Math.PI),this.speedY=-1*e*Math.cos(t/180*Math.PI),y.dispatch(3,null,this)},touchNeighbors:function(t,e,i,s,n,a){null==n&&(n=0),null==a&&(a=[],a.push(this)),e=t=0;for(var r=this.neighbors;e<r.length;){var o=r[e];if(++e,o.enabled&&-1==g.indexOf(a,o)){var _=this._posX-o._posX,l=this._posY-o._posY,h=Math.sqrt(_*_+l*l);if(!(h>1e-5))throw"";_/=h,l/=h,y.dispatch(7,{dirX:i,dirY:s,amount:(-1*(_*i+l*s)+1)/2,distance:n},o),a.push(o)}t++}if(1>n)for(t=0,e=this.neighbors;t<e.length;)r=e[t],++t,r.enabled&&r.touchNeighbors(this._posX,this._posY,i,s,n+1,a)},snap:function(t,e,i,s){if(this._posX=i,this._posY=s,y.dispatch(6,{fromX:t,fromY:e,toX:i,toY:s},this),t=[],this.checkForNeighborMatches(t),3<=t.length)for(i=e=0;i<t.length;)s=t[i],++i,s.burst(e),e++;return t.length},burst:function(t){y.dispatch(9,{index:t},this),this.disable()},markDisconnected:function(){this.connected=!1},markConnected:function(){this.connected=!0;for(var t=0,e=this.neighbors;t<e.length;){var i=e[t];++t,i.enabled&&!i.connected&&i.markConnected()}},drop:function(t){y.dispatch(8,{index:t},this),this.disable()},tick:function(t){1==this.moving&&(t>.03333333333333333&&(t=.03333333333333333,null),this.iterateMovement(t))},checkForNeighborMatches:function(t,e){null==e&&(e=[],e.push(this),t.push(this));for(var i=0,s=this.neighbors;i<s.length;){var n=s[i];++i,n.enabled&&-1==g.indexOf(e,n)&&(e.push(n),n.type==this.type&&(t.push(n),n.checkForNeighborMatches(t,e)))}},iterateMovement:function(t){this.lastPosX=this._posX,this.lastPosY=this._posY,this._posX+=this.speedX*t,this._posY+=this.speedY*t,this._posX<=this.radius?(this._posX=2*this.radius-this._posX,this.speedX*=-1,y.dispatch(5,null,this)):this._posX>=1-this.radius&&(this._posX=2*(1-this.radius)-this._posX,this.speedX*=-1,y.dispatch(5,null,this)),y.dispatch(4,null,this)},get_posX:function(){return this._posX},get_posY:function(){return this._posY},setPos:function(t,e){(t!=this._posX||e!=this._posY)&&(this._posX=t,this._posY=e,this.lastPosX=t,this.lastPosY=e,this.enabled&&y.dispatch(2,null,this))},__class__:o};var _=function(t){this.mOriginX=this.mOriginY=this.mPivotX=this.mPivotY=this.mRotationDeg=this.mFlags=0,this.mScaleX=this.mScaleY=1,this.mX=this.mY=this.mSizeX=this.mSizeY=0,this.spatial=t,this.mFlags=64,t.set_userData(this),t.mFlags|=256};_.__name__=["de","polygonal","zz","sprite","SpriteBase"],_.prototype={free:function(){this.remove(),this.spatial=null},remove:function(){var t=this.spatial.parent;null!=t&&t.removeChild(this.spatial)},get_alpha:function(){throw""},set_alpha:function(){throw""},set_visible:function(t){return this.spatial.set_cullingMode(t?ps.CullDynamic:ps.CullAlways),t},set_x:function(t){return this.mX=t,this.mFlags|=1,t},set_y:function(t){return this.mY=t,this.mFlags|=1,t},set_rotation:function(t){return this.mRotationDeg=t,this.mFlags|=1,this.mFlags|=16,t},set_scale:function(t){return this.mScaleX=this.mScaleY=t,this.mFlags|=1,t},set_scaleX:function(t){return this.mScaleX=t,this.mFlags|=1,t},set_scaleY:function(t){return this.mScaleY=t,this.mFlags|=1,t},get_width:function(){return this.mSizeX*oe.fabs(this.mScaleX)},set_width:function(t){return this.mScaleX=t/this.mSizeX,this.mFlags|=1,t},get_height:function(){return this.mSizeY*oe.fabs(this.mScaleY)},set_height:function(t){return this.mScaleY=t/this.mSizeY,this.mFlags|=1,t},get_size:function(){return this.mSizeX},set_size:function(t){return this.mScaleX=this.mScaleY=t/this.mSizeX,this.mFlags|=1,t},set_originX:function(t){return this.mOriginX=t,this.mFlags|=1,this.mFlags=0==t&&0==this.mOriginY?-5&this.mFlags:4|this.mFlags,t},set_originY:function(t){return this.mOriginY=t,this.mFlags|=1,this.mFlags=0==t&&0==this.mOriginX?-5&this.mFlags:4|this.mFlags,t},set_pivotX:function(t){return this.mPivotX=t,this.mFlags|=1,this.mFlags=0==t&&0==this.mPivotY?-9&this.mFlags:8|this.mFlags,t},set_pivotY:function(t){return this.mPivotY=t,this.mFlags|=1,this.mFlags=0==t&&0==this.mPivotX?-9&this.mFlags:8|this.mFlags,t},centerOrigin:function(){this.set_originX(-this.mSizeX/2),this.set_originY(-this.mSizeY/2),this.mFlags|=1},centerPivot:function(){var t=this.mSizeY/2;this.mPivotX=this.mSizeX/2,this.mPivotY=t,this.mFlags|=8,this.mFlags|=1},resetPivot:function(){this.mFlags&=-9,this.mPivotX=this.mPivotY=0,this.mFlags|=1},tween:function(t,e,i,s,n){if(null!=this.spatial.mControllers)for(var a=this.spatial.mControllers.iterator();a.hasNext();){var r=a.next();if(1==r.type)if(r.active){if(r.field==t)return void r.tween(t,e,i,s,n)}else r.tween(t,e,i,s,n)}a=new Es,this.spatial.attach(a),a.tween(t,e,i,s,n)},tick:function(t){this.spatial.updateControllers(t)},applyChanges:function(){0<(1&this.mFlags)&&(this.mFlags&=-2,this.syncLocalXform())},syncLocalXform:function(){this.spatial.mFlags|=32},__class__:_};var l=function(t,e){_.call(this,new Ss(t)),this.visual=this.spatial,null!=e&&e.addChild(this)};l.__name__=["de","polygonal","zz","sprite","Sprite"],l.__super__=_,l.prototype=e(_.prototype,{free:function(){_.prototype.free.call(this),this.visual.free(),this.visual=null},localBox:function(t){return this.applyChanges(),null==t&&(t=new xi),t.minX=this.mX,t.minY=this.mY,t.maxX=this.mX+this.get_width(),t.maxY=this.mY+this.get_height(),t},set_frame:function(t){return this.set_frameIndex(this.visual.effect.atlas._indexMap.get(t)),t},set_frameIndex:function(t){var e=this.visual.effect;if(e.mFrameIndex==t)return t;e.mFrameIndex!=t&&(e.mFrameIndex=t,e.setCrop());var i=e.atlas._sizeList._a[t];return this.mSizeX=i.x,this.mSizeY=i.y,e=e.atlas.scale,1!=e&&(this.mSizeX/=e,this.mSizeY/=e),t},setTexture:function(t,e){if(null!=zi.getTextureAtlas(t)){this.visual.effect=zi.createSpriteSheetEffect(t);var i,s=this.visual.effect;i="string"==typeof e?s.atlas.getFrameIndex(e):(0|e)===e?e:0,this.resetPivot(),s.mFrameIndex!=i&&(s.mFrameIndex=i,s.setCrop()),i=s.atlas._sizeList._a[i],this.mSizeX=i.x,this.mSizeY=i.y,s=s.atlas.scale,1!=s&&(this.mSizeX/=s,this.mSizeY/=s)}else s=this.visual.effect=zi.createTextureEffect(t),this.mSizeX=s._tex.image.width,this.mSizeY=s._tex.image.height;return this.mFlags|=1,this},bakeDownScale:function(){this.mSizeX*=oe.fabs(this.mScaleX),this.mSizeY*=oe.fabs(this.mScaleY),this.mScaleY=this.mScaleX=1,this.mFlags|=1},get_alpha:function(){return this.spatial.effect._alpha},set_alpha:function(t){return this.spatial.effect.set_alpha(0>t?0:t>1?1:t),this.spatial.set_cullingMode(0==t?ps.CullAlways:ps.CullDynamic),t},syncLocalXform:function(){_.prototype.syncLocalXform.call(this);var t=this.spatial.local;t._matrix.setIdentity(),t._translate.zero(),t._scale.x=1,t._scale.y=1,t._scale.z=1,t._bits|=31;var e=.017453292519943295*this.mRotationDeg,i=Math.sin(e),e=Math.cos(e),s=this.mScaleX,n=this.mScaleY;0>s?s>-.001&&(s=-.001):.001>s&&(s=.001),0>n?n>-.001&&(n=-.001):.001>n&&(n=.001);var a=s*this.mPivotX,r=n*this.mPivotY;this.mSizeX==this.mSizeY&&s==n?t.setUniformScale2(this.mSizeX*s):(t._scale.x=this.mSizeX*s,t._scale.y=this.mSizeY*n,t._bits&=-14,t),s=t._matrix,s.m11=e,s.m12=-i,s.m21=i,s.m22=e,t._translate.x=-(a*e)+r*i+this.mPivotX+this.mX+this.mOriginX,t._translate.y=-(a*i)-r*e+this.mPivotY+this.mY+this.mOriginY,t._translate.z=1,t._bits&=-2},__class__:l});var h=function(t){this._animIndex=0,l.call(this),this.bubble=t,t.view=this,this.setTexture("texture1",this.getBubbleFrameId(t.type)),this._interval=new me};h.__name__=["BubbleView"],h.__super__=l,h.prototype=e(l.prototype,{free:function(){l.prototype.free.call(this),this.bubble=this.bubble.view=null},tick:function(t){switch(l.prototype.tick.call(this,t),this._animIndex){case 1:this.mScaleX=this.mScaleY=t=this._interval.advance(t),this.mFlags|=1,1==t&&(this._animIndex=0);break;case 2:t=this._interval.advance(t),this.set_scale(1-t),1==t&&(this._animIndex=0,this.free());break;case 3:t=this._interval.advance(t),.5>t?this.set_scale(1+t/.5*-.15000000000000002):t>.5&&this.set_scale(.85+(t-.5)/.5*.15000000000000002),1==t&&(this._animIndex=0,this.mScaleX=this.mScaleY=1,this.mFlags|=1,1)}},setType:function(t){this.set_frame(this.getBubbleFrameId(t))},playBurstAnimation:function(){this.spatial.set_cullingMode(ps.CullDynamic),this._interval.set_duration(.2),this._animIndex=2},playAppearAnimation:function(){this.spatial.set_cullingMode(ps.CullDynamic),this._interval.set_duration(.4),this._animIndex=1},playIdleAnimation:function(){this.spatial.set_cullingMode(ps.CullDynamic),this.mScaleX=this.mScaleY=1,this.mFlags|=1,this._animIndex=0},playSnapAnimation:function(){this._interval.set_duration(.2),this.spatial.set_cullingMode(ps.CullDynamic),this.mScaleX=this.mScaleY=1,this.mFlags|=1,this._animIndex=3},getBubbleFrameId:function(t){switch(t){case 0:return"bubble_null";case 1:return"bubble1";case 2:return"bubble2";case 3:return"bubble3";case 4:return"bubble4";case 5:return"bubble5";case 6:return"bubble6";default:throw""+t}},__class__:h});var u=function(){};u.__name__=["Config"];var c=function(t,e){e=e.split("u").join(""),this.r=RegExp(t,e)};c.__name__=["EReg"],c.prototype={match:function(t){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(t),this.r.s=t,null!=this.r.m},matched:function(t){if(null!=this.r.m&&t>=0&&t<this.r.m.length)return this.r.m[t];throw""},__class__:c};var m=function(){this._numBubbleTypesOnBoard=this._numRowsToInsert=this._score=this._numSameColorsInARow=this._shootingArmRow=this._shootingArmAngle=this._currChain=this._numMissed=this._missesUntilNewRow=this._freeRows=this.statBallsShot=this.statNumHits=this.statNumMisses=this.statBubblesCleared=this.statLargestGroupCleared=this.statPlayTime=0,this._bubbles=this._rowIndentation=this._currentBubble=null,this._maxMissesUntilNewRow=this._bubbleDiameterPlusSpacing=this._bubbleDiameter=this._bubbleRadius=this._bubbleSpacing=this._bubblePadding=0,this._availableColors=null,this._numRows=this._numStartRows=this._numCols=0,this._levelSettings=null,this._scratchVec=new G(0,0),this._scratchIp=new G(0,0),this._bubbleCount=[];for(var t=0;7>t;){var e=t++;this._bubbleCount[e]=0}for(this._nextBubbleType=this._currentBubbleType=-1,this._status=0,this._statBubblesClearedPerType=[],t=0;7>t;)e=t++,this._statBubblesClearedPerType[e]=0;y.addListener(0,s(this,this.handleMessages)),y.addListener(1,s(this,this.handleMessages)),y.addListener(4,s(this,this.handleMessages))};m.__name__=["GameLogic"],m.prototype={setLevel:function(t){this._levelSettings=t,this._numRows=this._levelSettings.max_rows+1,this._numStartRows=this._levelSettings.start_rows+1,this._numCols=this._levelSettings.bubbles_per_row,this._availableColors=this._levelSettings.colors,this._maxMissesUntilNewRow=this._levelSettings.misses_until_new_row,this._bubblePadding=u.BUBBLE_PADDING,this._bubbleDiameterPlusSpacing=(1-2*this._bubblePadding)/(this._numCols+.5),this._bubbleDiameter=this._bubbleDiameterPlusSpacing/(1+u.BUBBLE_SPACING_PERCENT),this._bubbleRadius=.5*this._bubbleDiameter,this._bubbleSpacing=this._bubbleDiameterPlusSpacing-this._bubbleDiameter},start:function(){if(!this._levelSettings)throw"";this.createBubbles(),this._score=0,this._status=2,this._numSameColorsInARow=0,this._nextBubbleType=this._currentBubbleType=-1,this._numMissed=this._currChain=this._shootingArmAngle=0,this._missesUntilNewRow=this._maxMissesUntilNewRow,this.resetStatistics(),this.fetchNextBubble(),y.dispatch(11)},stop:function(){this.destroyBubbles(),this._status=0,y.dispatch(13)},destroy:function(){y.removeAllListeners(s(this,this.handleMessages))},pause:function(){this._status=3},unpause:function(){this._status=2},get_paused:function(){return 3==this._status},setShootingArmRow:function(t){this._shootingArmRow=t,null!=this._currentBubble&&this._currentBubble.enabled&&!this._currentBubble.moving&&this._currentBubble.setPos(.5,.5*this._bubbleDiameterPlusSpacing+.866*(this._shootingArmRow-1)*this._bubbleDiameterPlusSpacing)},shoot:function(){2==this._status&&0==this._currentBubble.moving&&(this._currentBubble.shoot(this._shootingArmAngle,u.SHOOTER_COLOR_BUBBLE_SPEED),this.statBallsShot++)},getBubbleBurstPoints:function(t){return t<u.POINTS_PER_BUBBLE.length?u.POINTS_PER_BUBBLE[t]:u.POINTS_PER_BUBBLE[u.POINTS_PER_BUBBLE.length-1]},get_score:function(){return this._score},get_shootingArmAngle:function(){return this._shootingArmAngle},set_shootingArmAngle:function(t){return this._shootingArmAngle=t},get_rowHeight:function(){return.866*this._bubbleDiameterPlusSpacing},get_halfBubbleHeight:function(){return.5*this._bubbleDiameterPlusSpacing},get_shootingArmY:function(){return.5*this._bubbleDiameterPlusSpacing+.866*(this._shootingArmRow-1)*this._bubbleDiameterPlusSpacing},get_maxRowY:function(){return.5*this._bubbleDiameterPlusSpacing+.866*(this._numRows-1)*this._bubbleDiameterPlusSpacing},get_status:function(){return this._status},get_freeRows:function(){return this._freeRows},get_numRowsToInsert:function(){return this._numRowsToInsert},getStatBubblesClearedPerType:function(t){return this._statBubblesClearedPerType[t]},resetStatistics:function(){for(var t=this.statPlayTime=this.statLargestGroupCleared=this.statBubblesCleared=this.statNumMisses=this.statNumHits=this.statBallsShot=0;7>t;){var e=t++;this._statBubblesClearedPerType[e]=0}},createBubbles:function(){for(var t=0;7>t;){var e=t++;this._bubbleCount[e]=0}for(this._bubbles=[],t=0,e=this._numRows;e>t;){var i=t++;this._bubbles[i]=[]}for(this._rowIndentation=[],t=0,e=this._numRows;e>t;)i=t++,this._rowIndentation[i]=!1;for(t=null,e=0,i=this._numRows;i>e;){for(var s=e++,t=[],n=0,a=this._numCols;a>n;){var r=n++;t[r]=null}for(n=0,a=this._numCols;a>n;)r=n++,t[r]=new o(!1);this._bubbles[s]=t,this._rowIndentation[s]=0==s%2?!1:!0}for(t=this._scratchVec,e=0,i=this._numCols;i>e;)s=e++,this.calcBubblePos(s,0,t),this._bubbles[0][s].enable(0,this._bubbleRadius,t.x,t.y);for(t=1,e=this._numStartRows;e>t;)i=t++,this.placeBubbleRow(i,!0);this.updateAllPositions(),this.updateAllNeighbors(),this.countFreeRows(),this._currentBubble=new o(!0)},destroyBubbles:function(){this._currentBubble.destroy(),this._currentBubble=null;for(var t=0,e=this._bubbles;t<e.length;){var i=e[t];++t;for(var s=0;s<i.length;){var n=i[s];++s,n.destroy()}}this._rowIndentation=this._bubbles=null,this._numBubbleTypesOnBoard=0},chooseRandomBoardColor:function(t){if(t)return this._availableColors[Math.floor(Math.random()*this._availableColors.length)];t=[];for(var e=0,i=this._availableColors.length;i>e;){var s=e++;0<this._bubbleCount[this._availableColors[s]]&&t.push(this._availableColors[s])}return 1==t.length?t[0]:t[Math.floor(Math.random()*t.length)]},chooseRandomShootColor:function(t,e){null==e&&(e=0);for(var i=[],s=0,n=this._availableColors.length;n>s;){var a=s++;0<this._bubbleCount[this._availableColors[a]]&&i.push(this._availableColors[a])}if(1==i.length)return i[0];s=-1;do s=i[Math.floor(Math.random()*i.length)],-1!=t&&t==s&&e>=u.MAX_SAME_COLORS_IN_A_ROW&&null;while(-1!=t&&t==s&&e>=u.MAX_SAME_COLORS_IN_A_ROW);return s},fetchNextBubble:function(){if(this._currentBubble.enabled&&this._currentBubble.disable(),2==this._status){if(-1==this._currentBubbleType)this._currentBubbleType=this.chooseRandomShootColor(-1),this._nextBubbleType=this.chooseRandomShootColor(-1),this._numSameColorsInARow=0;else{for(;0==this._bubbleCount[this._nextBubbleType];)this._nextBubbleType=this.chooseRandomShootColor(-1);this._currentBubbleType=this._nextBubbleType,this._nextBubbleType=this.chooseRandomShootColor(this._nextBubbleType,this._numSameColorsInARow),this._nextBubbleType==this._currentBubbleType?this._numSameColorsInARow++:this._numSameColorsInARow=0}this._currentBubble.enable(this._currentBubbleType,this._bubbleRadius,.5,.5*this._bubbleDiameterPlusSpacing+.866*(this._shootingArmRow-1)*this._bubbleDiameterPlusSpacing),y.dispatch(17,{upcoming:this._nextBubbleType,left:this._missesUntilNewRow-this._numMissed})}},calcBubblePos:function(t,e,i){var s=.5*this._bubbleDiameterPlusSpacing+.866*e*this._bubbleDiameterPlusSpacing+this._bubblePadding;return i.x=0==this._rowIndentation[e]?.5*this._bubbleDiameterPlusSpacing+t*this._bubbleDiameterPlusSpacing+this._bubblePadding:this._bubbleDiameterPlusSpacing+t*this._bubbleDiameterPlusSpacing+this._bubblePadding,i.y=s,i},updateAllPositions:function(){for(var t=null,e=this._scratchVec,i=0,s=this._numRows;s>i;)for(var n=i++,a=0,r=this._numCols;r>a;){var o=a++,t=this._bubbles[n][o];this.calcBubblePos(o,n,e),t.setPos(e.x,e.y)}},updateBubbleNeighbors:function(t,e){var i=this._bubbles[e][t];i.removeNeighbors(),t>0&&i.addNeighbor(this._bubbles[e][t-1]),t<this._numCols-1&&i.addNeighbor(this._bubbles[e][t+1]),e>0&&(0==this._rowIndentation[e]?(t>0&&i.addNeighbor(this._bubbles[e-1][t-1]),i.addNeighbor(this._bubbles[e-1][t])):(i.addNeighbor(this._bubbles[e-1][t]),t<this._numCols-1&&i.addNeighbor(this._bubbles[e-1][t+1]))),e<this._numRows-1&&(0==this._rowIndentation[e]?(t>0&&i.addNeighbor(this._bubbles[e+1][t-1]),i.addNeighbor(this._bubbles[e+1][t])):(i.addNeighbor(this._bubbles[e+1][t]),t<this._numCols-1&&i.addNeighbor(this._bubbles[e+1][t+1])))},updateAllNeighbors:function(){for(var t=0,e=this._numRows;e>t;)for(var i=t++,s=0,n=this._numCols;n>s;){var a=s++;this.updateBubbleNeighbors(a,i)}},placeBubble:function(t,e,i){var s=this._bubbles[e][t];t=this.calcBubblePos(t,e,this._scratchVec),s.enable(this.chooseRandomBoardColor(i),this._bubbleRadius,t.x,t.y)},placeBubbleRow:function(t,e){for(var i=0,s=this._numCols;s>i;){var n=i++;this.placeBubble(n,t,e)}},countFreeRows:function(){this._freeRows=0;for(var t=this._numRows-1;t>=0;){for(var e=0,i=this._numCols;i>e;){var s=e++;if(this._bubbles[t][s].enabled)return}this._freeRows++,t--}},updateRowsToInsert:function(){this._numRowsToInsert=1+this._availableColors.length-this._numBubbleTypesOnBoard},insertNewRows:function(){for(var t=0,e=this._numRowsToInsert;e>t;){t++;for(var i=0,s=this._bubbles[this._numRows-1];i<s.length;){var n=s[i];++i,n.enabled&&n.disable()}for(i=this._bubbles[this._numRows-1],s=this._numRows-1;s>1;)this._bubbles[s]=this._bubbles[s-1],this._rowIndentation[s]=this._rowIndentation[s-1],s--;for(this._bubbles[1]=i,this._rowIndentation[0]=this._rowIndentation[2],this._rowIndentation[1]=1==this._rowIndentation[2]?!1:!0,this.placeBubbleRow(1,!1),this.updateAllPositions(),this.updateAllNeighbors(),i=this._bubbles[this._numRows-1],s=0;s<i.length;)if(n=i[s],++s,n.enabled)return void this.setLevelFailed()}y.dispatch(14)},dropIsolatedBubbles:function(t){for(var e=null,i=null,s=0,n=this._numRows;n>s;)for(var e=s++,e=this._bubbles[e],a=0,r=this._numCols;r>a;)i=a++,i=e[i],i.enabled&&i.markDisconnected();for(e=this._bubbles[0],s=0,n=this._numCols;n>s;)i=s++,i=e[i],i.enabled&&!i.connected&&i.markConnected();for(n=s=0,a=this._numRows;a>n;)for(var e=n++,e=this._bubbles[e],r=0,o=this._numCols;o>r;)i=r++,i=e[i],i.enabled&&0==i.connected&&(i.drop(t+s),s++);return s},snapCurrentBubble:function(t,e,i){t.enable(this._currentBubble.type,this._currentBubble.radius,t._posX,t._posY);var s=this._currentBubble.speedX,n=this._currentBubble.speedY,a=Math.sqrt(s*s+n*n);if(!(a>1e-5))throw"";t.touchNeighbors(this._currentBubble._posX,this._currentBubble._posY,s/a,n/a),e=t.snap(e,i,t._posX,t._posY),e>=3?(t=this.dropIsolatedBubbles(e),e+=t,this._currChain++,this.addBurstPoints(e),this.statNumHits++,e>this.statLargestGroupCleared&&(this.statLargestGroupCleared=e),0==this._numBubbleTypesOnBoard&&this.setLevelComplete()):(this._currChain=0,-1!=g.indexOf(this._bubbles[this._numRows-1],t)?this.setLevelFailed():(this._numMissed++,this.statNumMisses++,this._numMissed==this._missesUntilNewRow&&(this.insertNewRows(),this._numMissed=0,1<this._missesUntilNewRow?this._missesUntilNewRow--:this._missesUntilNewRow=this._maxMissesUntilNewRow))),this.countFreeRows(),this.fetchNextBubble()},addPoints:function(t,e){null==e&&(e=0),this._score+=t,y.dispatch(16,{score:this._score,numBursted:e})},addBurstPoints:function(t){for(var e=0,i=0;t>i;)var s=i++,e=e+this.getBubbleBurstPoints(s);this.addPoints(e,t)},checkMovingBubble:function(){var t=this.testForBubbleCollisions(),e=null;if(0<t.length){for(var i=0,s=null,n=1e8,a=0,r=0,o=null,_=i=0,l=null,_=0;_<t.length;)l=t[_],++_,e=l,i=l.intersect.x-l.posBackwardX,o=l.intersect.y-l.posBackwardY,i=i*i+o*o,n>i&&(s=l.bubble,n=i,a=l.intersect.x,r=l.intersect.y);
if(null!=s){for(t=-1*e.directionX*this._bubbleRadius+a,r=-1*e.directionY*this._bubbleRadius+r,_=1e6,l=null,o=0,s=s.neighbors;o<s.length;)n=s[o],++o,0==n.enabled&&(i=t-n._posX,a=r-n._posY,i=i*i+a*a,_>i&&(l=n,_=i));if(null==l)for(U.playSound(z.GameOverSuccess),_=1e6,l=null,s=0,n=this._numRows;n>s;)for(var a=s++,h=0,c=this._numCols;c>h;)if(i=h++,o=this._bubbles[a][i],0==o.enabled){var i=t-o._posX,m=r-o._posY,i=i*i+m*m;_>i&&(l=o,_=i)}if(null!=l)return void this.snapCurrentBubble(l,-1*e.directionX*(1-.5*u.BUBBLE_SNEAK)*this._bubbleRadius+t,-1*e.directionY*(1-.5*u.BUBBLE_SNEAK)*this._bubbleRadius+r)}}0>this._currentBubble._posY&&this.fetchNextBubble()},testForBubbleCollisions:function(){var t=[],e=this._currentBubble.radius,i=(1-u.BUBBLE_SNEAK)*this._currentBubble.radius,s=.03333333333333333*this._currentBubble.speedX,n=.03333333333333333*this._currentBubble.speedY,a=-.5*s+this._currentBubble._posX,r=-.5*n+this._currentBubble._posY,s=.5*s+this._currentBubble._posX,n=.5*n+this._currentBubble._posY,o=0,_=0,o=0,l=!1;return e>s?(o=(e-a)/(s-a),_=a+o*(s-a),o=r+o*(n-r),l=!0,s=2*e-s):e>a?(o=(e-a)/(s-a),_=a+o*(s-a),o=r+o*(n-r),l=!0,a=2*e-a):s>1-e?(o=(1-e-a)/(s-a),_=a+o*(s-a),o=r+o*(n-r),l=!0,s=2*(1-e)-s):a>1-e&&(o=(1-e-a)/(s-a),_=a+o*(s-a),o=r+o*(n-r),l=!0,a=2*(1-e)-a),l?(this.findLineSegmentCollisionsWithBubbles(a,r,_,o,i,t),this.findLineSegmentCollisionsWithBubbles(_,o,s,n,i,t)):this.findLineSegmentCollisionsWithBubbles(a,r,s,n,i,t),t},findLineSegmentCollisionsWithBubbles:function(t,e,i,s,n,a){var r=null,o=null,_=null,l=0,h=0,u=i-t,c=s-e,r=Math.sqrt(u*u+c*c);if(!(r>1e-5))throw"";u/=r,c/=r;for(var m=-c,d=u,p=Math.min(t,i)-n,f=Math.min(e,s)-n,g=Math.max(t,i)+n,b=Math.max(e,s)+n,w=this._numRows-1;w>=0;){for(var r=this._bubbles[w],v=0,S=this._numCols;S>v;)if(o=v++,o=r[o],o.enabled&&!(g<o._posX-o.radius||b<o._posY-o.radius||p>o._posX+o.radius||f>o._posY+o.radius)){var _=this.calcRayRayIntersection(i,s,t,e,o._posX,o._posY,o._posX+m,o._posY+d),h=n+o.radius,l=o._posX-_.x,y=o._posY-_.y,l=Math.sqrt(l*l+y*y);l>h||a.push({bubble:o,intersect:_,directionX:u,directionY:c,posBackwardX:t,posBackwardY:e,posForwardX:i,posForwardY:s})}w--}},tick:function(t){switch(this._status){case 2:this.tickHandleGameRunning(t);break;case 3:case 4:case 5:break;default:throw""+this._status}y.dispatch(15)},tickHandleGameRunning:function(t){this._currentBubble.tick(t),t>1&&(t=1),this.statPlayTime+=t},setLevelComplete:function(){this._status=4;for(var t=0,e=this._numCols;e>t;){var i=t++;this._bubbles[0][i].disable()}this._currentBubble.burst(0),y.dispatch(12)},setLevelFailed:function(){this._status=5,y.dispatch(12)},handleMessages:function(t,e,i){switch(e=null,t){case 4:2==this._status&&this.checkMovingBubble();break;case 0:e=i,e.freeFloat||0==e.type||(this._bubbleCount[e.type]++,1==this._bubbleCount[e.type]&&(this._numBubbleTypesOnBoard++,this.updateRowsToInsert()));break;case 1:e=i,e.freeFloat||0==e.type||(this._bubbleCount[e.type]--,this.statBubblesCleared++,this._statBubblesClearedPerType[e.type]++,0==this._bubbleCount[e.type]&&(this._numBubbleTypesOnBoard--,this.updateRowsToInsert()));break;default:throw""+t}},calcRayRayIntersection:function(t,e,i,s,n,a,r,o){var _,l;return _=s-e,l=t-i,i=i*e-t*s,t=o-a,e=n-r,n=r*a-n*o,a=_*e-t*l,0==a?null:(this._scratchIp.x=(l*n-e*i)/a,this._scratchIp.y=(t*i-_*n)/a,this._scratchIp)},__class__:m};var d=function(){};d.__name__=["HxOverrides"],d.cca=function(t,e){var i=t.charCodeAt(e);return i!=i?void 0:i},d.substr=function(t,e,i){return null!=e&&0!=e&&null!=i&&0>i?"":(null==i&&(i=t.length),0>e?(e=t.length+e,0>e&&(e=0)):0>i&&(i=t.length+i-e),t.substr(e,i))},d.indexOf=function(t,e,i){var s=t.length;for(0>i&&(i+=s,0>i&&(i=0));s>i;){if(t[i]===e)return i;i++}return-1},d.remove=function(t,e){var i=d.indexOf(t,e,0);return-1==i?!1:(t.splice(i,1),!0)},d.iter=function(t){return{cur:0,arr:t,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var p=function(){};p.__name__=["I18n"],p.init=function(t){p._language=t,t=C.getString("res/strings.json"),p._strings=JSON.parse(t)},p.get=function(t){return B.field(B.field(p._strings,t),p._language)};var f=function(t){this.last=0;var e=this;if(this._app=t,t=window.document,null==s(t,t.createTouch)){t=function(t){var i=t.clientX,s=t.clientY,n=f.canvas.getBoundingClientRect(),i=e.getX(i,n),s=e.getY(s,n);switch(t.type){case"mousedown":f.timeLastTouch=0,null!=e.onTouchStart&&e.onTouchStart(i,s);break;case"mousemove":f.timeLastTouch=0,null!=e.onTouchMove&&e.onTouchMove(i,s);break;case"mouseup":f.timeLastTouch=0,null!=e.onTouchEnd&&e.onTouchEnd(i,s)}};for(var i=0,n=["mousedown","mousemove","mouseup"];i<n.length;){var a=n[i];++i,f.canvas.addEventListener(a,t,!1)}}else t.addEventListener("touchmove",function(t){t.preventDefault()},!1),f.canvas.addEventListener("touchstart",s(this,this.touchStartHandler),!1),f.canvas.addEventListener("touchmove",s(this,this.touchMoveHandler),!1),f.canvas.addEventListener("touchend",s(this,this.touchEndHandler),!1)};f.__name__=["InputSystem"],f.prototype={touchStartHandler:function(t){0!=this.last&&250>t.timeStamp-this.last&&t.preventDefault(),this.last=t.timeStamp;var e=t.targetTouches[0].clientX;t=t.targetTouches[0].clientY;var i=f.canvas.getBoundingClientRect(),e=this.getX(e,i);t=this.getY(t,i),f.timeLastTouch=0,null!=this.onTouchStart&&this.onTouchStart(e,t)},touchMoveHandler:function(t){var e=t.targetTouches[0].clientX;t=t.targetTouches[0].clientY;var i=f.canvas.getBoundingClientRect();this._lastX=e=this.getX(e,i),this._lastY=t=this.getY(t,i),f.timeLastTouch=0,null!=this.onTouchMove&&this.onTouchMove(e,t)},touchEndHandler:function(){f.timeLastTouch=0,null!=this.onTouchEnd&&this.onTouchEnd(this._lastX,this._lastY)},getX:function(t,e){return(t-e.left)*f.canvas.width/e.width},getY:function(t,e){return(t-e.top)*f.canvas.height/e.height},__class__:f};var g=function(){};g.__name__=["Lambda"],g.array=function(t){var e=[];for(t=i(t)();t.hasNext();){var s=t.next();e.push(s)}return e},g.filter=function(t,e){for(var s=new b,n=i(t)();n.hasNext();){var a=n.next();e(a)&&s.add(a)}return s},g.indexOf=function(t,e){for(var s=0,n=i(t)();n.hasNext();){var a=n.next();if(e==a)return s;s++}return-1};var b=function(){this.length=0};b.__name__=["List"],b.prototype={add:function(t){t=[t],null==this.h?this.h=t:this.q[1]=t,this.q=t,this.length++},iterator:function(){return{h:this.h,hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var t=this.h[0];return this.h=this.h[1],t}}},__class__:b};var w=function(){};w.__name__=["de","polygonal","core","event","IObserver"],w.prototype={__class__:w};var v=function(){this.__guid=0;var t=window.document.getElementById("logo");t.parentNode.removeChild(t),this._app=new r,ge.setTickRate(30),ge.attach(this)};v.__name__=["Main"],v.__interfaces__=[w],v.main=function(){v.init()},v.init=function(){ge.init(),ge.setTimeSource(new Ei),be.init();var t=function(t){for(var e=t.keys();e.hasNext();){var i=e.next();C.set(i,t.get(i))}if(Ti.isWebAudioSupported())for(Oi.init(),t=t.keys();t.hasNext();)e=t.next(),new c("(wav|ogg)$","").match(e)&&Oi.registerSoundAsset(e,C.get(e));new v};try{Ti.isAndroidStockBrowser()&&(Ti.allowXhr=!1)}catch(e){}if(Ti.isWebAudioSupported())switch(U.soundSupported=!0,Ti.getPlatform()[1]){case 0:case 3:case 4:case 2:U.format=R.Ogg,Ai.load(t,null,new c("(wav)$",""));break;case 1:U.format=R.Wav,Ai.load(t,null,new c("(ogg)$",""));break;default:U.soundSupported=!1,Ai.load(t,null,new c("(ogg|wav)$",""))}else U.soundSupported=!1,Ai.load(t,null,new c("(ogg|wav)$",""))},v.prototype={onUpdate:function(t,e,i){1==t&&(be.tick(),this._app.tick(i)),2==t&&this._app.draw(i)},__class__:v};var S=function(){};S.__name__=["IMap"],Math.__name__=["Math"];var y=function(){};y.__name__=["MessageRouter"],y.init=function(){y._initialized||(y._listeners=new Ls,y._initialized=!0)},y.free=function(){y._listeners=null,y._initialized=!1},y.dispatch=function(t,e,i){y._initialized||(y._listeners=new Ls,y._initialized=!0);var s=y._listeners.get(t);if(null!=s)for(var n=0;n<s.length;){var a=s[n];++n,a(t,e,i)}},y.addListener=function(t,e){y._initialized||(y._listeners=new Ls,y._initialized=!0);var i=y._listeners;if(null==i.get(t)&&i.set(t,[]),-1!=g.indexOf(i.get(t),e))throw""+t+"'!";i.get(t).push(e)},y.removeListener=function(t,e){y._initialized||(y._listeners=new Ls,y._initialized=!0);var i=y._listeners.get(t);if(null==i)throw""+t+"'!";var s=g.indexOf(i,e);if(-1==s)throw""+t+"'!";i.splice(s,1)},y.removeAllListeners=function(t){y._initialized||(y._listeners=new Ls,y._initialized=!0);for(var e=y._listeners,i=e.keys();i.hasNext();){var s=i.next(),s=e.get(s);null!=s&&-1!=g.indexOf(s,t)&&s.splice(g.indexOf(s,t),1)}},y.getNumListeners=function(){y._initialized||(y._listeners=new Ls,y._initialized=!0);for(var t=y._listeners,e=0,i=t.keys();i.hasNext();){var s=i.next(),s=t.get(s);null!=s&&(e+=s.length)}return e},y.getNumListenersByType=function(t){return y._initialized||(y._listeners=new Ls,y._initialized=!0),null==y._listeners.get(t)?0:y._listeners.get(t).length},y.getNumListenersByHandler=function(t){y._initialized||(y._listeners=new Ls,y._initialized=!0);for(var e=y._listeners,i=0,s=e.keys();s.hasNext();){var n=s.next(),n=e.get(n);null!=n&&-1!=g.indexOf(n,t)&&i++}return i};var x=function(t,e){l.call(this,"points_view"),this.setTexture("texture1",this.getFrameName(t)),this._pool=e};x.__name__=["PointsView"],x.__super__=l,x.prototype=e(l.prototype,{animate:function(){this.mScaleX=this.mScaleY=1,this.mFlags|=1,this.set_alpha(1),this._time=0},setPoints:function(t){this.set_frame(this.getFrameName(t)),this.centerOrigin(),this.centerPivot()},tick:function(t){l.prototype.tick.call(this,t),this.set_y(this.mY-.5),this._time+=t,.5<this._time&&(this.set_alpha(this.get_alpha()-.1),.005>=this.get_alpha()&&(this.set_alpha(0),this.sleep()))},getFrameName:function(t){switch(t){case 10:return"pop_score_10";case 25:return"pop_score_25";case 50:return"pop_score_50";case 100:return"pop_score_100";case 250:return"pop_score_250";case 500:return"pop_score_500";case 1e3:return"pop_score_1000";default:return null}},sleep:function(){this.remove(),this._pool.push(this)},__class__:x});var C=function(){};C.__name__=["R"],C.set=function(t,e){null==C._lib&&(C._lib=new Bi),C._lib.set(t,e)},C.get=function(t){return C._lib.get(t)},C.getString=function(t){return C.get(t)},C.getImageElement=function(t){return C.get(t)},C.getAudioElement=function(t){return C.get(t)},C.getAudioBuffer=function(t){return C.get(t)};var B=function(){};B.__name__=["Reflect"],B.field=function(t,e){try{return t[e]}catch(i){return null}},B.callMethod=function(t,e,i){return e.apply(t,i)},B.isFunction=function(t){return"function"==typeof t&&!(t.__name__||t.__ename__)};var T=function(t){this._app=t,this._storage=Xs.getLocalStorage(),null!=this._storage&&(null!=this._storage.getItem("statistics")?t.statistics=JSON.parse(this._storage.getItem("statistics")):this._storage.setItem("statistics",JSON.stringify(t.statistics)),null!=this._storage.getItem("highscoreTable")?t.highScoreTable=JSON.parse(this._storage.getItem("highscoreTable")):this._storage.setItem("highscoreTable",JSON.stringify(t.highScoreTable)),null!=this._storage.getItem("mute")?U.soundMute="true"==this._storage.getItem("mute"):this._storage.setItem("mute","true"),null)};T.__name__=["SaveGame"],T.prototype={writeSoundMute:function(){null!=this._storage&&this._storage.setItem("mute",U.soundMute?"true":"false")},writeStatistics:function(){null!=this._storage&&this._storage.setItem("statistics",JSON.stringify(this._app.statistics))},writeHighscoreTable:function(){null!=this._storage&&this._storage.setItem("highscoreTable",JSON.stringify(this._app.highScoreTable))},__class__:T};var I=function(t,e){a.call(this,t);var i=this.createSprite("window","texture0","dialog_background",35,160);i.mScaleX=i.mScaleY=2,i.mFlags|=1,this.createTextField(new xi(76,210,563,446),window.famobi.__(e),40),i=this.createSprite("button_ok","texture0","button_dialog",91,450),this.createTextLine(i.localBox(),window.famobi.__("ok"),60,"spritefont_a"),i=this.createSprite("button_cancel","texture0","button_dialog",91,604),this.createTextLine(i.localBox(),window.famobi.__("cancel"),60,"spritefont_a")};I.__name__=["ScreenConfirm"],I.__super__=a,I.prototype=e(a.prototype,{onTouchStart:function(t,e){this.hitTest(this.container.getChildByName("button_ok"),t,e)?(U.playSound(z.Tap),this.yes()):this.hitTest(this.container.getChildByName("button_cancel"),t,e)&&(U.playSound(z.Tap),this.no())},yes:function(){},no:function(){},__class__:I});var E=function(t){I.call(this,t,"quit_to_main_menu_dialog_message")};E.__name__=["ScreenConfirmAbort"],E.__super__=I,E.prototype=e(I.prototype,{yes:function(){this._app.abortGame()},no:function(){this._app.cancelAbort()},__class__:E});var A=function(t){I.call(this,t,"restart_dialog_message")};A.__name__=["ScreenConfirmRestart"],A.__super__=I,A.prototype=e(I.prototype,{yes:function(){this._app.restartGame()},no:function(){this._app.cancelRestart()},__class__:A});var k=function(t){for(this._displayedScore=this._timeUntilNextScoreUpdate=0,this._killingLineVisible=this._clickedDown=!1,a.call(this,t),this._logic=t.logic,this._gameWidth=u.NATIVE_WIDTH,t.isDesktop?(t=new l(null,this.container),t.setTexture("texture1","boundary_line"),t.set_height(u.NATIVE_HEIGHT+200),t.mY=-100,t.mFlags|=1,t=new l(null,this.container),t.setTexture("texture1","boundary_line")):(t=new l(null,this.container),t.setTexture("texture1","boundary"),t.set_height(u.NATIVE_HEIGHT+200),t.mX=-250,t.mFlags|=1,t.mY=-100,t.mFlags|=1,t=new l(null,this.container),t.setTexture("texture1","boundary")),t.set_height(u.NATIVE_HEIGHT+200),t.set_x(u.NATIVE_WIDTH),t.mY=-100,t.mFlags|=1,this._cloud=new l("cloud",this.container),this._cloud.setTexture("texture1",.5>Math.random()?"cloud_left":"cloud_right"),this._shootingArmView=new F,this._shootingArmView.set_pivotX(.5*this._shootingArmView.get_width()),this._shootingArmView.set_pivotY(this._shootingArmView.get_height()),this._shootingArmView.set_originX(-(.5*this._shootingArmView.get_width())),this._shootingArmView.set_originY(-this._shootingArmView.get_height()),this._shootingArmView.set_scale(.5),this.container.addChild(this._shootingArmView),this._groupBubbles=new Ts,this.container.addChild(this._groupBubbles),this._aimView=new l("aim_view",this.container),this._aimView.setTexture("texture1","aim_dot"),this._aimView.centerOrigin(),this._aimView.centerPivot(),this._killingLineView=new l,this._killingLineView.setTexture("texture1","killing_line"),this._killingLineView.set_width(u.NATIVE_WIDTH),this.container.addChild(this._killingLineView),this._pauseButtonView=new l("pause_button",this.container),this._pauseButtonView.setTexture("texture0","button_pause"),this._pauseButtonView.set_x(528),this._pauseButtonView.set_y(840),this._groupScore=new Ts,this._groupScore.set_x(23),this._groupScore.set_y(865),this.container.addChild(this._groupScore),t=0;7>t;){var e=t++,i=new l;i.setTexture("texture1","score_digit_0"),i.set_x((6-e)*i.get_width()),this._groupScore.addChild(i)}for(this._groupUpcomingBubbles=new Ts,this._groupUpcomingBubbles.set_x(u.NATIVE_WIDTH/2),this._groupUpcomingBubbles.set_y(825),this.container.addChild(this._groupUpcomingBubbles),t=0;6>t;)e=t++,i=new l(null,this._groupUpcomingBubbles),i.setTexture("texture1","bubble_empty"),i.set_width(30),i.set_height(30),i.set_y(-15),i.set_x(3>e?-100+34*e:2+34*(e-3));for(this.updateUpcomingBubbles(-1,u.NUM_BOTTOM_BUBBLES),this._pointsViewPool=[],t=0;10>t;)t++,this._pointsViewPool.push(new x(0,this._pointsViewPool));y.addListener(9,s(this,this.handleMessages)),y.addListener(8,s(this,this.handleMessages)),y.addListener(1,s(this,this.handleMessages)),y.addListener(0,s(this,this.handleMessages)),y.addListener(4,s(this,this.handleMessages)),y.addListener(2,s(this,this.handleMessages)),y.addListener(3,s(this,this.handleMessages)),y.addListener(5,s(this,this.handleMessages)),y.addListener(6,s(this,this.handleMessages)),y.addListener(7,s(this,this.handleMessages)),y.addListener(10,s(this,this.handleMessages)),y.addListener(11,s(this,this.handleMessages)),y.addListener(12,s(this,this.handleMessages)),y.addListener(13,s(this,this.handleMessages)),y.addListener(16,s(this,this.handleMessages)),y.addListener(14,s(this,this.handleMessages)),y.addListener(17,s(this,this.handleMessages))};k.__name__=["ScreenGame"],k.__super__=a,k.prototype=e(a.prototype,{free:function(){for(y.removeAllListeners(s(this,this.handleMessages)),this.removeAllBubbleVos();0<this._groupUpcomingBubbles.node.numChildren;)Us.__cast(this._groupUpcomingBubbles,l).free();this.container.removeChild(this._groupUpcomingBubbles),this._logic=this._groupUpcomingBubbles=null,a.prototype.free.call(this)},onShow:function(){this._aimView.set_alpha(0),this._shootingArmView.set_alpha(0),this._killingLineView.set_alpha(0),this._groupBubbles.set_y(-.866*this._gameWidth*this._logic._bubbleDiameterPlusSpacing),this.initShootingArm(),this._groupUpcomingBubbles.set_y(function(t){return t=t._shootingArmView,t.set_y(t.mY+60)}(this)),this._killingLineView.set_y(this._groupBubbles.mY+this._logic.get_maxRowY()*this._gameWidth),this.updateKillingLineVisibility(),this.setDisplayedScore(this._displayedScore,0,!0),this.setGameVisibility(!0),this._touchStarted=!1,this._cloud.set_y(Math.round(100+Math.random()*(u.NATIVE_HEIGHT-100))),this._cloud.set_x(1.1*-this._cloud.get_width())},setGameVisibility:function(t){this._pauseButtonView.spatial.set_cullingMode(t?ps.CullDynamic:ps.CullAlways),this._shootingArmView.spatial.set_cullingMode(t?ps.CullDynamic:ps.CullAlways),this._aimView.spatial.set_cullingMode(t?ps.CullDynamic:ps.CullAlways),this._killingLineView.spatial.set_cullingMode(t?ps.CullDynamic:ps.CullAlways),this._groupUpcomingBubbles.spatial.set_cullingMode(t?ps.CullDynamic:ps.CullAlways),this._groupScore.spatial.set_cullingMode(t?ps.CullDynamic:ps.CullAlways)},onTick:function(t){this._logic.tick(t);var e=this._cloud;e.set_x(e.mX+.25),this._cloud.mX>1.1*u.NATIVE_WIDTH&&(this._cloud.set_y(Math.round(100+Math.random()*(u.NATIVE_HEIGHT-200))),this._cloud.set_frame(.5>Math.random()?"cloud_right":"cloud_left"),this._cloud.set_x(1.1*-this._cloud.get_width())),Is.tick(this.container,t)},onDraw:function(t){a.prototype.onDraw.call(this,t),this.container.applyChanges(),this.container.spatial.updateGeometricState(0)},createBubbleView:function(t){var e=new h(t);this._groupBubbles.addChild(e);var i=e.get_size();return e.set_x(t._posX*i),e.set_y(t._posY*i),e.set_size(2*t.radius*this._gameWidth*u.VISUAL_BUBBLE_RADIUS_SCALE),e.bakeDownScale(),e.centerPivot(),e.centerOrigin(),e},removeBubbleVo:function(t){t.view.free()},removeAllBubbleVos:function(){for(var t=[],e=0,i=this._groupBubbles.node.numChildren;i>e;){var s=e++,s=this._groupBubbles.getChildAt(s);Us.__instanceof(s,h)&&t.push(s)}for(e=0;e<t.length;)i=t[e],++e,i.free()},burstBubble:function(t,e,i){0==e.enabled&&(U.playSound(z.Burst),t%u.BONUS_SOUND_EVERY_BUBBLE==u.BONUS_SOUND_EVERY_BUBBLE-1&&U.playSound(z.Bonus),i.playBurstAnimation(),e.freeFloat||(t=this._logic.getBubbleBurstPoints(t),e=0==this._pointsViewPool.length?new x(t,this._pointsViewPool):this._pointsViewPool.pop(),e.setPoints(t),e.set_x(i.mX+this._groupBubbles.mX),e.set_y(i.mY+this._groupBubbles.mY),this.container.addChild(e),e.animate()))},updateBubble:function(t,e,i){var s=this,n=t.view;if(null==n){if(0!=e)return;n=this.createBubbleView(t)}else(0==e||6==e)&&(this.removeBubbleVo(t),n=this.createBubbleView(t));switch(e){case 9:case 8:var a=i.index;new ce(function(){s.burstBubble(a,t,n)},9==e?u.BUBBLE_BURST_INITIAL_DELAY+a*u.BUBBLE_BURST_PER_BUBBLE_DELAY:u.BUBBLE_DROP_INITIAL_DELAY+a*u.BUBBLE_DROP_PER_BUBBLE_DELAY);break;case 1:break;case 0:n.spatial.set_cullingMode(ps.CullDynamic),n.set_x(t._posX*this._gameWidth),n.set_y(t._posY*this._gameWidth),n.playAppearAnimation();break;case 4:case 2:t.freeFloat?(n.set_x(t._posX*this._gameWidth),n.set_y(t._posY*this._gameWidth)):(n.tween(As.X,t._posX*this._gameWidth,u.POSITION_CHANGE_TWEEN_DURATION),n.tween(As.Y,t._posY*this._gameWidth,u.POSITION_CHANGE_TWEEN_DURATION));break;case 3:U.playSound(z.Shoot),n.playIdleAnimation();break;case 5:U.playSound(z.Bounce);break;case 7:e=i.distance;var r=i.dirX,o=i.dirY,r=t._posX+u.BUBBLE_TOUCH_MAX_BOUNCE_AMOUNT*Us.__cast(i.amount,Ws)*t.radius*r/Math.pow(1+Us.__cast(i.distance,Hs),u.BUBBLE_TOUCH_DISTANCE_FALLOFF);i=t._posY+u.BUBBLE_TOUCH_MAX_BOUNCE_AMOUNT*Us.__cast(i.amount,Ws)*t.radius*o/Math.pow(1+Us.__cast(i.distance,Hs),u.BUBBLE_TOUCH_DISTANCE_FALLOFF);var o=u.BUBBLE_TOUCH_BOUNCE_IN_TIME*(1+e),_=u.BUBBLE_TOUCH_BOUNCE_OUT_TIME*(1+e);n.tween(As.X,r*this._gameWidth,o,null,function(){n.tween(As.X,t._posX*s._gameWidth,_)}),n.tween(As.Y,i*this._gameWidth,o,null,function(){n.tween(As.Y,t._posY*s._gameWidth,_)});break;case 6:e=i.fromX,i=i.fromY,n.spatial.set_cullingMode(ps.CullDynamic),n.set_x(e*this._gameWidth),n.set_y(i*this._gameWidth),n.tween(As.X,t._posX*this._gameWidth,u.BUBBLE_SNAP_TWEEN_DURATION),n.tween(As.Y,t._posY*this._gameWidth,u.BUBBLE_SNAP_TWEEN_DURATION),n.playSnapAnimation(),U.playSound(z.Snap);break;default:throw""+e}},updateUpcomingBubbles:function(t,e){var i=this._groupUpcomingBubbles.getChildAt(0);i.set_frame(-1!=t?this.getBubbleFrameId(t):"bubble_empty");for(var i=0,s=u.NUM_BOTTOM_BUBBLES;s>i;){var n=i++,a=this._groupUpcomingBubbles.getChildAt(n);e>n?(a.spatial.set_cullingMode(ps.CullDynamic),!0):(a.spatial.set_cullingMode(ps.CullAlways),!1)}},getBubbleFrameId:function(t){switch(t){case 0:return null;case 1:return"bubble1";case 2:return"bubble2";case 3:return"bubble3";case 4:return"bubble4";case 5:return"bubble5";case 6:return"bubble6";default:throw""+t}},initShootingArm:function(){this._logic.setShootingArmRow(((.8*u.NATIVE_HEIGHT-this._groupBubbles.mY)/this._gameWidth-.5*this._logic._bubbleDiameterPlusSpacing)/(.866*this._logic._bubbleDiameterPlusSpacing)+1),this.setShootingArm(0)},setShootingArm:function(t){this._shootingArmView.set_x(this._groupBubbles.mX+this._gameWidth/2),this._shootingArmView.set_y(this._groupBubbles.mY+this._logic.get_shootingArmY()*this._gameWidth),this._shootingArmView.set_rotation(t),this._shootingArmView.applyChanges(),this._logic._shootingArmAngle=t},updateKillingLineVisibility:function(){var t=!1;this._logic._freeRows<=this._logic._numRowsToInsert+u.MIN_FREE_ROWS_FOR_KILLING_LINE&&(t=!0),this._killingLineVisible!=t&&(t?(this._killingLineView.set_alpha(0),this._killingLineView.tween(As.Alpha,.5,1),this._killingLineVisible=!0):(this._killingLineView.tween(As.Alpha,0,1),this._killingLineVisible=!1))},setDisplayedScore:function(t,e,i){null==i&&(i=!1),null==e&&(e=0),this._displayedScore=t,t>9999999&&(t=9999999);var s=(null==t?"null":""+t).split("");s.reverse(),t=X.parseInt(s[0]);var n;n=1<s.length?X.parseInt(s[1]):0;var a;a=2<s.length?X.parseInt(s[2]):0;var r;r=3<s.length?X.parseInt(s[3]):0;var o;o=4<s.length?X.parseInt(s[4]):0;var _;_=5<s.length?X.parseInt(s[5]):0,s=6<s.length?X.parseInt(s[6]):0,this._timeUntilNextScoreUpdate=u.SCORE_UPDATE_INITIAL_DELAY+u.BUBBLE_BURST_INITIAL_DELAY+e*u.BUBBLE_BURST_PER_BUBBLE_DELAY,e=this._groupScore.getChildren([]),this.updateScoreDigit(e[0],t,i?0:this._timeUntilNextScoreUpdate+0*u.SCORE_UPDATE_PER_DIGIT_DELAY),this.updateScoreDigit(e[1],n,i?0:this._timeUntilNextScoreUpdate+u.SCORE_UPDATE_PER_DIGIT_DELAY),this.updateScoreDigit(e[2],a,i?0:this._timeUntilNextScoreUpdate+2*u.SCORE_UPDATE_PER_DIGIT_DELAY),this.updateScoreDigit(e[3],r,i?0:this._timeUntilNextScoreUpdate+3*u.SCORE_UPDATE_PER_DIGIT_DELAY),this.updateScoreDigit(e[4],o,i?0:this._timeUntilNextScoreUpdate+4*u.SCORE_UPDATE_PER_DIGIT_DELAY),this.updateScoreDigit(e[5],_,i?0:this._timeUntilNextScoreUpdate+5*u.SCORE_UPDATE_PER_DIGIT_DELAY),this.updateScoreDigit(e[6],s,i?0:this._timeUntilNextScoreUpdate+6*u.SCORE_UPDATE_PER_DIGIT_DELAY)},updateScoreDigit:function(t,e,i){var s=function(){t.set_frame(function(t){switch(e){case 0:t="score_digit_0";break;case 1:t="score_digit_1";break;case 2:t="score_digit_2";break;case 3:t="score_digit_3";break;case 4:t="score_digit_4";break;case 5:t="score_digit_5";break;case 6:t="score_digit_6";break;case 7:t="score_digit_7";break;case 8:t="score_digit_8";break;case 9:t="score_digit_9";break;default:t=null}return t}(this)),t.mScaleY=.1,t.mFlags|=1,t.tween(As.ScaleY,1,u.SCORE_UPDATE_TWEEN_TIME)};i>0?new ce(s,i):s()},processGameStart:function(){this._groupUpcomingBubbles.getChildAt(0).set_visible(!0),this.setDisplayedScore(this._logic._score,0,!0)},processGameOver:function(){var t,e=this;4==this._logic._status?(U.playSound(z.GameOverSuccess),t=this._timeUntilNextScoreUpdate):(U.playSound(z.GameOverFailure),t=1),this.setGameVisibility(!1),new ce(function(){e._app.gameOver()},t+u.DEFAULT_SCREEN_FADE_OUT_TIME)},handleMessages:function(t,e,i){switch(t){case 11:this.processGameStart();break;case 12:this.processGameOver();break;case 13:this.removeAllBubbleVos();break;case 16:this.setDisplayedScore(Us.__cast(e.score,Hs),Us.__cast(e.numBursted,Hs));break;case 14:U.playSound(z.NewRow);break;case 17:this.updateUpcomingBubbles(Us.__cast(e.upcoming,Hs),Us.__cast(e.left,Hs)),this.updateKillingLineVisibility();break;case 9:case 8:case 1:case 0:case 2:case 4:case 3:case 5:case 6:case 7:this.updateBubble(i,t,e);break;default:throw""+t}},focusAimingDot:function(){if(2==this._logic._status){var t=u.AIM_DOT_BASE_SIZE*this._gameWidth;this._aimView.set_scale(t),this._aimView.tween(As.Scale,.75*t,.5),this._aimView.set_alpha(0),this._aimView.tween(As.Alpha,1,.5)}},adjustCannonToMousePosition:function(t,e){if(2==this._logic._status){var i=1.2*(t-this._shootingArmView.mX),s=Math.min(-.015*this._gameWidth,e-this._shootingArmView.mY-.2*this._gameWidth);i>.5*this._gameWidth&&(i=.5*this._gameWidth),i<-.5*this._gameWidth&&(i=-.5*this._gameWidth);var n=-1*Math.atan(i/s)*(180/Math.PI);this.setShootingArm(n),this._shootingArmView._state=1,this._aimView.set_x(this._shootingArmView.mX+i),this._aimView.set_y(this._shootingArmView.mY+s)}},shootCannonFromPosition:function(){if(2==this._logic._status){var t=u.AIM_DOT_BASE_SIZE*this._gameWidth;this._shootingArmView._state=2,this._aimView.tween(As.Scale,.5*t,.3),this._aimView.tween(As.Alpha,0,.3),this._logic.shoot()}},onTouchStart:function(t,e){var i=this._pauseButtonView.localBox(this._scratchAABB);t>=i.minX&&t<=i.maxX&&e>=i.minY&&e<=i.maxY?(U.playSound(z.Tap),this._app.pauseGame()):(this._touchStarted=!0,this.focusAimingDot(),this.onTouchMove(t,e))},onTouchMove:function(t,e){this.adjustCannonToMousePosition(t,e)},onTouchEnd:function(t,e){this._touchStarted&&(this._touchStarted=!1,this.shootCannonFromPosition(t,e))},__class__:k});var N=function(t){a.call(this,t)};N.__name__=["ScreenGameOver"],N.__super__=a,N.prototype=e(a.prototype,{onShow:function(){var t=this._app.gameResult;this.createTitle(p.get(t.gameWon?"results_game_won":"results_game_lost"));var e=Math.floor(t.time),i=Math.floor(e/3600),e=e-3600*i,s=Math.floor(e/60),e=e-60*s,e=(i>0?i+":":"")+(10>s?"0":"")+s+":"+(10>e?"0":"")+e;t.newHighscore&&this.createTextLine(new xi(0,183,u.NATIVE_WIDTH,243),window.famobi.__("results_new_highscore"),40,"spritefont_d"),this.createTextLine(new xi(0,213,u.NATIVE_WIDTH,373),ne.groupDigits(t.score,window.famobi.__("thousands_separator")),80,"spritefont_b",0),this.createTextLine(new xi(54,406,464,466),window.famobi.__("results_bubbles_cleared"),40,"spritefont_b",-1,.5),this.createTextLine(new xi(54,466,464,526),window.famobi.__("results_balls_shot"),40,"spritefont_b",-1,.5),this.createTextLine(new xi(54,526,464,586),window.famobi.__("results_hit_ratio"),40,"spritefont_b",-1,.5),this.createTextLine(new xi(54,586,464,646),window.famobi.__("results_largest_group"),40,"spritefont_b",-1,.5),this.createTextLine(new xi(54,646,464,706),window.famobi.__("results_play_time"),40,"spritefont_b",-1,.5),this.createTextLine(new xi(382,406,582,464),null==t.numBubblesCleared?"null":""+t.numBubblesCleared,40,"spritefont_b",1),this.createTextLine(new xi(382,466,582,524),null==t.numBallsShot?"null":""+t.numBallsShot,40,"spritefont_b",1),this.createTextLine(new xi(382,526,582,584),(null==t.hitRatioPercent?"null":""+t.hitRatioPercent)+"%",40,"spritefont_b",1),this.createTextLine(new xi(382,586,582,644),null==t.largestGroup?"null":""+t.largestGroup,40,"spritefont_b",1),this.createTextLine(new xi(382,646,582,704),e,40,"spritefont_b",1),t=this.createSprite("button_continue","texture0","button_default",36,772),this.createTextLine(t.localBox(),window.famobi.__("continue"),60,"spritefont_a")},onHide:function(){a.prototype.onHide.call(this),this.container.freeChildren()},onTouchStart:function(t,e){this.hitTest(this.container.getChildByName("button_continue"),t,e)&&(U.playSound(z.Tap),this._app.showMainMenu())},__class__:N});var L=function(t){a.call(this,t)};L.__name__=["ScreenHighscores"],L.__super__=a,L.prototype=e(a.prototype,{onShow:function(){this.createTitle(window.famobi.__("highscores_title"));for(var t=this._app.highScoreTable,e=228,i=1;7>i;){var s=i++;this.createTextLine(new xi(56,e,146,e+58),""+s,40,"spritefont_b",-1),this.createTextLine(new xi(156,e,401,e+58),B.field(t[s-1],"name"),40,"spritefont_b",-1,.5),this.createTextLine(new xi(403,e,583,e+58),ne.groupDigits(B.field(t[s-1],"score"),window.famobi.__("thousands_separator")),40,"spritefont_b",1),e+=90}this.createSprite("button_back","texture0","button_back",37,806)},onHide:function(){this.container.freeChildren()},onTouchStart:function(t,e){this.hitTest(this.container.getChildByName("button_back"),t,e)&&(U.playSound(z.Tap),this._app.showMainMenu())},__class__:L});var O=function(t){a.call(this,t),this.createSprite("bubbles","texture0","title_bubbles",160,266),this.createSprite("logo","texture0","game_logo",55,20),t=this.createSprite("button_start","texture0","button_default",25,467),this.createTextLine(t.localBox(),window.famobi.__("main_menu_play"),60,"spritefont_a"),t=this.createSprite("more_games","texture2",null,160,630),t.mScaleX=t.mScaleY=.5,t.mFlags|=1,t=this.createSprite("button_statistics","texture0","button_statistics",0,790),t.set_x((u.NATIVE_WIDTH-t.get_width())/2-10),t.applyChanges(),t=t.localBox().clone(),t.minX+=25,t.maxX+=25,this.createTextLine(t,window.famobi.__("main_menu_statistics"),30,"spritefont_e",0,40),t=this.createSprite("legal_notes","texture0","legal_note",0,900),t.set_x((u.NATIVE_WIDTH-t.get_width())/2-10)};O.__name__=["ScreenMainMenu"],O.__super__=a,O.prototype=e(a.prototype,{onTouchStart:function(t,e){this.hitTest(this.container.getChildByName("button_start"),t,e)?(U.playSound(z.Tap),this._app.startGame()):this.hitTest(this.container.getChildByName("more_games"),t,e)?window.open(u.MORE_GAMES_URL,"_self"):this.hitTest(this.container.getChildByName("button_statistics"),t,e)&&(U.playSound(z.Tap),this._app.showStatistics())},__class__:O});var M=function(t){a.call(this,t),this.createTitle(window.famobi.__("paused")),t=this.createSprite("resume_button","texture0","button_default",36,261),this.createTextLine(t.localBox(),window.famobi.__("resume"),60,"spritefont_a"),t=this.createSprite("restart_button","texture0","button_default",36,415),this.createTextLine(t.localBox(),window.famobi.__("restart"),60,"spritefont_a"),t=this.createSprite("main_menu_button","texture0","button_default",36,569),this.createTextLine(t.localBox(),window.famobi.__("main_menu"),60,"spritefont_a"),U.soundSupported&&this.createSprite("sound_button","texture0","button_audio",278,728,this.container)};M.__name__=["ScreenPause"],M.__super__=a,M.prototype=e(a.prototype,{onShow:function(){U.soundSupported&&this.container.getChildByName("sound_button").set_alpha(U.soundMute?.5:1)},onTouchStart:function(t,e){this.hitTest(this.container.getChildByName("resume_button"),t,e)?(U.playSound(z.Tap),this._app.resumeGame()):this.hitTest(this.container.getChildByName("restart_button"),t,e)?(U.playSound(z.Tap),this._app.confirmRestart()):this.hitTest(this.container.getChildByName("main_menu_button"),t,e)?(U.playSound(z.Tap),this._app.confirmAbort()):this.hitTest(this.container.getChildByName("sound_button"),t,e)&&(U.soundMute=!U.soundMute,this.container.getChildByName("sound_button").set_alpha(U.soundMute?.5:1),U.soundMute||U.playSound(z.Tap),this._app.saveGame.writeSoundMute())
},__class__:M});var P=function(t){a.call(this,t)};P.__name__=["ScreenStatistics"],P.__super__=a,P.prototype=e(a.prototype,{onShow:function(){var t=this._app.statistics;for(this.createTitle(window.famobi.__("statistics_title")),this.createTextLine(new xi(53,208,463,266),window.famobi.__("statistics_bubbles_cleared"),40,"spritefont_b",-1,.5),this.createTextLine(new xi(53,268,463,326),window.famobi.__("statistics_games_played"),40,"spritefont_b",-1,.5),this.createTextLine(new xi(53,328,463,386),window.famobi.__("statistics_games_won"),40,"spritefont_b",-1,.5),this.createTextLine(new xi(53,388,463,446),window.famobi.__("statistics_fewest_balls"),40,"spritefont_b",-1,.5),this.createTextLine(new xi(53,448,463,506),window.famobi.__("statistics_play_time"),40,"spritefont_b",-1,.5),this.createTextLine(new xi(382,208,582,266),null==t.numBubblesCleared?"null":""+t.numBubblesCleared,40,"spritefont_b",1),this.createTextLine(new xi(382,268,582,326),null==t.numGamesPlayed?"null":""+t.numGamesPlayed,40,"spritefont_b",1),this.createTextLine(new xi(382,328,582,386),null==t.numGamesWon?"null":""+t.numGamesWon,40,"spritefont_b",1),this.createTextLine(new xi(382,388,582,446),-1==t.numFewestShots?"-":null==t.numFewestShots?"null":""+t.numFewestShots,40,"spritefont_b",1),this.createTextLine(new xi(382,448,582,506),ne.toMMSS(t.timePlayed),40,"spritefont_b",1),this.createSprite("bubble_yellow","texture1","bubble3",56,564),this.createSprite("bubble_blue","texture1","bubble1",56,623),this.createSprite("bubble_green","texture1","bubble2",56,683),this.createSprite("bubble_red","texture1","bubble6",406,564),this.createSprite("bubble_turquoise","texture1","bubble4",406,623),this.createSprite("bubble_purple","texture1","bubble5",406,683),this.createTextLine(new xi(128,544,274,602),null==t.numYellowBubblesCleared?"null":""+t.numYellowBubblesCleared,40,"spritefont_b",-1),this.createTextLine(new xi(128,603,274,661),null==t.numBlueBubblesCleared?"null":""+t.numBlueBubblesCleared,40,"spritefont_b",-1),this.createTextLine(new xi(128,663,274,721),null==t.numGreenBubblesCleared?"null":""+t.numGreenBubblesCleared,40,"spritefont_b",-1),this.createTextLine(new xi(480,544,626,602),null==t.numRedBubblesCleared?"null":""+t.numRedBubblesCleared,40,"spritefont_b",-1),this.createTextLine(new xi(480,603,626,661),null==t.numTurquoiseBubblesCleared?"null":""+t.numTurquoiseBubblesCleared,40,"spritefont_b",-1),this.createTextLine(new xi(480,663,626,721),null==t.numPurpleBubblesCleared?"null":""+t.numPurpleBubblesCleared,40,"spritefont_b",-1),t=this.container.iterator();t.hasNext();){var e=t.next();new c("bubble_","").match(e.spatial.name)&&e.set_size(50)}this.createSprite("button_back","texture0","button_back",37,806)},onHide:function(){this.container.freeChildren()},onTouchStart:function(t,e){this.hitTest(this.container.getChildByName("button_back"),t,e)&&this._app.showMainMenu()},__class__:P});var F=function(){l.call(this),this.setTexture("texture1","shooting_arm"),this._alpha=this._state=0};F.__name__=["ShootingArmView"],F.__super__=l,F.prototype=e(l.prototype,{fadeIn:function(){this._state=1},fadeOut:function(){this._state=2},tick:function(t){switch(l.prototype.tick.call(this,t),this._state){case 1:this._alpha+=.1;break;case 2:this._alpha-=.1}this._alpha=oe.fclamp(this._alpha,0,1),this.set_alpha(this._alpha)},__class__:F});var D=t.Smarty=function(){};D.__name__=["Smarty"],D.run=function(){v.main()};var R={__ename__:!0,__constructs__:["Ogg","Wav"],Ogg:["Ogg",0]};R.Ogg.toString=n,R.Ogg.__enum__=R,R.Wav=["Wav",1],R.Wav.toString=n,R.Wav.__enum__=R;var z={__ename__:!0,__constructs__:"Bonus Bounce Burst GameOverFailure GameOverSuccess NewRow Shoot Snap Start Tap".split(" "),Bonus:["Bonus",0]};z.Bonus.toString=n,z.Bonus.__enum__=z,z.Bounce=["Bounce",1],z.Bounce.toString=n,z.Bounce.__enum__=z,z.Burst=["Burst",2],z.Burst.toString=n,z.Burst.__enum__=z,z.GameOverFailure=["GameOverFailure",3],z.GameOverFailure.toString=n,z.GameOverFailure.__enum__=z,z.GameOverSuccess=["GameOverSuccess",4],z.GameOverSuccess.toString=n,z.GameOverSuccess.__enum__=z,z.NewRow=["NewRow",5],z.NewRow.toString=n,z.NewRow.__enum__=z,z.Shoot=["Shoot",6],z.Shoot.toString=n,z.Shoot.__enum__=z,z.Snap=["Snap",7],z.Snap.toString=n,z.Snap.__enum__=z,z.Start=["Start",8],z.Start.toString=n,z.Start.__enum__=z,z.Tap=["Tap",9],z.Tap.toString=n,z.Tap.__enum__=z;var U=function(){};U.__name__=["SoundManager"],U.playSound=function(t){if(null!=U.format&&0!=U.soundSupported&&!U.soundMute){var e;switch(U.format[1]){case 0:switch(t[1]){case 0:e="res/sounds/ogg/bonus.ogg";break;case 1:e="res/sounds/ogg/bounce.ogg";break;case 2:e="res/sounds/ogg/burst.ogg";break;case 3:e="res/sounds/ogg/game_over_failure.ogg";break;case 4:e="res/sounds/ogg/game_over_success.ogg";break;case 5:e="res/sounds/ogg/new_row.ogg";break;case 6:e="res/sounds/ogg/shoot.ogg";break;case 7:e="res/sounds/ogg/snap.ogg";break;case 8:e="res/sounds/ogg/start.ogg";break;case 9:e="res/sounds/ogg/tap.ogg"}break;case 1:switch(t[1]){case 0:e="res/sounds/wav/bonus.wav";break;case 1:e="res/sounds/wav/bounce.wav";break;case 2:e="res/sounds/wav/burst.wav";break;case 3:e="res/sounds/wav/game_over_failure.wav";break;case 4:e="res/sounds/wav/game_over_success.wav";break;case 5:e="res/sounds/wav/new_row.wav";break;case 6:e="res/sounds/wav/shoot.wav";break;case 7:e="res/sounds/wav/snap.wav";break;case 8:e="res/sounds/wav/start.wav";break;case 9:e="res/sounds/wav/tap.wav"}}Oi.soundAssetExists(e)&&Oi.play(e)}};var X=function(){};X.__name__=["Std"],X.string=function(t){return Us.__string_rec(t,"")},X["int"]=function(t){return 0|t},X.parseInt=function(t){var e=parseInt(t,10);return 0!=e||120!=d.cca(t,1)&&88!=d.cca(t,1)||(e=parseInt(t)),isNaN(e)?null:e},X.parseFloat=function(t){return parseFloat(t)};var Y=function(){this.b=""};Y.__name__=["StringBuf"],Y.prototype={add:function(t){this.b+=X.string(t)},addSub:function(t,e,i){this.b=null==i?this.b+d.substr(t,e,null):this.b+d.substr(t,e,i)},__class__:Y};var V=function(){};V.__name__=["StringTools"],V.fastCodeAt=function(t,e){return t.charCodeAt(e)};var H=function(){};H.__name__=["Type"],H.getClass=function(t){return null==t?null:Us.getClass(t)},H.getClassName=function(t){return t=t.__name__,null==t?null:t.join(".")},H.createInstance=function(t,e){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);case 8:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);default:throw""}},H.createEnum=function(t,e,i){var s=B.field(t,e);if(null==s)throw""+e;if(B.isFunction(s)){if(null==i)throw""+e+" need parameters";return s.apply(t,i)}if(null!=i&&0!=i.length)throw""+e+" does not need parameters";return s},H.createEnumIndex=function(t,e,i){var s=t.__constructs__[e];if(null==s)throw e+" is not a valid enum constructor index";return H.createEnum(t,s,i)},H.getEnumConstructs=function(t){return t.__constructs__.slice()},H.enumEq=function(t,e){if(t==e)return!0;try{if(t[0]!=e[0])return!1;for(var i=2,s=t.length;s>i;){var n=i++;if(!H.enumEq(t[n],e[n]))return!1}var a=t.__enum__;if(a!=e.__enum__||null==a)return!1}catch(r){return!1}return!0};var G=function(t,e){this.x=t,this.y=e};G.__name__=["Vec"],G.prototype={__class__:G};var W=function(){};W.__name__=["Xml"],W.parse=function(t){return zs.parse(t)},W.createElement=function(t){var e=new W;return e.nodeType=W.Element,e._children=[],e._attributes=new Bi,e.set_nodeName(t),e},W.createPCData=function(t){var e=new W;return e.nodeType=W.PCData,e.set_nodeValue(t),e},W.createCData=function(t){var e=new W;return e.nodeType=W.CData,e.set_nodeValue(t),e},W.createComment=function(t){var e=new W;return e.nodeType=W.Comment,e.set_nodeValue(t),e},W.createDocType=function(t){var e=new W;return e.nodeType=W.DocType,e.set_nodeValue(t),e},W.createProcessingInstruction=function(t){var e=new W;return e.nodeType=W.ProcessingInstruction,e.set_nodeValue(t),e},W.createDocument=function(){var t=new W;return t.nodeType=W.Document,t._children=[],t},W.prototype={get_nodeName:function(){if(this.nodeType!=W.Element)throw"";return this._nodeName},set_nodeName:function(t){if(this.nodeType!=W.Element)throw"";return this._nodeName=t},set_nodeValue:function(t){if(this.nodeType==W.Element||this.nodeType==W.Document)throw"";return this._nodeValue=t},get:function(t){if(this.nodeType!=W.Element)throw"";return this._attributes.get(t)},set:function(t,e){if(this.nodeType!=W.Element)throw"";this._attributes.set(t,e)},exists:function(t){if(this.nodeType!=W.Element)throw"";return this._attributes.exists(t)},elementsNamed:function(t){if(null==this._children)throw"";return{cur:0,x:this._children,hasNext:function(){for(var e=this.cur,i=this.x.length;i>e;){var s=this.x[e];if(s.nodeType==W.Element&&s._nodeName==t)break;e++}return this.cur=e,i>e},next:function(){for(var e=this.cur,i=this.x.length;i>e;){var s=this.x[e];if(e++,s.nodeType==W.Element&&s._nodeName==t)return this.cur=e,s}return null}}},firstElement:function(){if(null==this._children)throw"";for(var t=0,e=this._children.length;e>t;){var i=this._children[t];if(i.nodeType==W.Element)return i;t++}return null},addChild:function(t){if(null==this._children)throw"";null!=t._parent&&d.remove(t._parent._children,t),t._parent=this,this._children.push(t)},__class__:W};var j=function(){};j.__name__=["de","polygonal","Printf"],j.init=function(){j.dataTypeMap=j.makeDataTypeMap(),j.formatIntFuncHash=new Ls,j.formatIntFuncHash.set(1,j.formatSignedDecimal),j.formatIntFuncHash.set(2,j.formatUnsignedDecimal),j.formatIntFuncHash.set(0,j.formatCharacter),j.formatIntFuncHash.set(4,j.formatHexadecimal),j.formatIntFuncHash.set(3,j.formatOctal),j.formatIntFuncHash.set(5,j.formatBinary),j.formatFloatFuncHash=new Ls,j.formatFloatFuncHash.set(0,j.formatNormalFloat),j.formatFloatFuncHash.set(1,j.formatScientific),j.formatFloatFuncHash.set(2,j.formatNaturalFloat),j.formatStringFuncHash=new Ls,j.formatStringFuncHash.set(2,j.formatString)},j.makeDataTypeMap=function(){var t=new Ls;return t.set(105,Q.FmtInteger(J.ISignedDecimal)),t.set(100,Q.FmtInteger(J.ISignedDecimal)),t.set(117,Q.FmtInteger(J.IUnsignedDecimal)),t.set(99,Q.FmtInteger(J.ICharacter)),t.set(120,Q.FmtInteger(J.IHex)),t.set(88,Q.FmtInteger(J.IHex)),t.set(111,Q.FmtInteger(J.IOctal)),t.set(98,Q.FmtInteger(J.IBin)),t.set(102,Q.FmtFloat(K.FNormal)),t.set(101,Q.FmtFloat(K.FScientific)),t.set(69,Q.FmtFloat(K.FScientific)),t.set(103,Q.FmtFloat(K.FNatural)),t.set(71,Q.FmtFloat(K.FNatural)),t.set(115,Q.FmtString),t.set(112,Q.FmtPointer),t.set(110,Q.FmtNothing),t},j.format=function(t,e){j._initialized||(j._initialized=!0,j.init());for(var i=0,s=e.length;s>i;){var n=i++;null==e[n]&&(e[n]="null")}for(var i="",s=0,n=j.tokenize(t),a=0;a<n.length;){var r=n[a];switch(++a,r[1]){case 3:throw"";case 0:i+=r[2];break;case 2:var o=r[2];if(!Object.prototype.hasOwnProperty.call(e[0],o))throw""+o;i+=X.string(B.field(e[0],o));break;case 1:o=r[3],r=r[2],o.width=null!=o.width?o.width:Us.__cast(e[s++],Hs),o.precision=null!=o.precision?o.precision:Us.__cast(e[s++],Hs);var _,l=e[s++];switch(r[1]){case 1:_=j.formatFloatFuncHash.get(r[2][1]);break;case 0:_=j.formatIntFuncHash.get(r[2][1]);break;case 2:_=j.formatStringFuncHash.get(2);break;case 3:throw"";case 4:throw""}i+=_(l,o)}}return i},j.tokenize=function(t){for(var e=t.length,i=new Y,s=0,n=[];e>s;){var a=j.codeAt(t,s++);if(37==a)if(a=j.codeAt(t,s++),37==a)i.b+=String.fromCharCode(a);else{if(0<i.b.length&&(n.push(Z.BareString(i.b)),i=new Y),40==a)if(a=t.indexOf(")",s),-1==a)a=Z.Unknown("named param",s);else var r=d.substr(t,s,a-s),s=a+1,a=Z.Property(r);else{for(r={flags:0,pos:-1,width:-1,precision:-1};45==a||43==a||35==a||48==a||32==a;)45==a?r.flags|=1<<q.Minus[1]:43==a?r.flags|=1<<q.Plus[1]:35==a?r.flags|=1<<q.Sharp[1]:48==a?r.flags|=1<<q.Zero[1]:32==a&&(r.flags|=1<<q.Space[1]),a=j.codeAt(t,s++);if(0!=(r.flags&1<<q.Minus[1])&&0!=(r.flags&1<<q.Zero[1])&&(r.flags&=268435455-(1<<q.Zero[1])),0!=(r.flags&1<<q.Space[1])&&0!=(r.flags&1<<q.Plus[1])&&(r.flags&=268435455-(1<<q.Space[1])),42==a)r.width=null,a=j.codeAt(t,s++);else if(a>=48&&57>=a){for(r.width=0;a>=48&&57>=a;)r.width=a-48+10*r.width,a=j.codeAt(t,s++);if(36==a)if(r.pos=r.width-1,r.width=-1,a=j.codeAt(t,s++),42==a)r.width=null,a=j.codeAt(t,s++);else if(a>=48&&57>=a)for(r.width=0;a>=48&&57>=a;)r.width=a-48+10*r.width,a=j.codeAt(t,s++)}if(46==a)if(a=j.codeAt(t,s++),42==a)r.precision=null,a=j.codeAt(t,s++);else if(a>=48&&57>=a)for(r.precision=0;a>=48&&57>=a;)r.precision=a-48+10*r.precision,a=j.codeAt(t,s++);else r.precision=0;for(;104==a||108==a||76==a;){switch(a){case 104:r.flags|=1<<q.LengthH[1];break;case 108:r.flags|=1<<q.Lengthl[1];break;case 76:r.flags|=1<<q.LengthL[1]}a=j.codeAt(t,s++)}(69==a||71==a||88==a)&&(r.flags|=1<<q.UpperCase[1]);var o=j.dataTypeMap.get(a),a=null==o?Z.Unknown(String.fromCharCode(a),s):Z.Tag(o,r)}n.push(a)}else i.b+=String.fromCharCode(a)}return 0<i.b.length&&n.push(Z.BareString(i.b)),n},j.formatBinary=function(t,e){var i="",s=e.flags,n=e.precision,a=e.width;if(-1==n&&(n=1),0!=t){0!=(s&1<<q.LengthH[1])&&(t&=65535);var r=t;do i=((1&r)>0?"1":"0")+i,r>>>=1;while(r>0);n>1&&(n>i.length&&(i=j.lpad(i,"0",n)),0!=(s&1<<q.Sharp[1])&&(i="b"+i))}return 0!=(s&1<<q.Minus[1])?a>i.length?j.rpad(i," ",a):i:a>i.length?j.lpad(i,0!=(s&1<<q.Zero[1])?"0":" ",a):i},j.formatOctal=function(t,e){var i="",s=e.flags,n=e.precision,a=e.width;return-1==n&&(n=1),0!=t&&(0!=(s&1<<q.LengthH[1])&&(t&=65535),i=j.toOct(t),0!=(s&1<<q.Sharp[1])&&(i="0"+i),n>1&&i.length<n&&(i=j.lpad(i,"0",n))),0!=(s&1<<q.Minus[1])?a>i.length?j.rpad(i," ",a):i:a>i.length?j.lpad(i,0!=(s&1<<q.Zero[1])?"0":" ",a):i},j.formatHexadecimal=function(t,e){var i="",s=e.flags,n=e.precision,a=e.width;return-1==n&&(n=1),0!=t&&(0!=(s&1<<q.LengthH[1])&&(t&=65535),i=j.toHex(t),n>1&&i.length<n&&(i=j.lpad(i,"0",n)),0!=(s&1<<q.Sharp[1])&&0!=t&&(i="0x"+i),i=0!=(s&1<<q.UpperCase[1])?i.toUpperCase():i.toLowerCase()),0!=(s&1<<q.Minus[1])?a>i.length?j.rpad(i," ",a):i:a>i.length?j.lpad(i,0!=(s&1<<q.Zero[1])?"0":" ",a):i},j.formatUnsignedDecimal=function(t,e){var i,s=e.precision;return t>=0?i=j.formatSignedDecimal(t,e):(i=new ks(0,t).toString(),s>1&&i.length<s&&(i=j.lpad(i,"0",s)),i=j.padNumber(i,t,e.flags,e.width)),i},j.formatNaturalFloat=function(t,e){e.precision=0;var i=j.formatNormalFloat(t,e),s=j.formatScientific(t,e);if(0!=(e.flags&1<<q.Sharp[1])&&-1!=i.indexOf(".")){for(var n=i.length-1;48==i.charCodeAt(n);)n--;i=d.substr(i,0,n)}return i.length<=s.length?i:s},j.formatScientific=function(t,e){var i="",s=e.flags,n=e.precision;-1==n&&(n=6);var a,r;if(0==t){if(r=a=0,i+="0",n>0)for(var i=i+".",o=0;n>o;)o++,i+="0"}else a=t>0?1:0>t?-1:0,t=Math.abs(t),r=Math.floor(Math.log(t)/2.302585092994046),t/=Math.pow(10,r),o=Math.pow(.1,n),t=Math.round(t/o)*o;return i=0>a?i+"-":0!=(s&1<<q.Plus[1])?i+"+":i+"",0!=t&&(i+=j.rpad(function(e){return e=j.str(t),d.substr(e,0,n+2)}(this),"0",n+2)),i=0!=(s&1<<q.UpperCase[1])?i+"E":i+"e",i=r>=0?i+"+":i+"-",10>r?i+="00":100>r&&(i+="0"),i+=j.str(j.iabs(r))},j.formatSignedDecimal=function(t,e){var i,s=e.flags,n=e.precision,a=e.width;return 0==n&&0==t?i="":(0!=(s&1<<q.LengthH[1])&&(t&=65535),i=j.str(j.iabs(t)),n>1&&i.length<n&&(i=j.lpad(i,"0",n)),0!=(s&1<<q.Zero[1])&&(i=j.lpad(i,"0",0>t?a-1:a)),0>t&&(i="-"+i)),t>=0&&(0!=(s&1<<q.Plus[1])?i="+"+i:0!=(s&1<<q.Space[1])&&(i=" "+i)),i=0!=(s&1<<q.Minus[1])?j.rpad(i," ",e.width):j.lpad(i," ",e.width)},j.formatString=function(t,e){var i=t,s=e.precision,n=e.width;return s>0&&(i=d.substr(t,0,s)),s=i.length,n>0&&n>s&&(i=0!=(e.flags&1<<q.Minus[1])?j.rpad(i," ",n):j.lpad(i," ",n)),i},j.formatNormalFloat=function(t,e){var i,s=e.flags,n=e.precision,a=e.width;if(-1==n&&(n=6),0==n)i=j.str(j.iabs(Math.round(t))),0!=(s&1<<q.Sharp[1])&&(i+=".");else if(t=j.roundTo(t,Math.pow(.1,n)),isNaN(t))i="NaN";else{i=X["int"](Math.pow(10,n)),i=j.str((t*i|0)/i);var r=i.indexOf(".");for(-1!=r?r=d.substr(i,r+1,null).length:(i+=".",r=0);n>r;)r++,i+="0"}return 0!=(s&1<<q.Plus[1])&&t>=0?i="+"+i:0!=(s&1<<q.Space[1])&&t>=0&&(i=" "+i),0!=(s&1<<q.Zero[1])&&(i=j.lpad(i,"0",0>t?a-1:a)),i=0!=(s&1<<q.Minus[1])?j.rpad(i," ",a):j.lpad(i," ",a)},j.formatCharacter=function(t,e){var i=String.fromCharCode(t);return 1<e.width&&(i=0!=(e.flags&1<<q.Minus[1])?j.rpad(i," ",e.width):j.lpad(i," ",e.width)),i},j.padNumber=function(t,e,i,s){var n=t.length;return s>0&&s>n&&(t=0!=(i&1<<q.Minus[1])?j.rpad(t," ",s):e>=0?j.lpad(t,0!=(i&1<<q.Zero[1])?"0":" ",s):0!=(i&1<<q.Zero[1])?"-"+j.lpad(d.substr(t,1,null),"0",s):j.lpad(t," ",s)),t},j.lpad=function(t,e,i){if(0>=e.length)throw"";for(;t.length<i;)t=e+t;return t},j.rpad=function(t,e,i){if(0>=e.length)throw"";for(;t.length<i;)t+=e;return t},j.toHex=function(t){var e="";do e="0123456789ABCDEF".charAt(15&t)+e,t>>>=4;while(t>0);return e},j.toOct=function(t){var e="";do e=(7&t)+e,t>>>=3;while(t>0);return e},j.iabs=function(t){return X["int"](Math.abs(t))},j.str=function(t){return X.string(t)},j.codeAt=function(t,e){return t.charCodeAt(e)},j.roundTo=function(t,e){return Math.round(t/e)*e};var q={__ename__:!0,__constructs__:"Minus Plus Space Sharp Zero LengthH LengthL Lengthl UpperCase".split(" "),Minus:["Minus",0]};q.Minus.toString=n,q.Minus.__enum__=q,q.Plus=["Plus",1],q.Plus.toString=n,q.Plus.__enum__=q,q.Space=["Space",2],q.Space.toString=n,q.Space.__enum__=q,q.Sharp=["Sharp",3],q.Sharp.toString=n,q.Sharp.__enum__=q,q.Zero=["Zero",4],q.Zero.toString=n,q.Zero.__enum__=q,q.LengthH=["LengthH",5],q.LengthH.toString=n,q.LengthH.__enum__=q,q.LengthL=["LengthL",6],q.LengthL.toString=n,q.LengthL.__enum__=q,q.Lengthl=["Lengthl",7],q.Lengthl.toString=n,q.Lengthl.__enum__=q,q.UpperCase=["UpperCase",8],q.UpperCase.toString=n,q.UpperCase.__enum__=q;var Z={__ename__:!0,__constructs__:["BareString","Tag","Property","Unknown"],BareString:function(t){return t=["BareString",0,t],t.__enum__=Z,t.toString=n,t},Tag:function(t,e){var i=["Tag",1,t,e];return i.__enum__=Z,i.toString=n,i},Property:function(t){return t=["Property",2,t],t.__enum__=Z,t.toString=n,t},Unknown:function(t,e){var i=["Unknown",3,t,e];return i.__enum__=Z,i.toString=n,i}},Q={__ename__:!0,__constructs__:["FmtInteger","FmtFloat","FmtString","FmtPointer","FmtNothing"],FmtInteger:function(t){return t=["FmtInteger",0,t],t.__enum__=Q,t.toString=n,t},FmtFloat:function(t){return t=["FmtFloat",1,t],t.__enum__=Q,t.toString=n,t},FmtString:["FmtString",2]};Q.FmtString.toString=n,Q.FmtString.__enum__=Q,Q.FmtPointer=["FmtPointer",3],Q.FmtPointer.toString=n,Q.FmtPointer.__enum__=Q,Q.FmtNothing=["FmtNothing",4],Q.FmtNothing.toString=n,Q.FmtNothing.__enum__=Q;var J={__ename__:!0,__constructs__:"ICharacter ISignedDecimal IUnsignedDecimal IOctal IHex IBin".split(" "),ICharacter:["ICharacter",0]};J.ICharacter.toString=n,J.ICharacter.__enum__=J,J.ISignedDecimal=["ISignedDecimal",1],J.ISignedDecimal.toString=n,J.ISignedDecimal.__enum__=J,J.IUnsignedDecimal=["IUnsignedDecimal",2],J.IUnsignedDecimal.toString=n,J.IUnsignedDecimal.__enum__=J,J.IOctal=["IOctal",3],J.IOctal.toString=n,J.IOctal.__enum__=J,J.IHex=["IHex",4],J.IHex.toString=n,J.IHex.__enum__=J,J.IBin=["IBin",5],J.IBin.toString=n,J.IBin.__enum__=J;var K={__ename__:!0,__constructs__:["FNormal","FScientific","FNatural"],FNormal:["FNormal",0]};K.FNormal.toString=n,K.FNormal.__enum__=K,K.FScientific=["FScientific",1],K.FScientific.toString=n,K.FScientific.__enum__=K,K.FNatural=["FNatural",2],K.FNatural.toString=n,K.FNatural.__enum__=K;var $=function(){};$.__name__=["de","polygonal","core","event","IObservable"];var te=function(){};te.__name__=["de","polygonal","ds","Hashable"];var ee=function(){this.key=_i._counter++};ee.__name__=["de","polygonal","ds","HashableItem"],ee.__interfaces__=[te],ee.prototype={__class__:ee};var ie=function(t,e){null==t&&(t=0),ee.call(this),this._source=null==e?this:e,this._observer=null,this._observerCount=0,this._tail=this._head=new se,this._hook=null,this.mPoolSize=this._blacklist=0,this.mPoolCapacity=t,this._updating=this._freed=!1,this._stack=new ti,this._type=0,this._userData=null,this.mNodeLookup=new Ls};ie.__name__=["de","polygonal","core","event","Observable"],ie.__interfaces__=[$],ie._getRegistry=function(){return null==ie._registry&&(ie._registry=new pi),ie._registry},ie.__super__=ee,ie.prototype=e(ee.prototype,{free:function(){if(!this._freed){this.clear(),this._stack.free();for(var t=this._head;null!=t;){var e=t.next;t.prev=null,t.next=null,t.observer=null,t.mask=null,t=e}this._userData=this._tail=this._head=this._stack=this.mNodeLookup=null,this._freed=!0}},clear:function(t){if(null==t&&(t=!1),0<this._observerCount&&ie._getRegistry().remove(this),this._stack.clear(null),this._updating=this._userData=!1,this._observer=this._hook=null,this._observerCount=0,this.mNodeLookup=new Ls,t){for(this.mPoolSize=0,t=this._head;null!=t;){var e=t.next;t.prev=null,t.next=null,t.observer=null,t=e}this._tail=this._head=new se}},attach:function(t,e){if(null==e&&(e=0),!this._freed){0==t.__guid&&(t.__guid=ie._nextGUID++);var i=this.mNodeLookup.get(t.__guid);if(null!=i){var s=e>>>27;-1==i.mask[s]?0!=e&&(i.mask[s]=134217727&e):i.mask[s]=0!=e?i.mask[s]|134217727&e:-1}else 0==this.mPoolCapacity?i=new se:0==this.mPoolSize?i=new se:(i=this._head,this._head=this._head.next,this.mPoolSize--),i.observer=t,0==e||-1==e?i.all=!0:(s=e>>>27,i.mask[s]|=0==e?-1:134217727&e,i.groupBits|=1<<s),this.mNodeLookup.set(t.__guid,i),i.next=this._observer,null!=this._observer&&(this._observer.prev=i),this._observer=i,this._observerCount++,1==this._observerCount&&ie._getRegistry().set(this)}},detach:function(t,e){if(null==e&&(e=0),!this._freed){var i=this.mNodeLookup.get(t.__guid);if(null!=i){if(0!=e){var s=e>>>27;if(i.mask[s]&=~(134217727&e),0==i.mask[s]&&(i.groupBits&=~(1<<s)),0<i.groupBits)return}if(null!=i.prev&&(i.prev.next=i.next),null!=i.next&&(i.next.prev=i.prev),i==this._observer&&(this._observer=i.next),i==this._hook&&(this._hook=this._hook.next),this._updating)for(var s=0,n=this._stack._top;n>s;)this._stack._a[s]==i&&(this._stack._a[s]=i.next),s+=3;this.mNodeLookup.remove(i.observer.__guid),i.observer=null,i.prev=i.next=null,0<this.mPoolCapacity&&this.mPoolSize<this.mPoolCapacity&&(this._tail=this._tail.next=i,this.mPoolSize++),this._observerCount--,0==this._observerCount&&ie._getRegistry().remove(this)}}},notify:function(t,e){this._notify(t,e)},_notify:function(t,e){if(0!=this._observerCount&&(t&this._blacklist)!=t){var i=134217727&t,s=t>>>27;if(this._updating)this._stack.push(this._hook),this._stack.push(this._type),this._stack.push(this._userData),this._type=t,this._userData=e,this._update(this._observer,t,i,s,e);else if(this._updating=!0,this._type=t,this._userData=e,this._update(this._observer,t,i,s,e),null==this._stack)this._observer=this._hook=null;else{if(0<this._stack._top)for(;0<this._stack._top;)e=this._stack.pop(),t=this._stack.pop(),i=134217727&t,s=t>>>27,this._update(this._stack.pop(),t,i,s,e);this._updating=!1,this._hook=null}}},_update:function(t,e,i,s,n){for(;null!=t;)this._hook=t.next,(t.all||0<(t.mask[s]&i))&&t.observer.onUpdate(e,this._source,n),t=this._hook},__class__:ie});var se=function(){this.next=this.prev=this.observer=null,this.groupBits=0,this.all=!1,this.mask=Array(32);for(var t=0;32>t;){var e=t++;this.mask[e]=0}};se.__name__=["de","polygonal","core","event","ObserverNode"],se.prototype={__class__:se};var ne=function(){};ne.__name__=["de","polygonal","core","fmt","NumberFormat"],ne.toMMSS=function(t){t=1e3*t|0,t=(t-t%1e3)/1e3;var e=t%60;return d.substr("0"+(t-e)/60,-2,null)+":"+d.substr("0"+e,-2,null)},ne.groupDigits=function(t,e){null==e&&(e=".");var i=t+"";if(1e6>t){if(1e3>t)return i;if(1e4>t)return d.substr(i,0,1)+e+d.substr(i,1,null);if(1e5>t)return d.substr(i,0,2)+e+d.substr(i,2,null);if(1e6>t)return d.substr(i,0,3)+e+d.substr(i,3,null)}else{if(1e7>t)return d.substr(i,0,1)+e+d.substr(i,1,3)+e+d.substr(i,4,null);if(1e8>t)return d.substr(i,0,2)+e+d.substr(i,2,3)+e+d.substr(i,5,null);if(1e9>t)return d.substr(i,0,3)+e+d.substr(i,3,3)+e+d.substr(i,6,null)}if(1e10>t)return d.substr(i,0,1)+e+d.substr(i,1,3)+e+d.substr(i,4,3)+e+d.substr(i,7,null);throw""};var ae=function(){this.m11=1,this.m21=this.m13=this.m12=0,this.m22=1,this.m32=this.m31=this.m23=0,this.m33=1};ae.__name__=["de","polygonal","core","math","Mat33"],ae.prototype={set:function(t){return this.m11=t.m11,this.m12=t.m12,this.m13=t.m13,this.m21=t.m21,this.m22=t.m22,this.m23=t.m23,this.m31=t.m31,this.m32=t.m32,this.m33=t.m33,this},setIdentity:function(){return this.m11=1,this.m21=this.m13=this.m12=0,this.m22=1,this.m32=this.m31=this.m23=0,this.m33=1,this},__class__:ae};var re=function(){this.m11=1,this.m21=this.m14=this.m13=this.m12=0,this.m22=1,this.m32=this.m31=this.m24=this.m23=0,this.m33=1,this.m43=this.m42=this.m41=this.m34=0,this.m44=1,null==re._sharedSineCosine&&(re._sharedSineCosine=new _e),this._sineCosine=re._sharedSineCosine};re.__name__=["de","polygonal","core","math","Mat44"],re.matrixProduct=function(t,e,i){var s=e.m11,n=e.m12,a=e.m13,r=e.m14,o=e.m21,_=e.m22,l=e.m23,h=e.m24,u=e.m31,c=e.m32,m=e.m33,d=e.m34,p=e.m41,f=e.m42,g=e.m43;e=e.m44;var b,w,v,S;return b=t.m11,w=t.m12,v=t.m13,S=t.m14,i.m11=b*s+w*o+v*u+S*p,i.m12=b*n+w*_+v*c+S*f,i.m13=b*a+w*l+v*m+S*g,i.m14=b*r+w*h+v*d+S*e,b=t.m21,w=t.m22,v=t.m23,S=t.m24,i.m21=b*s+w*o+v*u+S*p,i.m22=b*n+w*_+v*c+S*f,i.m23=b*a+w*l+v*m+S*g,i.m24=b*r+w*h+v*d+S*e,b=t.m31,w=t.m32,v=t.m33,S=t.m34,i.m31=b*s+w*o+v*u+S*p,i.m32=b*n+w*_+v*c+S*f,i.m33=b*a+w*l+v*m+S*g,i.m34=b*r+w*h+v*d+S*e,b=t.m41,w=t.m42,v=t.m43,S=t.m44,i.m41=b*s+w*o+v*u+S*p,i.m42=b*n+w*_+v*c+S*f,i.m43=b*a+w*l+v*m+S*g,i.m44=b*r+w*h+v*d+S*e,i},re.prototype={set:function(t){return this.m11=t.m11,this.m12=t.m12,this.m13=t.m13,this.m14=t.m14,this.m21=t.m21,this.m22=t.m22,this.m23=t.m23,this.m24=t.m24,this.m31=t.m31,this.m32=t.m32,this.m33=t.m33,this.m34=t.m34,this.m41=t.m41,this.m42=t.m42,this.m43=t.m43,this.m44=t.m44,this},setIdentity:function(){return this.m11=1,this.m21=this.m14=this.m13=this.m12=0,this.m22=1,this.m32=this.m31=this.m24=this.m23=0,this.m33=1,this.m43=this.m42=this.m41=this.m34=0,this.m44=1,this},setOrtho:function(t,e,i,s,n,a){var r=e-t,o=s-i,_=a-n;return this.m11=2/r,this.m21=this.m14=this.m13=this.m12=0,this.m22=2/o,this.m32=this.m31=this.m24=this.m23=0,this.m33=-2/_,this.m34=0,this.m41=-(e+t)/r,this.m42=-(s+i)/o,this.m43=-(a+n)/_,this.m44=1,this},catScale:function(t,e,i){return this.m11*=t,this.m21*=t,this.m31*=t,this.m41*=t,this.m12*=e,this.m22*=e,this.m32*=e,this.m42*=e,this.m13*=i,this.m23*=i,this.m33*=i,this.m43*=i,this},catTranslate:function(t,e,i){return this.m14+=t,this.m24+=e,this.m34+=i,this},__class__:re};var oe=function(){};oe.__name__=["de","polygonal","core","math","Mathematics"],oe.abs=function(t){return 0>t?-t:t},oe.fmin=function(t,e){return e>t?t:e},oe.fabs=function(t){return 0>t?-t:t},oe.fclamp=function(t,e,i){return e>t?e:t>i?i:t},oe.lerp=function(t,e,i){return t+(e-t)*i},oe.nextPow2=function(t){return t-=1,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|t>>16)+1},oe.floor=function(t){var e=0|t;return 0>t&&e!=t&&e--,e};var _e=function(t,e){null==e&&(e=0),null==t&&(t=0),this.x=t,this.y=e};_e.__name__=["de","polygonal","core","math","Vec2"],_e.prototype={__class__:_e};var le=function(t,e,i,s){null==s&&(s=1),null==i&&(i=0),null==e&&(e=0),null==t&&(t=0),this.x=t,this.y=e,this.z=i,this.w=s};le.__name__=["de","polygonal","core","math","Vec3"],le.prototype={zero:function(){return this.x=this.y=this.z=0,this.w=1,this},set:function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w},__class__:le};var he=function(){};he.__name__="de polygonal core math interpolation Interpolation".split(" "),he.prototype={__class__:he};var ue=function(){};ue.__name__=["de","polygonal","core","time","TimeSpan"],ue.prototype={__class__:ue};var ce=function(t,e){this._f=t,this._id=be.schedule(this,0,e)};ce.__name__=["de","polygonal","core","time","Delay"],ce.__interfaces__=[ue],ce.prototype={onBlip:function(){this._id=-1,this._f(),this._f=null},onStart:function(){},onProgress:function(){},onEnd:function(){},onCancel:function(){},__class__:ce};var me=function(t){null==t&&(t=0),this._duration=t,this._t0=0,this._t1=this._duration};me.__name__=["de","polygonal","core","time","Interval"],me.prototype={set_duration:function(t){return this._duration=t,this._t0=0,this._t1=this._duration,t},advance:function(t){return this.hold||(this._t0+=t),oe.fmin(this._t0/this._t1,1)},__class__:me};var de=function(){};de.__name__=["de","polygonal","core","time","Job"],de.prototype={__class__:de};var pe=function(t){this._job=t,this._jobId=-1};pe.__name__=["de","polygonal","core","time","JobHandler"],pe.__interfaces__=[ue],pe.prototype={run:function(t,e,i){return null==i&&(i=0),null!=t&&(this._job=t),this._jobId=be.schedule(this,e,i),this},cancel:function(){null!=this._job&&-1!=this._jobId&&be.cancel(this._jobId)},onBlip:function(){},onStart:function(){this._job.onStart()},onProgress:function(t){this._job.onProgress(t)},onEnd:function(){null!=this._job&&(this._job.onComplete(),this._job=null)},onCancel:function(){null!=this._job&&(this._job.onAbort(),this._job=null)},__class__:pe};var fe=function(){};fe.__name__=["de","polygonal","core","time","Time"],fe.prototype={__class__:fe};var ge=function(){};ge.__name__=["de","polygonal","core","time","Timebase"],ge.attach=function(t,e){null==e&&(e=0),ge.observable.attach(t,e)},ge.detach=function(t,e){null==e&&(e=0),ge.observable.detach(t,e)},ge.init=function(){ge.mInitialized||(ge.mInitialized=!0,ge.observable=new ie(100))},ge.setTimeSource=function(t){ge.mTime=t,ge.mTime.setTimingEventHandler(ge.timeStep),ge.mPast=ge.mTime.now()},ge.setTickRate=function(t,e){null==e&&(e=-1),ge.tickRate=1/t,ge.mAccumulator=0,ge.mAccumulatorLimit=-1==e?10:e*ge.tickRate},ge.halt=function(){ge.mHalted||(ge.mHalted=!0,ge.observable.notify(4))},ge.resume=function(){ge.mHalted&&(ge.mHalted=!1,ge.mAccumulator=0,ge.mPast=ge.mTime.now(),ge.observable.notify(16))},ge.timeStep=function(){if(!ge.mHalted){var t=ge.mTime.now(),e=t-ge.mPast;if(ge.mPast=t,ge.appTimeDelta=e,ge.appTime+=e,ge.mFpsTicks++,ge.mFpsTime+=e,1<=ge.mFpsTime&&(ge.mFpsTime-=1,ge.fps=ge.mFpsTicks,ge.mFpsTicks=0),0<ge.mFreezeDelay)ge.mFreezeDelay-=ge.appTimeDelta,ge.observable.notify(1,0),ge.observable.notify(2,1),0>=ge.mFreezeDelay&&ge.observable.notify(64);else if(ge.useFixedTimeStep){for(ge.mAccumulator+=ge.appTimeDelta*ge.timeScale,ge.mAccumulator>ge.mAccumulatorLimit&&(ge.observable.notify(8,ge.mAccumulator),ge.mAccumulator=ge.mAccumulatorLimit),ge.gameTimeDelta=ge.tickRate*ge.timeScale;ge.mAccumulator>=ge.tickRate&&(ge.mAccumulator-=ge.tickRate,ge.gameTime+=ge.gameTimeDelta,ge.observable.notify(1,ge.tickRate),ge.processedTicks++,!ge.mHalted););ge.mHalted||(ge.observable.notify(2,ge.mAccumulator/ge.tickRate),ge.processedFrames++)}else ge.mAccumulator=0,ge.gameTimeDelta=e*ge.timeScale,ge.gameTime+=ge.gameTimeDelta,ge.observable.notify(1,ge.gameTimeDelta),ge.processedTicks++,ge.observable.notify(2,1),ge.processedFrames++}};var be=function(){};be.__name__=["de","polygonal","core","time","Timeline"],be.init=function(){be.mInitialized||(be.mInitialized=!0,ge.init(),be.observable=new ie(100),be.mCurrentTick=ge.processedTicks,be.mCurrentSubTick=0,be.mCurrentInterval=null,be.mRunningIntervals=new ni,be.mPendingAdditions=new Je(10*be.POOL_SIZE),be.mIntervalHeap=new li,be.mIntervalPool=new vi(be.POOL_SIZE),be.mIntervalPool.allocate(!0,ye),be._data=[be.mRunningIntervals,be.mPendingAdditions,be.mIntervalHeap])},be.schedule=function(t,e,i,s,n){null==n&&(n=0),null==s&&(s=0),null==i&&(i=0),0!=s&&0==n&&(n=i),be.mCurrentTick=ge.processedTicks,i=Math.round(i/ge.tickRate),i=be.mCurrentTick+i;var a,r=++be.mNextId;if(-1==be.mIntervalPool._free)a=new ye;else{var o=be.mIntervalPool.next();a=be.mIntervalPool.get(o),a.poolId=o}return a.id=r,a.ageTicks=i,a.spawnTicks=i,a.dieTicks=i+((e/ge.tickRate+16384.5|0)-16384),a.subTicks=be.mCurrentSubTick++,a.ticks=(n/ge.tickRate+16384.5|0)-16384,a.iterations=s,a.iteration=0,a.listener=t,be.mPendingAdditions.enqueue(a),r},be.cancel=function(t){if(null==t&&(t=0),0>t||!be.mInitialized)return!1;
if(0==t)return be.mCurrentInterval.ageTicks=-1,!0;for(var e=0,i=be._data;e<i.length;){var s=i[e];for(++e,s=s.iterator();s.hasNext();){var n=s.next();if(n.id==t)return n.ageTicks=-1,!0}}return!1},be.tick=function(){be.mCurrentTick=ge.processedTicks,be.mCurrentSubTick=0;var t,e,i=be.mPendingAdditions,s=be.mIntervalHeap,n=be.mRunningIntervals;e=0;for(var a=i._size;a>e;)e++,t=i.dequeue(),-1==t.ageTicks?(be.mCurrentInterval=t,null!=t.listener?t.listener.onCancel():t.observable.notify(268435472,t.id)):s.add(t);for(e=n.head;null!=e;)t=e.val,-1==t.ageTicks?(e=e._list.unlink(e),be.mCurrentInterval=t,null!=t.listener?t.listener.onCancel():t.observable.notify(268435472,t.id)):(t.ageTicks++,be.mCurrentInterval=t,null!=t.listener?t.listener.onProgress((t.ageTicks-t.spawnTicks)/(t.dieTicks-t.spawnTicks)):t.observable.notify(268435460,t.id),t.ageTicks==t.dieTicks?(e=e._list.unlink(e),be.mCurrentInterval=t,null!=t.listener?t.listener.onEnd():t.observable.notify(268435464,t.id),0!=t.iterations?(t.resurrect(),t.subTicks=be.mCurrentSubTick++,i.enqueue(t)):-1!=t.poolId&&be.mIntervalPool.put(t.poolId)):e=e.next);for(;0!=s._size;)if(t=s._a[1],-1==t.ageTicks)s.pop(),-1!=t.poolId&&be.mIntervalPool.put(t.poolId),be.mCurrentInterval=t,null!=t.listener?t.listener.onCancel():t.observable.notify(268435472,t.id);else{if(!(t.ageTicks<=be.mCurrentTick))break;s.pop(),t.ageTicks==t.dieTicks?(be.mCurrentInterval=t,null!=t.listener?t.listener.onBlip():t.observable.notify(268435457,t.id),0!=t.iterations?(t.resurrect(),t.subTicks=be.mCurrentSubTick++,i.enqueue(t)):-1!=t.poolId&&be.mIntervalPool.put(t.poolId)):(n.append(t),be.mCurrentInterval=t,null!=t.listener?t.listener.onStart():t.observable.notify(268435458,t.id),be.mCurrentInterval=t,null!=t.listener?t.listener.onProgress((t.ageTicks-t.spawnTicks)/(t.dieTicks-t.spawnTicks)):t.observable.notify(268435460,t.id))}};var we=function(){};we.__name__=["de","polygonal","ds","Cloneable"];var ve=function(){};ve.__name__=["de","polygonal","ds","Comparable"],ve.prototype={__class__:ve};var Se=function(){};Se.__name__=["de","polygonal","ds","Heapable"],Se.__interfaces__=[ve],Se.prototype={__class__:Se};var ye=function(){this.listener=null,this.observable=be.observable,this.poolId=-1};ye.__name__="de polygonal core time _Timeline TimelineNode".split(" "),ye.__interfaces__=[ue,we,Se],ye.prototype={resurrect:function(){var t=this.dieTicks-this.spawnTicks+this.ticks;this.spawnTicks+=t,this.dieTicks+=t,this.ageTicks=this.spawnTicks,-1!=this.iterations&&(this.iterations--,this.iteration++)},onBlip:function(){be.mCurrentInterval=this,null!=this.listener?this.listener.onBlip():this.observable.notify(268435457,this.id)},onStart:function(){be.mCurrentInterval=this,null!=this.listener?this.listener.onStart():this.observable.notify(268435458,this.id)},onProgress:function(){be.mCurrentInterval=this,null!=this.listener?this.listener.onProgress((this.ageTicks-this.spawnTicks)/(this.dieTicks-this.spawnTicks)):this.observable.notify(268435460,this.id)},onEnd:function(){be.mCurrentInterval=this,null!=this.listener?this.listener.onEnd():this.observable.notify(268435464,this.id)},onCancel:function(){be.mCurrentInterval=this,null!=this.listener?this.listener.onCancel():this.observable.notify(268435472,this.id)},compare:function(t){var e=t.ageTicks-this.ageTicks;return 0==e?t.subTicks-this.subTicks:e},__class__:ye};var xe=function(t){null==t&&(t=.1),this._overshoot=17.0158*t};xe.__name__="de polygonal core tween ease BackEaseIn".split(" "),xe.__interfaces__=[he],xe.prototype={interpolate:function(t){return t*t*((this._overshoot+1)*t-this._overshoot)},__class__:xe};var Ce=function(t){null==t&&(t=.1),this._overshoot=17.0158*t*1.525};Ce.__name__="de polygonal core tween ease BackEaseInOut".split(" "),Ce.__interfaces__=[he],Ce.prototype={interpolate:function(t){return.5>t?2*t*t*(2*(this._overshoot+1)*t-this._overshoot):(t=2*t-2,.5*(t*t*((this._overshoot+1)*t+this._overshoot)+2))},__class__:Ce};var Be=function(t){null==t&&(t=.1),this._overshoot=17.0158*t};Be.__name__="de polygonal core tween ease BackEaseOut".split(" "),Be.__interfaces__=[he],Be.prototype={interpolate:function(t){return t-=1,t*t*((this._overshoot+1)*t+this._overshoot)+1},__class__:Be};var Te=function(){};Te.__name__="de polygonal core tween ease BounceEaseIn".split(" "),Te.__interfaces__=[he],Te.prototype={interpolate:function(t){return t=1-t,.36363636363636365>t?1-7.5625*t*t:.7272727272727273>t?(t-=.5454545454545454,1-(7.5625*t*t+.75)):.9090909090909091>t?(t-=.8181818181818182,1-(7.5625*t*t+.9375)):(t-=.9545454545454546,1-(7.5625*t*t+.984375))},__class__:Te};var Ie=function(){};Ie.__name__="de polygonal core tween ease BounceEaseInOut".split(" "),Ie.__interfaces__=[he],Ie.prototype={interpolate:function(t){return.5>t?(t=1-2*t,.36363636363636365>t?.5*(1-7.5625*t*t):.7272727272727273>t?(t-=.5454545454545454,.5*(1-(7.5625*t*t+.75))):.9090909090909091>t?(t-=.8181818181818182,.5*(1-(7.5625*t*t+.9375))):(t-=.9545454545454546,.5*(1-(7.5625*t*t+.984375)))):(t=2*(t-.5),.36363636363636365>t?7.5625*t*t*.5+.5:.7272727272727273>t?(t-=.5454545454545454,.5*(7.5625*t*t+.75)+.5):.9090909090909091>t?(t-=.8181818181818182,.5*(7.5625*t*t+.9375)+.5):(t-=.9545454545454546,.5*(7.5625*t*t+.984375)+.5))},__class__:Ie};var Ee=function(){};Ee.__name__="de polygonal core tween ease BounceEaseOut".split(" "),Ee.__interfaces__=[he],Ee.prototype={interpolate:function(t){return.36363636363636365>t?7.5625*t*t:.7272727272727273>t?(t-=.5454545454545454,7.5625*t*t+.75):.9090909090909091>t?(t-=.8181818181818182,7.5625*t*t+.9375):(t-=.9545454545454546,7.5625*t*t+.984375)},__class__:Ee};var Ae=function(){};Ae.__name__="de polygonal core tween ease CircularEaseIn".split(" "),Ae.__interfaces__=[he],Ae.prototype={interpolate:function(t){return-(Math.sqrt(1-t*t)-1)},__class__:Ae};var ke=function(){};ke.__name__="de polygonal core tween ease CircularEaseInOut".split(" "),ke.__interfaces__=[he],ke.prototype={interpolate:function(t){return.5>t?-.5*(Math.sqrt(1-4*t*t)-1):(t=2*t-2,.5*(Math.sqrt(1-t*t)+1))},__class__:ke};var Ne=function(){};Ne.__name__="de polygonal core tween ease CircularEaseOut".split(" "),Ne.__interfaces__=[he],Ne.prototype={interpolate:function(t){return Math.sqrt(1-(t-1)*(t-1))},__class__:Ne};var Le={__ename__:!0,__constructs__:"None PowIn PowOut PowInOut ExpIn ExpOut ExpInOut SinIn SinOut SinInOut CircularIn CircularOut CircularInOut BackIn BackOut BackInOut ElasticIn ElasticOut ElasticInOut BounceIn BounceOut BounceInOut".split(" "),None:["None",0]};Le.None.toString=n,Le.None.__enum__=Le,Le.PowIn=function(t){return t=["PowIn",1,t],t.__enum__=Le,t.toString=n,t},Le.PowOut=function(t){return t=["PowOut",2,t],t.__enum__=Le,t.toString=n,t},Le.PowInOut=function(t){return t=["PowInOut",3,t],t.__enum__=Le,t.toString=n,t},Le.ExpIn=["ExpIn",4],Le.ExpIn.toString=n,Le.ExpIn.__enum__=Le,Le.ExpOut=["ExpOut",5],Le.ExpOut.toString=n,Le.ExpOut.__enum__=Le,Le.ExpInOut=["ExpInOut",6],Le.ExpInOut.toString=n,Le.ExpInOut.__enum__=Le,Le.SinIn=["SinIn",7],Le.SinIn.toString=n,Le.SinIn.__enum__=Le,Le.SinOut=["SinOut",8],Le.SinOut.toString=n,Le.SinOut.__enum__=Le,Le.SinInOut=["SinInOut",9],Le.SinInOut.toString=n,Le.SinInOut.__enum__=Le,Le.CircularIn=["CircularIn",10],Le.CircularIn.toString=n,Le.CircularIn.__enum__=Le,Le.CircularOut=["CircularOut",11],Le.CircularOut.toString=n,Le.CircularOut.__enum__=Le,Le.CircularInOut=["CircularInOut",12],Le.CircularInOut.toString=n,Le.CircularInOut.__enum__=Le,Le.BackIn=function(t){return t=["BackIn",13,t],t.__enum__=Le,t.toString=n,t},Le.BackOut=function(t){return t=["BackOut",14,t],t.__enum__=Le,t.toString=n,t},Le.BackInOut=function(t){return t=["BackInOut",15,t],t.__enum__=Le,t.toString=n,t},Le.ElasticIn=function(t,e){var i=["ElasticIn",16,t,e];return i.__enum__=Le,i.toString=n,i},Le.ElasticOut=function(t,e){var i=["ElasticOut",17,t,e];return i.__enum__=Le,i.toString=n,i},Le.ElasticInOut=function(t,e){var i=["ElasticInOut",18,t,e];return i.__enum__=Le,i.toString=n,i},Le.BounceIn=["BounceIn",19],Le.BounceIn.toString=n,Le.BounceIn.__enum__=Le,Le.BounceOut=["BounceOut",20],Le.BounceOut.toString=n,Le.BounceOut.__enum__=Le,Le.BounceInOut=["BounceInOut",21],Le.BounceInOut.toString=n,Le.BounceInOut.__enum__=Le;var Oe=function(){this._none=new Ue,this._powEaseIn2=new Xe(2),this._powEaseIn3=new Xe(3),this._powEaseIn4=new Xe(4),this._powEaseIn5=new Xe(5),this._powEaseOut2=new Ve(2),this._powEaseOut3=new Ve(3),this._powEaseOut4=new Ve(4),this._powEaseOut5=new Ve(5),this._powEaseInOut2=new Ye(2),this._powEaseInOut3=new Ye(3),this._powEaseInOut4=new Ye(4),this._powEaseInOut5=new Ye(5),this._sinEaseIn=new He,this._sinEaseOut=new We,this._sinEaseInOut=new Ge,this._expEaseIn=new De,this._expEaseOut=new ze,this._expEaseInOut=new Re,this._circularEaseIn=new Ae,this._circularEaseOut=new Ne,this._circularEaseInOut=new ke,this._backEaseIn=new xe,this._backEaseOut=new Be,this._backEaseInOut=new Ce,this._elasticEaseIn=new Me,this._elasticEaseOut=new Fe,this._elasticEaseInOut=new Pe,this._bounceEaseIn=new Te,this._bounceEaseOut=new Ee,this._bounceEaseInOut=new Ie};Oe.__name__="de polygonal core tween ease EaseFactory".split(" "),Oe.create=function(t){return null==Oe._instance&&(Oe._instance=new Oe),Oe._instance._create(t)},Oe.prototype={_create:function(t){switch(t[1]){case 0:return this._none;case 1:switch(t[2]){case 2:return this._powEaseIn2;case 3:return this._powEaseIn3;case 4:return this._powEaseIn4;case 5:return this._powEaseIn5}break;case 2:switch(t[2]){case 2:return this._powEaseOut2;case 3:return this._powEaseOut3;case 4:return this._powEaseOut4;case 5:return this._powEaseOut5}break;case 3:switch(t[2]){case 2:return this._powEaseInOut2;case 3:return this._powEaseInOut3;case 4:return this._powEaseInOut4;case 5:return this._powEaseInOut5}break;case 7:return this._sinEaseIn;case 8:return this._sinEaseOut;case 9:return this._sinEaseInOut;case 4:return this._expEaseIn;case 5:return this._expEaseOut;case 6:return this._expEaseInOut;case 10:return this._circularEaseIn;case 11:return this._circularEaseOut;case 12:return this._circularEaseInOut;case 13:return t=t[2],.1==t?this._backEaseIn:new xe(t);case 14:return t=t[2],.1==t?this._backEaseOut:new Be(t);case 15:return t=t[2],.1==t?this._backEaseInOut:new Ce(t);case 16:var e=t[3];return t=t[2],0==t&&.3==e?this._elasticEaseIn:new Me(e,t);case 17:return e=t[3],t=t[2],0==t&&.3==e?this._elasticEaseOut:new Fe(e,t);case 18:return e=t[3],t=t[2],0==t&&.3==e?this._elasticEaseInOut:new Pe(e,t);case 19:return this._bounceEaseIn;case 20:return this._bounceEaseOut;case 21:return this._bounceEaseInOut}return null},__class__:Oe};var Me=function(t,e){null==e&&(e=.3),null==t&&(t=0),this._amplitude=t,this._period=e};Me.__name__="de polygonal core tween ease ElasticEaseIn".split(" "),Me.__interfaces__=[he],Me.prototype={interpolate:function(t){var e,i;return 1>this._amplitude?(i=1,e=.25*this._period):(i=this._amplitude,e=this._period/6.283185307179586*Math.asin(1/i)),-(i*Math.pow(2,10*(t-1))*Math.sin(6.283185307179586*(t-1-e)/this._period))},__class__:Me};var Pe=function(t,e){null==e&&(e=.3),null==t&&(t=0),this._amplitude=t,this._period=e};Pe.__name__="de polygonal core tween ease ElasticEaseInOut".split(" "),Pe.__interfaces__=[he],Pe.prototype={interpolate:function(t){var e,i;return 1>this._amplitude?(i=1,e=.25*this._period):(i=this._amplitude,e=this._period/6.283185307179586*Math.asin(1/i)),.5>t?(t=2*t-1,-.5*i*Math.pow(2,10*t)*Math.sin(2*(t-e)*Math.PI/this._period)):(t=2*t-1,i*Math.pow(2,-10*t)*Math.sin(6.283185307179586*(t-e)/this._period)*.5+1)},__class__:Pe};var Fe=function(t,e){null==e&&(e=.3),null==t&&(t=0),this._amplitude=t,this._period=e};Fe.__name__="de polygonal core tween ease ElasticEaseOut".split(" "),Fe.__interfaces__=[he],Fe.prototype={interpolate:function(t){var e,i;return 1>this._amplitude?(i=1,e=.25*this._period):(i=this._amplitude,e=this._period/6.283185307179586*Math.asin(1/i)),i*Math.pow(2,-10*t)*Math.sin(6.283185307179586*(t-e)/this._period)+1},__class__:Fe};var De=function(){};De.__name__="de polygonal core tween ease ExpEaseIn".split(" "),De.__interfaces__=[he],De.prototype={interpolate:function(t){return Math.pow(2,10*(t-1))},__class__:De};var Re=function(){};Re.__name__="de polygonal core tween ease ExpEaseInOut".split(" "),Re.__interfaces__=[he],Re.prototype={interpolate:function(t){return.5>t?.5*Math.pow(2,10*(2*t-1)):.5*(-Math.pow(2,-10*(2*t-1))+2)},__class__:Re};var ze=function(){};ze.__name__="de polygonal core tween ease ExpEaseOut".split(" "),ze.__interfaces__=[he],ze.prototype={interpolate:function(t){return-Math.pow(2,-10*t)+1},__class__:ze};var Ue=function(){};Ue.__name__="de polygonal core tween ease NullEase".split(" "),Ue.__interfaces__=[he],Ue.prototype={interpolate:function(t){return t},__class__:Ue};var Xe=function(t){this.degree=t};Xe.__name__="de polygonal core tween ease PowEaseIn".split(" "),Xe.__interfaces__=[he],Xe.prototype={interpolate:function(t){return Math.pow(t,this.degree)},__class__:Xe};var Ye=function(t){this.degree=t};Ye.__name__="de polygonal core tween ease PowEaseInOut".split(" "),Ye.__interfaces__=[he],Ye.prototype={interpolate:function(t){if(.5>t)return.5*Math.pow(2*t,this.degree);var e;return e=0==(1&this.degree)?-1:1,.5*e*(Math.pow(2*t-2,this.degree)+2*e)},__class__:Ye};var Ve=function(t){this.degree=t};Ve.__name__="de polygonal core tween ease PowEaseOut".split(" "),Ve.__interfaces__=[he],Ve.prototype={interpolate:function(t){return Math.pow(t-1,this.degree)*(0==(1&this.degree)?-1:1)+1},__class__:Ve};var He=function(){};He.__name__="de polygonal core tween ease SinEaseIn".split(" "),He.__interfaces__=[he],He.prototype={interpolate:function(t){return 1-Math.cos(1.5707963267948966*t)},__class__:He};var Ge=function(){};Ge.__name__="de polygonal core tween ease SinEaseInOut".split(" "),Ge.__interfaces__=[he],Ge.prototype={interpolate:function(t){return-.5*(Math.cos(3.141592653589793*t)-1)},__class__:Ge};var We=function(){};We.__name__="de polygonal core tween ease SinEaseOut".split(" "),We.__interfaces__=[he],We.prototype={interpolate:function(t){return Math.sin(1.5707963267948966*t)},__class__:We};var je=function(){};je.__name__=["de","polygonal","ds","Collection"],je.__interfaces__=[te],je.prototype={__class__:je};var qe=function(){};qe.__name__=["de","polygonal","ds","Itr"],qe.prototype={__class__:qe};var Ze=function(){};Ze.__name__=["de","polygonal","ds","ArrayUtil"],Ze.alloc=function(t){return Array(t)},Ze.copy=function(t,e,i,s){null==s&&(s=-1),null==i&&(i=0),-1==s&&(s=t.length);for(var n=0;s>i;){var a=i++;e[n++]=t[a]}return e},Ze.fill=function(t,e,i){null==i&&(i=-1),-1==i&&(i=t.length);for(var s=0;i>s;){var n=s++;t[n]=e}},Ze.assign=function(t,e,i,s){null==s&&(s=-1),-1==s&&(s=t.length),null==i&&(i=[]);for(var n=0;s>n;){var a=n++;t[a]=H.createInstance(e,i)}};var Qe=function(){};Qe.__name__=["de","polygonal","ds","Queue"],Qe.__interfaces__=[je];var Je=function(t,e){null==e&&(e=!0),this.maxSize=-1,this._capacity=t,this._isResizable=e,this._size=this._front=this._sizeLevel=0,this._a=Ze.alloc(this._capacity),this._iterator=null,this.key=_i._counter++,this.reuseIterator=!1};Je.__name__=["de","polygonal","ds","ArrayedQueue"],Je.__interfaces__=[Qe],Je.prototype={enqueue:function(t){this._capacity==this._size&&this._isResizable&&(this._sizeLevel++,this._pack(this._capacity<<1),this._front=0,this._capacity<<=1),this.__set((this._size++ +this._front)%this._capacity,t)},dequeue:function(){var t=this.__get(this._front++);return this._front==this._capacity&&(this._front=0),this._size--,this._isResizable&&0<this._sizeLevel&&this._size==this._capacity>>2&&(this._sizeLevel--,this._pack(this._capacity>>2),this._front=0,this._capacity>>=2),t},iterator:function(){return this.reuseIterator?(null==this._iterator?this._iterator=new Ke(this):this._iterator.reset(),this._iterator):new Ke(this)},_pack:function(t){t=Ze.alloc(t);for(var e=0,i=this._size;i>e;){var s=e++;t[s]=this.__get(this._front++),this._front==this._capacity&&(this._front=0)}this._a=t},__get:function(t){return this._a[t]},__set:function(t,e){this._a[t]=e},__class__:Je};var Ke=function(t){this._f=t,this._a=Ze.copy(this._f._a,[],null,null),this._front=this._f._front,this._capacity=this._f._capacity,this._size=this._f._size,this._i=0};Ke.__name__=["de","polygonal","ds","ArrayedQueueIterator"],Ke.__interfaces__=[qe],Ke.prototype={reset:function(){return this._a=Ze.copy(this._f._a,[],null,null),this._front=this._f._front,this._capacity=this._f._capacity,this._size=this._f._size,this._i=0,this},hasNext:function(){return this._i<this._size},next:function(){return this._a[(this._i++ +this._front)%this._capacity]},__class__:Ke};var $e=function(){};$e.__name__=["de","polygonal","ds","Stack"],$e.__interfaces__=[je];var ti=function(t){null==t&&(t=0),this._a=t>0?Ze.alloc(t):[],this._top=0,this._iterator=null,this.key=_i._counter++,this.reuseIterator=!1,this.maxSize=-1};ti.__name__=["de","polygonal","ds","ArrayedStack"],ti.__interfaces__=[$e],ti.prototype={push:function(t){this.__set(this._top++,t)},pop:function(){return this.__get(--this._top)},free:function(){for(var t=0,e=this._a.length;e>t;){var i=t++;this._a[i]=null}this._iterator=this._a=null},clear:function(t){if(null==t&&(t=!1),t){t=0;for(var e=this._a.length;e>t;){var i=t++;this._a[i]=null}}this._top=0},iterator:function(){return this.reuseIterator?(null==this._iterator?this._iterator=new ei(this):this._iterator.reset(),this._iterator):new ei(this)},__get:function(t){return this._a[t]},__set:function(t,e){this._a[t]=e},__class__:ti};var ei=function(t){this._f=t,this._a=this._f._a,this._i=this._f._top-1};ei.__name__=["de","polygonal","ds","ArrayedStackIterator"],ei.__interfaces__=[qe],ei.prototype={reset:function(){return this._a=this._f._a,this._i=this._f._top-1,this},hasNext:function(){return 0<=this._i},next:function(){return this._a[this._i--]},__class__:ei};var ii=function(t){null==t&&(t=0),this._size=0,this._iterator=null,this.maxSize=-1,this._a=t>0?Ze.alloc(t):[],this.key=_i._counter++,this.reuseIterator=!1};ii.__name__=["de","polygonal","ds","DA"],ii.__interfaces__=[je],ii.prototype={set:function(t,e){this._a[t]=e,t>=this._size&&this._size++},pushBack:function(t){this.set(this._size,t)},fill:function(t,e){null==e&&(e=0),e>0?this._size=e:e=this._size;for(var i=0;e>i;){var s=i++;this._a[s]=t}return this},free:function(){for(var t=0,e=this._a.length;e>t;){var i=t++;this._a[i]=null}this._iterator=this._a=null},contains:function(t){for(var e=!1,i=0,s=this._size;s>i;){var n=i++;if(this._a[n]==t){e=!0;break}}return e},remove:function(t){if(0==this._size)return!1;for(var e=0,i=this._size;i>e;)if(this._a[e]==t){i--;for(var s=e;i>s;)this._a[s]=this._a[s+1],++s}else e++;return t=0!=this._size-i,this._size=i,t},clear:function(t){if(null==t&&(t=!1),t){t=0;for(var e=this._a.length;e>t;){var i=t++;this._a[i]=null}}this._size=0},iterator:function(){return this.reuseIterator?(null==this._iterator?this._iterator=new si(this):this._iterator.reset(),this._iterator):new si(this)},__class__:ii};var si=function(t){this._f=t,this._a=this._f._a,this._s=this._f._size,this._i=0};si.__name__=["de","polygonal","ds","DAIterator"],si.__interfaces__=[qe],si.prototype={reset:function(){return this._a=this._f._a,this._s=this._f._size,this._i=0,this},hasNext:function(){return this._i<this._s},next:function(){return this._a[this._i++]},__class__:si};var ni=function(t){null==t&&(t=0),this.maxSize=-1,this._reservedSize=t,this._poolSize=this._size=0,this._circular=!1,this._iterator=null,t>0&&(this._headPool=this._tailPool=new oi(null,this)),this.head=this.tail=null,this.key=_i._counter++,this.reuseIterator=!1};ni.__name__=["de","polygonal","ds","DLL"],ni.__interfaces__=[je],ni.prototype={append:function(t){return t=this._getNode(t),null!=this.tail?(this.tail.next=t,t.prev=this.tail):this.head=t,this.tail=t,this._circular&&(this.tail.next=this.head,this.head.prev=this.tail),this._size++,t},unlink:function(t){var e=t.next;return t==this.head?(this.head=this.head.next,this._circular&&(this.head==this.tail?this.head=null:this.tail.next=this.head),null==this.head&&(this.tail=null)):t==this.tail&&(this.tail=this.tail.prev,this._circular&&(this.head.prev=this.tail),null==this.tail&&(this.head=null)),t._unlink(),this._putNode(t),this._size--,e},iterator:function(){return this.reuseIterator?null==this._iterator?this._circular?new ri(this):new ai(this):(this._iterator.reset(),this._iterator):this._circular?new ri(this):new ai(this)},_getNode:function(t){if(0==this._reservedSize||0==this._poolSize)return new oi(t,this);var e=this._headPool;return this._headPool=this._headPool.next,this._poolSize--,e.next=null,e.val=t,e},_putNode:function(t){var e=t.val;return 0<this._reservedSize&&this._poolSize<this._reservedSize?(this._tailPool=this._tailPool.next=t,t.val=null,this._poolSize++):t._list=null,e},__class__:ni};var ai=function(t){this._f=t,this._walker=this._f.head,this._hook=null};ai.__name__=["de","polygonal","ds","DLLIterator"],ai.__interfaces__=[qe],ai.prototype={reset:function(){return this._walker=this._f.head,this._hook=null,this},hasNext:function(){return null!=this._walker},next:function(){var t=this._walker.val;return this._hook=this._walker,this._walker=this._walker.next,t},__class__:ai};var ri=function(t){this._f=t,this._walker=this._f.head,this._s=this._f._size,this._i=0,this._hook=null};ri.__name__=["de","polygonal","ds","CircularDLLIterator"],ri.__interfaces__=[qe],ri.prototype={reset:function(){return this._walker=this._f.head,this._s=this._f._size,this._i=0,this._hook=null,this},hasNext:function(){return this._i<this._s},next:function(){var t=this._walker.val;return this._hook=this._walker,this._walker=this._walker.next,this._i++,t},__class__:ri};var oi=function(t,e){this.val=t,this._list=e};oi.__name__=["de","polygonal","ds","DLLNode"],oi.prototype={_unlink:function(){var t=this.next;return null!=this.prev&&(this.prev.next=this.next),null!=this.next&&(this.next.prev=this.prev),this.next=this.prev=null,t},_insertAfter:function(t){t.next=this.next,t.prev=this,null!=this.next&&(this.next.prev=t),this.next=t},_insertBefore:function(t){t.next=this,t.prev=this.prev,null!=this.prev&&(this.prev.next=t),this.prev=t},__class__:oi};var _i=function(){};_i.__name__=["de","polygonal","ds","HashKey"];var li=function(t){null==t&&(t=0),this.maxSize=-1,this._a=t>0?Ze.alloc(t+1):[],this._a[0]=null,this._size=0,this._iterator=null,this.key=_i._counter++,this.reuseIterator=!1};li.__name__=["de","polygonal","ds","Heap"],li.__interfaces__=[je],li.prototype={add:function(t){this.__set(++this._size,t),t.position=this._size,this._upheap(this._size)},pop:function(){var t=this._a[1];return this._a[1]=this._a[this._size],this._downheap(1),this._size--,t},iterator:function(){return this.reuseIterator?(null==this._iterator?this._iterator=new hi(this):this._iterator.reset(),this._iterator):new hi(this)},_upheap:function(t){for(var e,i=t>>1,s=this._a[t];i>0&&(e=this._a[i],0<s.compare(e));)this._a[t]=e,e.position=t,t=i,i>>=1;s.position=t,this._a[t]=s},_downheap:function(t){for(var e=t<<1,i=this._a[t],s=this._size-1;e<this._size;){s>e&&0>this._a[e].compare(this._a[e+1])&&e++;var n=this._a[e];if(!(0>i.compare(n)))break;this._a[t]=n,n.position=t,t=i.position=e,e<<=1}i.position=t,this._a[t]=i},__set:function(t,e){this._a[t]=e},__class__:li};var hi=function(t){this._f=t,this._a=[],this._a[0]=null,this.reset()};hi.__name__=["de","polygonal","ds","HeapIterator"],hi.__interfaces__=[qe],hi.prototype={reset:function(){this._s=this._f._size+1,this._i=1;for(var t=this._f._a,e=1,i=this._s;i>e;){var s=e++;this._a[s]=t[s]}return this},hasNext:function(){return this._i<this._s},next:function(){return this._a[this._i++]},__class__:hi};var ui=function(){};ui.__name__=["de","polygonal","ds","Set"],ui.__interfaces__=[je];var ci=function(){};ci.__name__=["de","polygonal","ds","Map"],ci.__interfaces__=[je];var mi=function(t,e,i){for(null==i&&(i=!0),null==e&&(e=-1),-1==e&&(e=t),this._isResizable=i,this._free=0,this._capacity=e,this._size=0,this._mask=t-1,this._sizeLevel=0,this._iterator=null,this.maxSize=-1,this._hash=Ze.alloc(t),Ze.fill(this._hash,-1,t),this._data=Ze.alloc(3*this._capacity),Ze.fill(this._data,0,3*this._capacity),this._next=Ze.alloc(this._capacity),Ze.fill(this._next,0,this._capacity),t=2,i=0;e>i;)i++,this._data[t-1]=-2147483648,this._data[t]=-1,t+=3;for(e=0,t=this._capacity-1;t>e;)i=e++,this._next[i]=i+1;this._next[this._capacity-1]=-1,this.key=_i._counter++,this.reuseIterator=!1};mi.__name__=["de","polygonal","ds","IntIntHashTable"],mi.__interfaces__=[ci],mi.prototype={get:function(t){var e=this._hash[73856093*t&this._mask];if(-1==e)return-2147483648;if(this._data[e]==t)return this._data[e+1];for(var i=-2147483648,e=this._data[e+2];-1!=e;){if(this._data[e]==t){i=this._data[e+1];break}e=this._data[e+2]}return i},set:function(t,e){this._size==this._capacity&&this._isResizable&&this._expand();var i=3*this._free;this._free=this._next[this._free],this._data[i]=t,this._data[i+1]=e;var s=73856093*t&this._mask,n=this._hash[s];if(-1==n)return this._hash[s]=i,this._size++,!0;for(var s=this._data[n]!=t,a=this._data[n+2];-1!=a;)this._data[a]==t&&(s=!1),n=a,a=this._data[a+2];return this._data[n+2]=i,this._size++,s},iterator:function(){return this.reuseIterator?(null==this._iterator?this._iterator=new di(this):this._iterator.reset(),this._iterator):new di(this)},_expand:function(){this._sizeLevel++;var t=this._capacity,e=t<<1;this._capacity=e;var i=Ze.alloc(e);Ze.copy(this._next,i,0,t),this._next=i,i=Ze.alloc(3*e),Ze.copy(this._data,i,0,3*t),this._data=i;for(var i=t-1,s=e-1;s>i;){var n=i++;this._next[n]=n+1}for(this._next[e-1]=-1,this._free=t,e=3*t+2,i=0;t>i;)i++,this._data[e-1]=-2147483648,this._data[e]=-1,e+=3},__class__:mi};var di=function(t){for(this._f=t,this._data=this._f._data,this._i=0,this._s=this._f._capacity;this._i<this._s&&-2147483648==this._data[3*this._i+1];)this._i++};di.__name__=["de","polygonal","ds","IntIntHashTableValIterator"],di.__interfaces__=[qe],di.prototype={reset:function(){for(this._data=this._f._data,this._i=0,this._s=this._f._capacity;this._i<this._s&&-2147483648==this._data[3*this._i+1];)this._i++;return this},hasNext:function(){return this._i<this._s},next:function(){for(var t=this.__getData(3*this._i++ +1);this._i<this._s&&-2147483648==this._data[3*this._i+1];)this._i++;return t},__getData:function(t){return this._data[t]},__class__:di};var pi=function(){this._a=new ii,this.key=_i._counter++,this.reuseIterator=!1};pi.__name__=["de","polygonal","ds","ListSet"],pi.__interfaces__=[ui],pi.prototype={set:function(t){return this._a.contains(t)?!1:(this._a.pushBack(t),!0)},remove:function(t){return this._a.remove(t)},iterator:function(){return this._a.reuseIterator=this.reuseIterator,this._a.iterator()},__class__:pi};var fi=function(t){null==t&&(t=0),this.maxSize=-1,this._reservedSize=t,this._poolSize=this._size=0,this._circular=!1,this._iterator=null,t>0&&(this._headPool=this._tailPool=new wi(null,this)),this.head=this.tail=null,this.key=_i._counter++,this.reuseIterator=!1};fi.__name__=["de","polygonal","ds","SLL"],fi.__interfaces__=[je],fi.prototype={append:function(t){return t=this._getNode(t),null!=this.tail?this.tail.next=t:this.head=t,this.tail=t,this._circular&&(this.tail.next=this.head),this._size++,t},free:function(){for(var t=this.head,e=0,i=this._size;i>e;){e++;var s=t.next;t.free(),t=s}for(this.head=this.tail=null,t=this._headPool;null!=t;)e=t.next,t.free(),t=e;this._iterator=this._headPool=this._tailPool=null},remove:function(t){var e=this._size;if(0==e)return!1;for(var i=this.head,s=this.head.next,n=1,a=this._size;a>n;)if(n++,s.val==t){s==this.tail&&(this.tail=i,this._circular&&(this.tail.next=this.head));var r=s.next;i.next=r,this._putNode(s),s=r,this._size--}else i=s,s=s.next;return this.head.val==t&&(t=this.head.next,this._putNode(this.head),this.head=t,null==this.head?this.tail=null:this._circular&&(this.tail.next=this.head),this._size--),this._size<e},iterator:function(){return this.reuseIterator?null==this._iterator?this._circular?new bi(this):new gi(this):(this._iterator.reset(),this._iterator):this._circular?new bi(this):new gi(this)},_getNode:function(t){if(0==this._reservedSize||0==this._poolSize)return new wi(t,this);var e=this._headPool;return this._headPool=this._headPool.next,this._poolSize--,e.val=t,e.next=null,e},_putNode:function(t){var e=t.val;return 0<this._reservedSize&&this._poolSize<this._reservedSize?(this._tailPool=this._tailPool.next=t,t.val=null,t.next=null,this._poolSize++):t._list=null,e},__class__:fi};var gi=function(t){this._f=t,this._walker=this._f.head,this._hook=null};gi.__name__=["de","polygonal","ds","SLLIterator"],gi.__interfaces__=[qe],gi.prototype={reset:function(){return this._walker=this._f.head,this._hook=null,this},hasNext:function(){return null!=this._walker},next:function(){var t=this._walker.val;return this._hook=this._walker,this._walker=this._walker.next,t},__class__:gi};var bi=function(t){this._f=t,this._walker=this._f.head,this._s=this._f._size,this._i=0,this._hook=null};bi.__name__=["de","polygonal","ds","CircularSLLIterator"],bi.__interfaces__=[qe],bi.prototype={reset:function(){return this._walker=this._f.head,this._s=this._f._size,this._i=0,this._hook=null,this},hasNext:function(){return this._i<this._s},next:function(){var t=this._walker.val;return this._hook=this._walker,this._walker=this._walker.next,this._i++,t},__class__:bi};var wi=function(t,e){this.val=t,this._list=e};wi.__name__=["de","polygonal","ds","SLLNode"],wi.prototype={free:function(){this.next=this.val=null},_insertAfter:function(t){t.next=this.next,this.next=t},__class__:wi};var vi=function(t){this._size=t,this._free=-1,this.key=_i._counter++};vi.__name__=["de","polygonal","ds","pooling","ObjectPool"],vi.__interfaces__=[te],vi.prototype={next:function(){var t=this._free;return this._free=this._next[t],t},get:function(t){return this._lazy&&null==this._pool[t]&&(this._pool[t]=this._lazyConstructor()),this._pool[t]},put:function(t){this._next[t]=this._free,this._free=t},allocate:function(t,e,i,s){this._lazy=t,this._next=Ze.alloc(this._size),t=0;for(var n=this._size-1;n>t;){var a=t++;this._next[a]=a+1}if(this._next[this._size-1]=-1,this._free=0,this._pool=Ze.alloc(this._size),this._lazy)null!=e?this._lazyConstructor=function(){return H.createInstance(e,[])}:null!=i?this._lazyConstructor=function(){return i()}:null!=s&&(this._lazyConstructor=function(){return s.create()});else if(null!=e)for(t=0,n=this._size;n>t;)a=t++,this._pool[a]=H.createInstance(e,[]);else if(null!=i)for(t=0,n=this._size;n>t;)a=t++,this._pool[a]=i();else if(null!=s)for(t=0,n=this._size;n>t;)a=t++,this._pool[a]=s.create()},__class__:vi};var Si=function(t,e,i,s){null==s&&(s=1),null==i&&(i=0),null==e&&(e=0),null==t&&(t=0),le.call(this,t,e,i,s)};Si.__name__=["de","polygonal","gl","color","ColorRGBA"],Si.__super__=le,Si.prototype=e(le.prototype,{__class__:Si});var yi=function(t,e,i,s,n,a,r,o){null==o&&(o=0),null==r&&(r=0),null==a&&(a=0),null==n&&(n=0),null==s&&(s=1),null==i&&(i=1),null==e&&(e=1),null==t&&(t=1),this.multiplier=new Si(t,e,i,s),this.offset=new Si(n,a,r,o)};yi.__name__=["de","polygonal","gl","color","ColorXForm"],yi.prototype={__class__:yi};var xi=function(t,e,i,s){null==s&&(s=-1),null==i&&(i=-1),null==e&&(e=1),null==t&&(t=1),i>=t&&s>=e?(this.minX=t,this.minY=e,this.maxX=i,this.maxY=s):(this.minX=this.minY=1/0,this.maxX=this.maxY=-1/0)};xi.__name__="de polygonal motor geom primitive AABB2".split(" "),xi.__interfaces__=[we],xi.prototype={get_intervalX:function(){return this.maxX-this.minX},setMinX:function(t){t-=this.minX,this.minX+=t,this.maxX+=t},setMinY:function(t){t-=this.minY,this.minY+=t,this.maxY+=t},clone:function(){return new xi(this.minX,this.minY,this.maxX,this.maxY)},__class__:xi};var Ci={__ename__:!0,__constructs__:"Android iOs Linux Windows MacOs ChromeOs Unknown".split(" "),Android:["Android",0]};Ci.Android.toString=n,Ci.Android.__enum__=Ci,Ci.iOs=["iOs",1],Ci.iOs.toString=n,Ci.iOs.__enum__=Ci,Ci.Linux=["Linux",2],Ci.Linux.toString=n,Ci.Linux.__enum__=Ci,Ci.Windows=["Windows",3],Ci.Windows.toString=n,Ci.Windows.__enum__=Ci,Ci.MacOs=["MacOs",4],Ci.MacOs.toString=n,Ci.MacOs.__enum__=Ci,Ci.ChromeOs=["ChromeOs",5],Ci.ChromeOs.toString=n,Ci.ChromeOs.__enum__=Ci,Ci.Unknown=["Unknown",6],Ci.Unknown.toString=n,Ci.Unknown.__enum__=Ci;
var Bi=function(){this.h={}};Bi.__name__=["haxe","ds","StringMap"],Bi.__interfaces__=[S],Bi.prototype={set:function(t,e){this.h["$"+t]=e},get:function(t){return this.h["$"+t]},exists:function(t){return this.h.hasOwnProperty("$"+t)},remove:function(t){return t="$"+t,this.h.hasOwnProperty(t)?(delete this.h[t],!0):!1},keys:function(){var t,e=[];for(t in this.h)this.h.hasOwnProperty(t)&&e.push(t.substr(1));return d.iter(e)},__class__:Bi};var Ti=function(){};Ti.__name__=["de","polygonal","platform","js","Context"],Ti.getPlatform=function(){for(var t=null,e=window.navigator.userAgent,i=0,s=0,n=[new c("Android",""),new c("(iP[ao]d|iPhone)","i"),new c("Linux",""),new c("Windows",""),new c("Mac OS",""),new c("CrOS","")];s<n.length;){var a=n[s];if(++s,a.match(e)){t=H.createEnumIndex(Ci,i);break}i++}return null==t&&(t=Ci.Unknown),t},Ti.isAndroidStockBrowser=function(){var t=window.navigator.userAgent,e=-1<t.indexOf("Android")&&-1<t.indexOf("Mozilla/5.0")&&-1<t.indexOf("AppleWebKit"),i=new c("AppleWebKit/([\\d.]+)","");return i.match(t)?(t=X.parseFloat(i.matched(1)),e&&537>t):!1},Ti.getWebAudioContext=function(){if(Ti.isWebAudioSupported()){if(null==Ti.mWebAudioContext){var t=Ti.getFeature("AudioContext",window);Ti.mWebAudioContext=new t.feature}return Ti.mWebAudioContext}return null},Ti.getFeature=function(t,e){var i=B.field(e,t);if(null!=i)return{feature:i,supported:!0,prefix:"",fieldName:t};for(var i=0,s=["moz","webkit","ms","o","khtml"];i<s.length;){var n=s[i];++i;var a=""+n+(t.charAt(0).toUpperCase()+d.substr(t,1,null)),r=B.field(e,a);if(null!=r)return e[t]=r,{feature:r,supported:!0,prefix:n,fieldName:a}}return{feature:null,supported:!1,prefix:null,fieldName:null}},Ti.getFeature2=function(t,e){for(var i=0;i<t.length;){var s=t[i];++i;var n=B.field(e,s);if(null!=n)return{feature:n,supported:!0,name:s,prefix:""};for(var n=0,a=["moz","webkit","ms","o","khtml"];n<a.length;){var r=a[n];++n;var o=""+r+(s.charAt(0).toUpperCase()+d.substr(s,1,null)),o=B.field(e,o);if(null!=o)return e[s]=o,{feature:o,supported:!0,name:s,prefix:r}}}return{feature:null,supported:!1,name:null,prefix:null}},Ti.isDesktop=function(){switch(Ti.getPlatform()[1]){case 3:case 4:case 2:return!0;default:return!1}},Ti.isFullscreenSupported=function(){return null!=Ti.getFeature("fullscreenEnabled",window.document)||null!=Ti.getFeature("fullScreenEnabled",window.document)},Ti.isWebAudioSupported=function(){var t=Ti.getPlatform();return H.enumEq(t,Ci.MacOs)?!1:Ti.getFeature("AudioContext",window).supported},Ti.fixAndroidMath=function(){if(0<=window.navigator.userAgent.indexOf("Linux; U; Android 4")){var t=Math.sin,e=Math.cos;Math.sin=function(e){return 0==e?0:t(e)},Math.cos=function(t){return 0==t?1:e(t)}}};var Ii=function(t){var e=this;this.mCallback=t;var i=Ti.getFeature("hidden",window.document);i.supported?(t=function(){e.mHidden=B.field(window.document,i.fieldName),e.mCallback(0==e.mHidden)},t(null),window.document.addEventListener(""+i.prefix+"visibilitychange",t,!1)):(t=function(){e.mCallback(0==e.mHidden)},window.addEventListener("pageshow",t,!1),window.addEventListener("pagehide",t,!1))};Ii.__name__=["de","polygonal","platform","js","PageVisibility"],Ii.prototype={__class__:Ii};var Ei=function(){var t=this;if(Ti.getFeature("requestAnimationFrame",window).supported&&null!=window.performance&&Ti.getFeature("now",window.performance).supported){var e=(Ys=window,s(Ys,Ys.requestAnimationFrame)),i=null,i=function(s){return e(i),t.mTime=s,null!=t.mHandler&&t.mHandler(),!0};this.mTime=window.performance.now(),i(this.mTime)}else{this.mTime=Date.now();var n=null,n=function(){window.setTimeout(n,0),t.mTime=Date.now(),null!=t.mHandler&&t.mHandler()};n()}};Ei.__name__=["de","polygonal","platform","js","TimeProvider"],Ei.__interfaces__=[fe],Ei.prototype={now:function(){return this.mTime/1e3},setTimingEventHandler:function(t){this.mHandler=t},__class__:Ei};var Ai=function(){};Ai.__name__="de polygonal platform js res AssetLoader".split(" "),Ai.load=function(t,e,i){Ai.mLoadCallback=t,Ai.mAssetsByName=new Bi,Ai.mNumRemainingFiles=0;try{}catch(s){}try{var n=new XMLHttpRequest;n.open("GET",".",!0),n.responseType="blob",Ai.mURL=Ti.getFeature("URL",window).feature,Ai.mBlobSupported="blob"==n.responseType&&null!=Ai.mURL&&null!=B.field(Ai.mURL,"createObjectURL")}catch(a){}Ti.allowXhr||(Ai.mBlobSupported=!1),t=new c("\\.([a-zA-Z0-9]{3,4}$)","");for(var n=0,r=C.all;n<r.length;){var o=r[n];if(++n,!(null!=e&&!e.match(o)||null!=i&&i.match(o)))switch(Ai.mNumRemainingFiles++,t.match(o),t.matched(1)){case"png":case"jpg":case"gif":Ai.loadImage(o);break;case"mp3":case"ogg":case"wav":case"aac":Ai.loadAudio(o);break;case"txt":case"xml":case"json":case"fnt":Ai.loadText(o)}}},Ai.xhr=function(t,e,i){var s=new XMLHttpRequest;s.onerror=function(){window.clearInterval(0)},s.onload=function(t){window.clearInterval(0),404!=s.status&&(t=s.response,null==t?t=s.responseText:"blob"==e&&"arraybuffer"==s.responseType&&(t=new Blob([s.response])),i(t))};try{Ns.stamp(),s.open("GET",t,!0),s.responseType=e,""==s.responseType&&(s.responseType="arraybuffer"),s.send()}catch(n){}return s},Ai.loadAudio=function(t){if(Ti.isWebAudioSupported())Ai.xhr(t,"arraybuffer",function(e){Ti.getWebAudioContext().decodeAudioData(e,function(e){return Ai.onFileLoaded(t,e),!0},function(){return!0})});else{var e;e=window.document.createElement("audio"),e.setAttribute("type","audio/wave"),e.preload="auto",e.addEventListener("canplaythrough",function(){Ai.onFileLoaded(t,e)}),e.addEventListener("error",function(){}),e.addEventListener("progress",function(){0<e.buffered.length&&0<e.duration&&e.buffered.end(0)}),e.src=t,e.load()}},Ai.loadImage=function(t){var e;e=window.document.createElement("img"),e.addEventListener("load",function(){Ai.onFileLoaded(t,e)}),Ai.mBlobSupported?Ai.xhr(t,"blob",function(t){e.src=Ai.mURL.createObjectURL(t)}):e.src=t},Ai.loadText=function(t){Ai.xhr(t,"text",function(e){Ai.onFileLoaded(t,e)})},Ai.onFileLoaded=function(t,e){try{Ai.mAssetsByName.set(t,e),0==--Ai.mNumRemainingFiles&&(Ai.mLoadCallback(Ai.mAssetsByName),Ai.mLoadCallback=null)}catch(i){}};var ki=function(){};ki.__name__=["de","polygonal","snd","L"],ki.d=function(){};var Ni=function(){};Ni.__name__=["de","polygonal","snd","SoundAsset"],Ni.prototype={__class__:Ni};var Li=function(){this._volEnvelopeJob=this._onFadeComplete=this._onComplete=null,this._poolId=-1,this._pan=this._loops=this._startTime=0,this._vol=1,this.assetId=this._asset=null,this.id=0,this._volEnvelope=new Pi(this)};Li.__name__=["de","polygonal","snd","SoundNode"],Li.prototype={setAsset:function(t,e){this._asset=t,this.assetId=e},isMusic:function(){return this._asset.isMusic},play:function(){return this.isPlaying=!0,this},stop:function(){return this.isPlaying=!1,Oi._activeSoundNodes.remove(this.id),this.id=0,null!=this._volEnvelopeJob&&this._volEnvelopeJob.cancel(),this},getVolume:function(){return this._vol},setVolume:function(t){return this._vol=t*(this._asset.isMusic?Oi._musicVolume:Oi._soundVolume)*Oi._masterVolume,this},mute:function(){return this.setVolume(0),this},setPan:function(t){return this._pan=t,this},repeat:function(t){return this._loops=t,this},loop:function(){return this._loops=-1,this},from:function(t){return this._startTime=t,this},fade:function(t,e,i){return this._onFadeComplete=i,this._volEnvelope.srcValue=this._vol,this._volEnvelope.dstValue=t,null!=this._volEnvelopeJob&&(this._volEnvelopeJob.cancel(),this._volEnvelopeJob=null),this._volEnvelopeJob=new pe(this._volEnvelope).run(null,e),this},onComplete:function(t){return this._onComplete=t,this},reset:function(){this._loops=this._lastAction=0,this._vol=1,this._startTime=this._pan=0},onVolumeEnvelopeComplete:function(){this._volEnvelopeJob=null,null!=this._onFadeComplete&&(this._onFadeComplete(),this._onFadeComplete=null)},__class__:Li};var Oi=function(){};Oi.__name__=["de","polygonal","snd","SoundSystem"],Oi.init=function(){if(Oi._init)throw"";Oi._init=!0,Oi._assets=new Bi,Oi._activeSoundNodes=new Ls,Oi._lastPlayTime=new Bi,Oi._mute=!1,Oi._initialized=!0,Oi._nextId=1,Oi._numActiveChannels=0,Oi._masterVolume=1,Oi._musicVolume=1,Oi._soundVolume=1},Oi.get_mute=function(){return Oi._mute},Oi.set_mute=function(t){return Oi.set_masterVolume((Oi._mute=t)?0:1),t},Oi.get_masterVolume=function(){return Oi._masterVolume},Oi.set_masterVolume=function(t){return ki.d(j.format("set master volume to %.2f",[t]),null),Oi._masterVolume=t},Oi.get_musicVolume=function(){return Oi._musicVolume},Oi.set_musicVolume=function(t){Oi._musicVolume=t;for(var e=Oi._activeSoundNodes.iterator();e.hasNext();){var i=e.next();if(i.isMusic()){i.setVolume(t);break}}return t},Oi.get_soundVolume=function(){return Oi._soundVolume},Oi.set_soundVolume=function(t){Oi._soundVolume=t;for(var e=Oi._activeSoundNodes.iterator();e.hasNext();){var i=e.next();i.isMusic()||i.setVolume(t)}return t},Oi.registerSoundAsset=function(t,e,i){null==i&&(i=!1);var s=new Ni;s.data=e,s.isMusic=i,Oi._assets.set(t,s)},Oi.soundAssetExists=function(t){return Oi._assets.exists(t)},Oi.createNode=function(t){if(32==Oi._numActiveChannels)return null;var e=Oi.getFreeSoundNode(),i=Oi.getAsset(t);return e.setAsset(i,t),e.id=Oi._nextId++,Oi._activeSoundNodes.set(e.id,e),Oi._numActiveChannels++,e.isMusic()?e.setVolume(Oi._musicVolume):1>Oi._soundVolume&&e.setVolume(Oi._soundVolume),e},Oi.play=function(t){var e=null,e=Oi.createNode(t);return null!=e&&(e.isMusic()?e.setVolume(Oi._musicVolume):1>Oi._soundVolume&&e.setVolume(Oi._soundVolume),e.play()),e},Oi.stop=function(t){return Oi.isPlaying(t)?Oi.find(t).stop():null},Oi.stopById=function(t){for(var e=g.filter(Oi._activeSoundNodes,function(e){return e.assetId==t}).iterator();e.hasNext();)e.next().stop()},Oi.stopAll=function(){for(var t=Oi._activeSoundNodes.keys();t.hasNext();){var e=t.next();Oi._activeSoundNodes.get(e).stop()}},Oi.find=function(t){return Oi._initialized||Oi.init(),Oi._activeSoundNodes.exists(t)?Oi._activeSoundNodes.get(t):null},Oi.findByAsset=function(t){return Oi._initialized?g.array(g.filter(Oi._activeSoundNodes,function(e){return e.assetId==t})):[]},Oi.isPlaying=function(t){return null!=Oi.find(t)},Oi.isMusicPlaying=function(){for(var t=Oi._activeSoundNodes.iterator();t.hasNext();)if(t.next().isMusic())return!0;return!1},Oi.getAsset=function(t){return Oi._assets.get(t)},Oi.getFreeSoundNode=function(){return Ti.isWebAudioSupported()?new Di:new Fi};var Mi=function(t){this.node=t,this.ease=new Ve(2)};Mi.__name__=["de","polygonal","snd","SoundTween"],Mi.__interfaces__=[de],Mi.prototype={onStart:function(){this.update(this.srcValue)},onProgress:function(t){this.update(oe.lerp(this.srcValue,this.dstValue,this.ease.interpolate(t)))},onComplete:function(){this.update(this.dstValue)},onAbort:function(){},update:function(){},__class__:Mi};var Pi=function(t){Mi.call(this,t)};Pi.__name__=["de","polygonal","snd","VolumeEnvelope"],Pi.__super__=Mi,Pi.prototype=e(Mi.prototype,{update:function(t){this.node.setVolume(t)},onComplete:function(){Mi.prototype.onComplete.call(this),this.node.onVolumeEnvelopeComplete()},__class__:Pi});var Fi=function(){Li.call(this)};Fi.__name__=["de","polygonal","snd","js","AudioElementSoundNode"],Fi.__super__=Li,Fi.prototype=e(Li.prototype,{play:function(){var t;return t=Us.__cast(this._asset.data,HTMLAudioElement),t.addEventListener("ended",s(this,this.onEnded)),t.play(),Li.prototype.play.call(this)},onEnded:function(){Us.__cast(this._asset.data,HTMLAudioElement).removeEventListener("ended",s(this,this.onEnded)),this.isPlaying=!1,0<this.id&&Oi._activeSoundNodes.remove(this.id),Oi._numActiveChannels--,this._poolId=-1,null!=this._onComplete&&(this._onComplete(),this._onComplete=null)},stop:function(){return this},setVolume:function(){return this},setPan:function(){return this},reset:function(){Li.prototype.reset.call(this)},__class__:Fi});var Di=function(){Li.call(this),this.mContext=Ti.getWebAudioContext();try{this._source=this.mContext.createBufferSource(),this._source.connect(this.mContext.destination),this._pannerNode=null}catch(t){window.document.getElementById("dump").innerHTML="node fail! "+X.string(t)}};Di.__name__=["de","polygonal","snd","js","WebAudioSoundNode"],Di.__super__=Li,Di.prototype=e(Li.prototype,{play:function(){return Oi._numActiveChannels--,this._start(this._source,0),this},_createGain:function(){return null!=this.mContext.createGain?this.mContext.createGain():this.mContext.createGainNode()},_start:function(t,e){null!=t.start?t.start(e):t.noteOn(e)},stop:function(){return this._source.stop(this.mContext.currentTime),this},setVolume:function(t){return Li.prototype.setVolume.call(this,t),this},setPan:function(t){return Li.prototype.setPan.call(this,t),this},setAsset:function(t,e){Li.prototype.setAsset.call(this,t,e),this._source.buffer=t.data},__class__:Di});var Ri=function(){};Ri.__name__=["de","polygonal","zz","L"],Ri.d=function(){};var zi=function(){};zi.__name__=["de","polygonal","zz","RenderSystem"],zi.init=function(){zi._atlasLookup=new Bi,zi.setScene(new bs("scene_root")),zi.images=new Bi,zi._textureUsageCount=new mi(256)},zi.setRenderer=function(t){zi.mRenderer=t},zi.getScene=function(){return zi._scene},zi.setScene=function(t){zi._scene=t},zi.drawScene=function(){null!=zi.mRenderer&&null!=zi._scene&&zi.mRenderer.drawScene(zi._scene)},zi.getAtlas=function(t){return zi._atlasLookup.get(t)},zi.getImage=function(t){if(!zi.images.exists(t))throw'image with id "'+t+'" does not exits, call registerImageData(imageId) first.';return zi.images.get(t)},zi.defineImage=function(t,e,i){if(zi.images.exists(t))return null;if(e=new Ki(e,e.width,e.height,!0),e.id=t,zi.images.set(t,e),null==i||null!=zi._atlasLookup&&zi._atlasLookup.exists(t))return e;var s=zi.initTexture(t);return i=new is(s,i),zi._atlasLookup.set(t,i),e},zi.initTexture=function(t){return zi.mRenderer.initTexture(zi.getImage(t))},zi.getTextureAtlas=function(t){return zi._atlasLookup.get(t)},zi.createTextureEffect=function(t){t=zi.initTexture(t);var e=zi._textureUsageCount.get(t.key);return-2147483648==e?zi._textureUsageCount.set(t.key,1):zi._textureUsageCount.set(t.key,e+1),new ji(t)},zi.createSpriteSheetEffect=function(t){if(!zi._atlasLookup.exists(t))throw'sprite sheet with id "'+t+'" does not exits, call registerSpriteStrip(imageId) or registerSpriteAtlas(imageId) first.';return new qi(zi._atlasLookup.get(t))};var Ui={__ename__:!0,__constructs__:["Portrait","Landscape"],Portrait:["Portrait",0]};Ui.Portrait.toString=n,Ui.Portrait.__enum__=Ui,Ui.Landscape=["Landscape",1],Ui.Landscape.toString=n,Ui.Landscape.__enum__=Ui;var Xi=function(t,e){this.resolution={x:0,y:0},this.resizeHandler=e,this.mRenderer=t,window.addEventListener("resize",s(this,this.onScreenWindowResize),!1),this.onScreenWindowResize()};Xi.__name__=["de","polygonal","zz","Window"],Xi.prototype={onScreenWindowResize:function(){var t=this;window.document.getElementById("canvas_surface").style.visibility="hidden",ge.halt(),window.clearTimeout(this.delay),window.setTimeout(function(){t.doResize()},1e3)},doResize:function(){this.resolution.x=window.innerWidth,this.resolution.y=window.innerHeight,null!=this.mRenderer&&this.mRenderer.resize(this.resolution.x,this.resolution.y),null!=this.resizeHandler&&this.resizeHandler(this.resolution.x,this.resolution.y),ge.resume(),window.document.getElementById("canvas_surface").style.visibility="visible"},__class__:Xi};var Yi=function(){this.mControllers=null};Yi.__name__=["de","polygonal","zz","controller","ControlledObject"],Yi.prototype={attach:function(t){null==this.mControllers&&(this.mControllers=new fi,this.mControllers.reuseIterator=!0),this.mControllers.append(t),t.setObject(this)},detach:function(t){null!=this.mControllers&&(this.mControllers.remove(t),0==this.mControllers._size&&(this.mControllers.free(),this.mControllers=null))},updateControllers:function(t){return null!=this.mControllers?this.doUpdate(t):!1},doUpdate:function(t){for(var e,i=!1,s=this.mControllers.head;null!=s;)e=s.next,s.val.update(t)&&(i=!0),s=e;return i},__class__:Yi};var Vi=function(){this.appTime=0,this.active=!0,this.frequency=1,this.minTime=this.maxTime=this.phase=0,this.repeat=Hi.Clamp,this.type=B.field(H.getClass(this),"TYPE")};Vi.__name__=["de","polygonal","zz","controller","Controller"],Vi.prototype={free:function(){this.mObject.detach(this),this.repeat=this.mObject=null},setObject:function(t){this.mObject=t},update:function(t){return this.active?(this.appTime+=t,this.onUpdate(this.appTime)):!1},onUpdate:function(){throw""},getControlTime:function(){var t=this.frequency*this.appTime+this.phase;if(this.repeat==Hi.Clamp)return oe.fclamp(t,this.minTime,this.maxTime);var e=this.maxTime-this.minTime;if(e>0){var i=(t-this.minTime)/e,t=oe.floor(i),i=i-t;return this.repeat==Hi.Wrap?this.minTime+i*e:0==(1&t)?this.minTime+i*e:this.maxTime-i*e}return this.minTime},__class__:Vi};var Hi={__ename__:!0,__constructs__:["Clamp","Wrap","Cycle"],Clamp:["Clamp",0]};Hi.Clamp.toString=n,Hi.Clamp.__enum__=Hi,Hi.Wrap=["Wrap",1],Hi.Wrap.toString=n,Hi.Wrap.__enum__=Hi,Hi.Cycle=["Cycle",2],Hi.Cycle.toString=n,Hi.Cycle.__enum__=Hi;var Gi=function(){};Gi.__name__=["de","polygonal","zz","render","RenderSurface"],Gi.prototype={__class__:Gi};var Wi=function(){this._alpha=1,this._color=16711935,this._colorXForm=new yi,this._bits=33};Wi.__name__="de polygonal zz render effect Effect".split(" "),Wi.prototype={set_alpha:function(t){return this._bits=1>t?8|this._bits:-9&this._bits,this._bits|=128,this._alpha=t},set_tex:function(t){return null!=t?(this._bits=t.isAlphaPreMultiplied?4|this._bits:2|this._bits,this._bits&=-2):(this._bits&=-7,this._bits|=1),this._tex=t},draw:function(t){t.drawEffect(this)},__class__:Wi};var ji=function(t){Wi.call(this),this.set_tex(t),this.uvOffsetY=this.uvOffsetX=0,this.uvScaleY=this.uvScaleX=1,this.setCrop(),this._bits|=64};ji.__name__="de polygonal zz render effect TextureEffect".split(" "),ji.__super__=Wi,ji.prototype=e(Wi.prototype,{draw:function(t){t.drawTextureEffect(this)},setCrop:function(){var t=this._tex.image.width,e=this._tex.image.height;this._tex.isNormalized&&(t/=this._tex.width,e/=this._tex.height),this.crop=new $i(0,0,t,e)},__class__:ji});var qi=function(t){this.mFrameIndex=0,this.atlas=t,ji.call(this,t.tex)};qi.__name__="de polygonal zz render effect TextureAtlasEffect".split(" "),qi.__super__=ji,qi.prototype=e(ji.prototype,{setFrameIndex:function(t){this.mFrameIndex!=t&&(this.mFrameIndex=t,this.setCrop())},draw:function(t){t.drawSpriteSheetEffect(this)},setCrop:function(){this._bits|=64,this.crop=this.atlas._cropList._a[this.mFrameIndex]},__class__:qi});var Zi=function(){this.maxBatchSize=4096,this.allowGlobalState=this.allowAlphaState=!0,this.mViewport={x:0,y:0,width:0,height:0},this.maxBatchSize=4096,this.mCuller=null,this.currMvp=new re,this.currGlobalEffect=this.currEffect=this.currVisual=this.currNode=this.currScene=null,this.currViewProjMatrix=new re,this.drawDeferred=null,this._deferredObjectList=new bs("deferredList"),this.currAlphaState=this._deferredObjectNode=null,this.mViewMatrix=new re,this.mProjMatrix=new re,this.mBackgroundColor=0,this._textureLookup=new Ls,this._tmpStack=new ti,this.setCamera(new ds)};Zi.__name__=["de","polygonal","zz","scene","Renderer"],Zi.prototype={setBackgroundColor:function(t){this.mBackgroundColor=t,null!=this.mSurface&&this.mSurface.setBackgroundColor(t)},resize:function(t,e){this.width=t,this.height=e,this.mViewport.width=t,this.mViewport.height=e,null==this.mSurface&&null,null!=this.mSurface&&this.mSurface.resize(t,e),this.mProjMatrix.setOrtho(-t/2,t/2,-e/2,e/2,-1,1),this.mProjMatrix.catScale(1,-1,1),this.mProjMatrix.catTranslate(-1,1,1)},setSurface:function(t){this.mSurface=t,this.mSurface.setBackgroundColor(this.mBackgroundColor)},setCamera:function(t){this.mCamera=t,this.mCamera.setRenderer(this)},getViewport:function(){return this.mViewport},drawScene:function(t){null!=t&&null!=this.mCamera&&(this.currScene=t,this.mViewMatrix.setIdentity(),null!=this.mCamera&&this.mViewMatrix.set(this.mCamera.viewMatrix),re.matrixProduct(this.mProjMatrix,this.mViewMatrix,this.currViewProjMatrix),this.onBeginScene(),null!=this.mCuller?(t=this.mCuller.computeVisibleSet(t),this.drawVisibleSet(t)):(this._deferredObjectList._next=null,this._deferredObjectNode=this._deferredObjectList,t.draw(this,!0),this._deferredObjectNode._next=null,null!=this.drawDeferred&&(this._deferredDrawingActive=!0,this.drawDeferred(),this._deferredDrawingActive=!1)),this.onEndScene(),this.nullifyDeferredObjects())},drawNode:function(t){null==this.drawDeferred?(this.currNode=t,this.currGlobalEffect=t.effect,this.currGlobalEffect.draw(this),this.currGlobalEffect=this.currNode=null):this._deferredObjectNode=this._deferredObjectNode._next=t},drawQuad:function(t){if(this._deferredDrawingActive){var e=this._deferredObjectNode._next;this._deferredObjectNode._next=t,t._next=e,this._deferredObjectNode=t}else null==this.drawDeferred?(this.currVisual=t,this.currEffect=t.effect,null!=this.currEffect&&this.currEffect.draw(this),this.currVisual=this.currEffect=null):this._deferredObjectNode=this._deferredObjectNode._next=t},drawEffect:function(){this.allowGlobalState&&this.setGlobalState(this.currVisual.states)},drawTextureEffect:function(){this.allowGlobalState&&this.setGlobalState(this.currVisual.states)},drawSpriteSheetEffect:function(){this.allowGlobalState&&this.setGlobalState(this.currVisual.states)},drawVisibleSet:function(t,e){if(null==e)for(var i=0,s=t._size;s>i;){var n=i++;this.currVisual=t._a[n],this.drawQuad(this.currVisual)}else e.draw(this,t)},initTexture:function(t){var e=this._textureLookup.get(t.key);return null==e&&(e=this.createTex(t),Ri.d(j.format('created texture tex.key=#%d from image "%s" (#%d)',[e.key,t.id,t.key]),null),this._textureLookup.set(t.key,e)),e},setGlobalState:function(t){this.allowAlphaState&&(null==t?null!=this.currAlphaState&&(this.setAlphaState(cs.NONE),this.currAlphaState=null):(t=t._a[0],null==t?null!=this.currAlphaState&&(this.setAlphaState(cs.NONE),this.currAlphaState=null):(null==this.currAlphaState||this.currAlphaState.flags!=t.flags)&&(this.setAlphaState(t),this.currAlphaState=t)))},onBeginScene:function(){},onEndScene:function(){},setAlphaState:function(){throw""},nullifyDeferredObjects:function(){for(var t=this._deferredObjectList;null!=t;){var e=t._next;t._next=null,t=e}this._deferredObjectNode=this._deferredObjectList._next=null},createTex:function(){throw""},__class__:Zi};var Qi=function(){Zi.call(this)};Qi.__name__="de polygonal zz render module canvas CanvasRenderer".split(" "),Qi.__super__=Zi,Qi.prototype=e(Zi.prototype,{setSurface:function(t){Zi.prototype.setSurface.call(this,t),this.mCanvasSurface=t},createTex:function(t){return new es(t,!1,!1)},drawEffect:function(t){var e=this.currVisual.world,i=e._scale,s=e._matrix,e=e._translate,n=i.x,i=i.y,a=this.mCanvasSurface.context;a.setTransform(n*s.m11,n*s.m21,i*s.m12,i*s.m22,e.x,e.y),a.fillStyle=this.serializeRGBi(t._color,t._alpha),a.fillRect(0,0,1,1)},drawTextureEffect:function(t){var e=this.currVisual.world,i=e._scale,s=e._matrix,e=e._translate,n=t.crop,a=i.x/n.w,r=i.y/n.h,i=a*s.m11,a=a*s.m21,n=r*s.m12,s=r*s.m22,r=e.x,e=e.y,o=this.mCanvasSurface.context;o.globalAlpha=t._alpha,o.setTransform(i,a,n,s,r,e),o.drawImage(t._tex.image.data,0,0)},drawSpriteSheetEffect:function(t){var e=this.currVisual.world,i=e._scale,s=e._matrix,n=e._translate,e=s.m11,a=s.m21,r=s.m12,s=s.m22,o=n.x,n=n.y,_=t.crop,l=this.mCanvasSurface.context;l.globalAlpha=t._alpha,l.setTransform(e,a,r,s,o,n),l.drawImage(t._tex.image.data,_.x,_.y,_.w,_.h,0,0,i.x,i.y)},onBeginScene:function(){var t=this.mCanvasSurface.context,e=this.mCanvasSurface.mCanvas.width,i=this.mCanvasSurface.mCanvas.height;t.fillStyle=this.serializeRGBi(this.mBackgroundColor,1),t.fillRect(0,0,e,i),t.save()},onEndScene:function(){Zi.prototype.onEndScene.call(this),this.mCanvasSurface.context.restore()},serializeRGBi:function(t,e){return"rgba("+(t>>16&255)+","+(t>>8&255)+","+(255&t)+","+e+")"},__class__:Qi});var Ji=function(){this.mCanvas=1==window.document.body.getElementsByTagName("canvas").length?window.document.body.getElementsByTagName("canvas").item(0):window.document.createElement("canvas"),this.mCanvas.id="canvas_surface",this.width=this.mCanvas.width,this.height=this.mCanvas.height;var t=window.document.body;null==this.mCanvas.parentElement&&t.appendChild(this.mCanvas),this.context=this.mCanvas.getContext("2d")};Ji.__name__="de polygonal zz render module canvas CanvasSurface".split(" "),Ji.__interfaces__=[Gi],Ji.prototype={resize:function(t,e){var i=window.devicePixelRatio;this.mCanvas.parentNode.removeChild(this.mCanvas),this.mCanvas.width=Math.floor(t*i),this.mCanvas.height=Math.floor(e*i),this.mCanvas.style.width=t+"px",this.mCanvas.style.height=e+"px",window.document.body.appendChild(this.mCanvas),this.context=this.mCanvas.getContext("2d")},setBackgroundColor:function(){},__class__:Ji};var Ki=function(t,e,i,s){ee.call(this),this.data=t,this.width=e,this.height=i,this.id=null,this.premultipliedAlpha=s};Ki.__name__="de polygonal zz render texture Image".split(" "),Ki.__super__=ee,Ki.prototype=e(ee.prototype,{__class__:Ki});var $i=function(t,e,i,s){this.x=t,this.y=e,this.w=i,this.h=s,this.r=t+i,this.b=e+s};$i.__name__="de polygonal zz render texture Rect".split(" "),$i.prototype={clone:function(){return new $i(this.x,this.y,this.w,this.h)},__class__:$i};var ts=function(t,e){null==e&&(e=0),null==t&&(t=0),this.x=t,this.y=e};ts.__name__="de polygonal zz render texture Size".split(" "),ts.prototype={__class__:ts};var es=function(t,e,i){ee.call(this),this.image=t,this.isPowerOfTwo=e,this.isNormalized=i,this.isAlphaPreMultiplied=t.premultipliedAlpha,e?(this.width=oe.nextPow2(t.width),this.height=oe.nextPow2(t.height)):(this.width=t.width,this.height=t.height)};es.__name__="de polygonal zz render texture Tex".split(" "),es.__super__=ee,es.prototype=e(ee.prototype,{__class__:es});var is=function(t,e){this.tex=t,this.mFormat=e;var i=this.mFormat.getData();this.frameCount=i.rectList.length,this.scale=i.scale;var s=this.frameCount;this._cropMap=new Bi,this._sizeMap=new Bi,this._cropList=new ii(s,s),this._sizeList=new ii(s,s),this._trimFlagList=new ii(s,s).fill(!1,s),this._trimOffset=new ii(s,s).fill(new ts,s),this._untrimmedSize=new ii(s,s),this._sheetW=t.image.width,this._sheetH=t.image.height,this._indexMap=new Bi,this._nameMap=new Ls;for(var s=0,n=this.frameCount;n>s;){var a=s++,r=i.rectList[a];if(null!=r){var o=new ts(0|r.w,0|r.h);this.addCropRectAt(a,i.nameList[a],r,o,t.isNormalized),i.trimFlag[a]?(this._trimFlagList.set(a,!0),this._trimOffset.set(a,i.trimOffset[a]),this._untrimmedSize.set(a,i.untrimmedSize[a])):this._untrimmedSize.set(a,o)}}};is.__name__="de polygonal zz render texture TextureAtlas".split(" "),is.prototype={getFormat:function(){return this.mFormat},getFrameIndex:function(t){return this._indexMap.get(t)},addCropRectAt:function(t,e,i,s,n){this._indexMap.set(e,t),this._nameMap.set(t,e),i=i.clone(),this._cropMap.set(e,i),this._cropMap.set(t,i),this._sizeMap.set(e,s),this._sizeMap.set(t,s),this._cropList.set(t,i),this._sizeList.set(t,s),n&&(i.x/=this.tex.width,i.y/=this.tex.height,i.w/=this.tex.width,i.h/=this.tex.height),i.r=i.x+i.w,i.b=i.y+i.h},__class__:is};var ss=function(){this.mTextureAtlasData={width:0,height:0,scale:1,rectList:[],nameList:[],trimFlag:[],trimOffset:[],untrimmedSize:[]}};ss.__name__="de polygonal zz render texture TextureAtlasFormat".split(" "),ss.prototype={getData:function(){return this.mTextureAtlasData},__class__:ss};var ns=function(t){ss.call(this);var e=this.mTextureAtlasData;try{var i=new Rs(W.parse(t).firstElement());this.charSet=new rs,this.charSet.renderedSize=oe.abs(X.parseInt(i.node.resolve("info").att.resolve("size"))),this.charSet.lineHeight=X.parseInt(i.node.resolve("common").att.resolve("lineHeight")),this.charSet.base=X.parseInt(i.node.resolve("common").att.resolve("base")),this.charSet.textureW=X.parseInt(i.node.resolve("common").att.resolve("scaleW")),this.charSet.textureH=X.parseInt(i.node.resolve("common").att.resolve("scaleH")),e.width=this.charSet.textureW,e.height=this.charSet.textureH;var s=32767;t=-1;for(var n=i.node.resolve("chars").nodes.resolve("char").iterator();n.hasNext();){var a=n.next(),r=X.parseInt(a.att.resolve("id"));r>t&&(t=r),s>r&&(s=r)}for(n=0;t>n;){var o=n++;e.rectList[o]=new $i(0,0,1,1),e.nameList[o]="undefined"}for(var _=i.node.resolve("chars").nodes.resolve("char").iterator();_.hasNext();){var l=_.next(),h=X.parseInt(l.att.resolve("id")),u=new as;if(u.code=h,u.x=X.parseInt(l.att.resolve("x")),u.y=X.parseInt(l.att.resolve("y")),u.offX=X.parseInt(l.att.resolve("xoffset")),u.offY=X.parseInt(l.att.resolve("yoffset")),u.stepX=X.parseInt(l.att.resolve("xadvance")),u.w=X.parseInt(l.att.resolve("width")),u.h=X.parseInt(l.att.resolve("height")),this.charSet.characters[u.code]=u,-1!=h){var c=new $i(u.x,u.y,u.w,u.h);e.rectList[h]=c,e.nameList[h]=String.fromCharCode(h)}}if(i.hasNode.resolve("kernings"))for(var m=i.node.resolve("kernings").nodes.resolve("kerning").iterator();m.hasNext();){var d=m.next(),p=X.parseInt(d.att.resolve("first")),f=X.parseInt(d.att.resolve("second")),g=X.parseInt(d.att.resolve("amount"));this.charSet.kerning.set(f<<16|p,g)}}catch(b){}};ns.__name__="de polygonal zz render texture format BmFontFormat".split(" "),ns.__super__=ss,ns.prototype=e(ss.prototype,{__class__:ns});var as=function(){this.x=this.y=this.offX=this.offY=this.stepX=this.w=this.h=0,this.code=-1};as.__name__="de polygonal zz render texture format BitmapChar".split(" "),as.prototype={__class__:as};var rs=function(){this.characters=Ze.alloc(256),Ze.assign(this.characters,as,[],256),this.kerning=new mi(4096)};rs.__name__="de polygonal zz render texture format BitmapCharSet".split(" "),rs.prototype={__class__:rs};var os=function(t){ss.call(this),t=JSON.parse(t);for(var e=B.field(t,"frames"),i=0;i<e.length;){var s=e[i];++i,this.mTextureAtlasData.rectList.push(this.toRect(s.frame)),this.mTextureAtlasData.nameList.push(s.filename)}t=B.field(t,"meta"),this.mTextureAtlasData.width=t.size.w,this.mTextureAtlasData.height=t.size.h,this.mTextureAtlasData.scale=t.scale};os.__name__="de polygonal zz render texture format JsonArrayFormat".split(" "),os.__super__=ss,os.prototype=e(ss.prototype,{toRect:function(t){return new $i(t.x,t.y,t.w,t.h)},__class__:os});var _s={__ename__:!0,__constructs__:"Zero One DestinationColor OneMinusDestinationColor SourceAlpha OneMinusSourceAlpha DestinationAlpha OneMinusDestinationAlpha".split(" "),Zero:["Zero",0]};_s.Zero.toString=n,_s.Zero.__enum__=_s,_s.One=["One",1],_s.One.toString=n,_s.One.__enum__=_s,_s.DestinationColor=["DestinationColor",2],_s.DestinationColor.toString=n,_s.DestinationColor.__enum__=_s,_s.OneMinusDestinationColor=["OneMinusDestinationColor",3],_s.OneMinusDestinationColor.toString=n,_s.OneMinusDestinationColor.__enum__=_s,_s.SourceAlpha=["SourceAlpha",4],_s.SourceAlpha.toString=n,_s.SourceAlpha.__enum__=_s,_s.OneMinusSourceAlpha=["OneMinusSourceAlpha",5],_s.OneMinusSourceAlpha.toString=n,_s.OneMinusSourceAlpha.__enum__=_s,_s.DestinationAlpha=["DestinationAlpha",6],_s.DestinationAlpha.toString=n,_s.DestinationAlpha.__enum__=_s,_s.OneMinusDestinationAlpha=["OneMinusDestinationAlpha",7],_s.OneMinusDestinationAlpha.toString=n,_s.OneMinusDestinationAlpha.__enum__=_s;var ls={__ename__:!0,__constructs__:"Zero One SourceColor OneMinusSourceColor SourceAlpha OneMinusSourceAlpha DestinationAlpha OneMinusDestinationAlpha".split(" "),Zero:["Zero",0]};ls.Zero.toString=n,ls.Zero.__enum__=ls,ls.One=["One",1],ls.One.toString=n,ls.One.__enum__=ls,ls.SourceColor=["SourceColor",2],ls.SourceColor.toString=n,ls.SourceColor.__enum__=ls,ls.OneMinusSourceColor=["OneMinusSourceColor",3],ls.OneMinusSourceColor.toString=n,ls.OneMinusSourceColor.__enum__=ls,ls.SourceAlpha=["SourceAlpha",4],ls.SourceAlpha.toString=n,ls.SourceAlpha.__enum__=ls,ls.OneMinusSourceAlpha=["OneMinusSourceAlpha",5],ls.OneMinusSourceAlpha.toString=n,ls.OneMinusSourceAlpha.__enum__=ls,ls.DestinationAlpha=["DestinationAlpha",6],ls.DestinationAlpha.toString=n,ls.DestinationAlpha.__enum__=ls,ls.OneMinusDestinationAlpha=["OneMinusDestinationAlpha",7],ls.OneMinusDestinationAlpha.toString=n,ls.OneMinusDestinationAlpha.__enum__=ls;
var hs=function(t){this.type=t,this.index=t[1],this.flags=1<<this.index,this.next=null};hs.__name__=["de","polygonal","zz","scene","GlobalState"],hs.prototype={__class__:hs};var us={__ename__:!0,__constructs__:["Alpha"],Alpha:["Alpha",0]};us.Alpha.toString=n,us.Alpha.__enum__=us;var cs=function(t,e){hs.call(this,us.Alpha),this.src=t,this.dst=e;var i=H.getEnumConstructs(us).length;this.flags|=1<<t[1]+i,this.flags|=1<<e[1]+i+8};cs.__name__=["de","polygonal","zz","scene","AlphaState"],cs.__super__=hs,cs.prototype=e(hs.prototype,{__class__:cs});var ms=function(){this.minX=this.minY=this.maxX=this.maxY=0,this.mTmpVec=new le};ms.__name__=["de","polygonal","zz","scene","Bv"],ms.prototype={free:function(){this.mTmpVec=null},__class__:ms};var ds=function(){this.viewMatrix=new re,this.position=new le,this.planeCullState=15,this._tmpVec=new le};ds.__name__=["de","polygonal","zz","scene","Camera"],ds.prototype={setRenderer:function(t){this._renderer=t},__class__:ds};var ps={__ename__:!0,__constructs__:["CullDynamic","CullAlways","CullNever"],CullDynamic:["CullDynamic",0]};ps.CullDynamic.toString=n,ps.CullDynamic.__enum__=ps,ps.CullAlways=["CullAlways",1],ps.CullAlways.toString=n,ps.CullAlways.__enum__=ps,ps.CullNever=["CullNever",2],ps.CullNever.toString=n,ps.CullNever.__enum__=ps;var fs=function(){};fs.__name__=["de","polygonal","zz","scene","GlobalStateStack"],fs.clrStacks=function(){for(var t=0,e=fs._numStates;e>t;){var i=t++;fs._stacks[i].clear(null)}},fs.initStacks=function(){fs._numStates=H.getEnumConstructs(us).length,fs._stacks=Array(fs._numStates);for(var t=0,e=fs._numStates;e>t;){var i=t++,s=new ti;fs._stacks[i]=s}};var gs=function(t){this.mControllers=null,this.name=t,this.key=_i._counter++,this.local=new vs,this.world=new vs,this.worldBound=new ms,this.mFlags=0};gs.__name__=["de","polygonal","zz","scene","Spatial"],gs.__interfaces__=[te],gs.__super__=Yi,gs.prototype=e(Yi.prototype,{free:function(){null!=this.parent&&this.parent.removeChild(this),this.mSibling=this.parent=null,this.local.free(),this.local=null,this.world.free(),this.world=null,this.worldBound.free(),this.worldBound=null,this.removeAllGlobalStates(),this.effect=null,this.mFlags=0,this.set_userData(null),this._next=null},get_userData:function(){return this.mUserData},set_userData:function(t){return this.mUserData=t},get_cullingMode:function(){return 0!=(1&this.mFlags)?ps.CullAlways:0!=(2&this.mFlags)?ps.CullNever:ps.CullDynamic},set_cullingMode:function(t){switch(t[1]){case 0:this.mFlags&=-4;break;case 1:this.mFlags&=-3,this.mFlags|=1;break;case 2:this.mFlags|=2,this.mFlags&=-2}return t},draw:function(){},cull:function(t,e){if(this.get_cullingMode()!=ps.CullAlways){var i=t.mCamera,s=i.planeCullState;e&&this.draw(t,e),i.planeCullState=s}},onGetVisibleSet:function(t,e){if(0==(1&this.mFlags)){0!=(6&this.mFlags)&&(e=!0);var i=t.mPlaneCullState;(e||t.isVisible(this.worldBound))&&(this.mFlags|=4,this.getVisibleSet(t,e)),t.mPlaneCullState=i}},getVisibleSet:function(){},updateGeometricState:function(t,e){null==e&&(e=!0),this.updateWorldData(),e&&this.propagateBoundToRoot()},updateWorldData:function(){this.mFlags&=-33,0<(8&this.mFlags)||(null!=this.parent?this.world.product2(this.parent.world,this.local):this.world.set(this.local))},propagateBoundToRoot:function(){null!=this.parent&&this.parent.propagateBoundToRoot()},updateRenderState:function(t){var e=null==t;e?(null==fs._stacks&&fs.initStacks(),t=fs._stacks,this.propageStateFromRoot(t)):this.pushState(t),this.propagateRenderStateUpdate(t),e?fs.clrStacks():this.popState(t)},removeAllGlobalStates:function(){for(var t,e=this.mGlobalState;null!=e;)t=e.next,e.next=null,e=t;this.mGlobalState=null},propageStateFromRoot:function(t){null!=this.parent&&this.parent.propageStateFromRoot(t),this.pushState(t)},propagateRenderStateUpdate:function(){throw""},pushState:function(t){for(var e=this.mGlobalState;null!=e;)t[e.index].push(e),e=e.next},popState:function(t){for(var e=this.mGlobalState;null!=e;)t[e.index].pop(),e=e.next},__class__:gs});var bs=function(t){gs.call(this,t),this.mFlags|=64,this.child=null,this.numChildren=0};bs.__name__=["de","polygonal","zz","scene","Node"],bs.__super__=gs,bs.prototype=e(gs.prototype,{free:function(){gs.prototype.free.call(this),this.child=null},draw:function(t,e){if(null==this.effect)for(var i=this.child;null!=i;)i.cull(t,e),i=i.mSibling;else t.drawNode(this)},getVisibleSet:function(t,e){for(var i=this.child;null!=i;)i.onGetVisibleSet(t,e),i=i.mSibling},addChild:function(t){if(null==this.child)this.child=t,t.mSibling=null;else{for(var e=this.child;null!=e.mSibling;)e=e.mSibling;e.mSibling=t}return t.parent=this,this.numChildren++,this},removeChild:function(t){if(this.child==t)this.child=t.mSibling;else{for(var e=this.child;e.mSibling!=t;)e=e.mSibling;e.mSibling=t.mSibling}return t.mSibling=null,t.parent=null,this.numChildren--,this},getChildAt:function(t){for(var e=this.child,i=0;t>=i;){if(i==t)return e;e=e.mSibling,i++}return null},getChildByName:function(t){for(var e=this.child;null!=e;){if(e.name==t)return e;e=e.mSibling}return null},updateWorldData:function(){gs.prototype.updateWorldData.call(this);for(var t=this.child;null!=t;)t.updateGeometricState(0,!1),t=t.mSibling},propagateRenderStateUpdate:function(t){for(var e=this.child;null!=e;)e.updateRenderState(t),e=e.mSibling},__class__:bs});var ws=function(t){gs.call(this,t),this.mFlags|=128,this.modelBound=new ms,this.updateModelBound()};ws.__name__=["de","polygonal","zz","scene","Visual"],ws.__super__=gs,ws.prototype=e(gs.prototype,{free:function(){this.modelBound.free(),this.modelBound=null,null!=this.states&&(this.states.free(),this.states=null),gs.prototype.free.call(this)},updateModelBound:function(){throw""},getVisibleSet:function(t){t.mVisibleSet.pushBack(this)},propagateRenderStateUpdate:function(t){if(null==this.states){var e=H.getEnumConstructs(us).length;this.states=new ii(e,e),this.states.fill(null,e)}for(var e=this.stateFlags=0,i=t.length;i>e;){var s=e++,n=t[s];0!=n._top&&(n=n._a[n._top-1],this.states.set(s,n),this.stateFlags|=n.flags)}},__class__:ws});var vs=function(){this._scale=new le,this._translate=new le,this._matrix=new ae,this._bits=0,this._matrix.setIdentity(),this._translate.zero(),this._scale.x=1,this._scale.y=1,this._scale.z=1,this._bits|=31};vs.__name__=["de","polygonal","zz","scene","XForm"],vs.prototype={free:function(){this._matrix=this._translate=this._scale=null},setScale:function(t,e,i){return this._scale.x=t,this._scale.y=e,this._scale.z=i,this._bits&=-14,this},setUniformScale2:function(t){return this._scale.x=t,this._scale.y=t,this._bits&=-10,this._bits|=4,this._bits=1==t?8|this._bits:-9&this._bits,this},setTranslate:function(t,e,i){return this._translate.x=t,this._translate.y=e,this._translate.z=i,this._bits&=-2,this},setTranslate2:function(t,e){return this._translate.x=t,this._translate.y=e,this._bits&=-2,this},set:function(t){return this._translate.set(t._translate),this._scale.set(t._scale),this._matrix.set(t._matrix),this._bits=t._bits,this},applyInverse2:function(t,e){if(0!=(1&this._bits))e.x=t.x,e.y=t.y;else{var i=this._translate,s=t.x-i.x,i=t.y-i.y;if(0!=(2&this._bits)){var n=this._matrix;e.x=(s*n.m11+i*n.m21)/this._scale.x,e.y=(s*n.m12+i*n.m22)/this._scale.y}else{var a=this._matrix,s=a.m11,i=a.m12,n=a.m21,a=a.m22,r=s*a-i*n;if((0>r?-r:r)>1e-8){var r=1/r,o=e.x,_=e.y;e.x=a*r*o+-i*r*_,e.y=-n*r*o+s*r*_}else e.x=e.y=0}}return e},product2:function(t,e){if(0!=(1&t._bits))return this._translate.set(e._translate),this._scale.set(e._scale),this._matrix.set(e._matrix),this._bits=e._bits,this;if(0!=(1&e._bits))return this._translate.set(t._translate),this._scale.set(t._scale),this._matrix.set(t._matrix),this._bits=t._bits,this;if(6==(6&t._bits)&&0!=(2&e._bits)){var i,s,n=t._matrix,a=e._matrix,r=this._matrix,o=a.m11,_=a.m12,l=a.m21,a=a.m22;return i=n.m11,s=n.m12,r.m11=i*o+s*l,r.m12=i*_+s*a,i=n.m21,s=n.m22,r.m21=i*o+s*l,r.m22=i*_+s*a,i=n.m31,s=n.m32,r.m31=i*o+s*l,r.m32=i*_+s*a,r=t._translate,l=e._translate,o=this._translate,_=l.x,l=l.y,o.x=n.m11*_+n.m12*l,o.y=n.m21*_+n.m22*l,n=t._scale.x,o.x=o.x*n+r.x,o.y=o.y*n+r.y,0!=(4&e._bits)?(n*=e._scale.x,this._scale.x=n,this._scale.y=n,this._bits&=-2,this._bits|=6,this._bits=1==n?8|this._bits:-9&this._bits):(r=e._scale,this._scale.x=n*r.x,this._scale.y=n*r.y,this._bits&=-14,this._bits|=2),this}return n=t._matrix,r=e._matrix,0!=(2&t._bits)&&(o=t._scale.x,_=t._scale.y,l=vs._tmpMat1,l.m11=n.m11*o,l.m12=n.m12*_,l.m21=n.m21*o,l.m22=n.m22*_,n=l),0!=(2&e._bits)&&(o=e._scale.x,_=e._scale.y,l=vs._tmpMat2,l.m11=r.m11*o,l.m12=r.m12*_,l.m21=r.m21*o,l.m22=r.m22*_,r=l),o=r.m11,_=r.m12,l=r.m21,r=r.m22,a=this._matrix,i=n.m11,s=n.m12,a.m11=i*o+s*l,a.m12=i*_+s*r,i=n.m21,s=n.m22,a.m21=i*o+s*l,a.m22=i*_+s*r,r=this._translate,o=t._translate,l=e._translate,_=l.x,l=l.y,r.x=n.m11*_+n.m12*l+o.x,r.y=n.m21*_+n.m22*l+o.y,this._bits&=-16,this},__class__:vs};var Ss=function(t){ws.call(this,t)};Ss.__name__="de polygonal zz scene geometry Quad".split(" "),Ss.__super__=ws,Ss.prototype=e(ws.prototype,{draw:function(t){t.drawQuad(this)},updateModelBound:function(){this.modelBound.minX=0,this.modelBound.minY=0,this.modelBound.maxX=1,this.modelBound.maxY=1},__class__:Ss});var ys={__ename__:!0,__constructs__:["Center","Left","Right"],Center:["Center",0]};ys.Center.toString=n,ys.Center.__enum__=ys,ys.Left=["Left",1],ys.Left.toString=n,ys.Left.__enum__=ys,ys.Right=["Right",2],ys.Right.toString=n,ys.Right.__enum__=ys;var xs=function(t,e){this.mAlpha=1,this.mNumQuads=0,this.monoSpaceWidth=this.mNextCode=-1,this.applyKerning=!0,this.tracking=this.leading=0,_.call(this,new bs),this.node=this.spatial,this.mAtlas=zi.getAtlas(t),null!=e&&e.addChild(this),this.mStringList=new ii,this.mQuads=[]};xs.__name__=["de","polygonal","zz","sprite","SpriteFont"],xs.__super__=_,xs.prototype=e(_.prototype,{free:function(){_.prototype.free.call(this);for(var t=this.node.child;null!=t;){var e=t.mSibling;t.free(),t=e}this.mLastBound=this.mQuads=this.mStringList=this.mAtlas=this.node=null},get_alpha:function(){return this.mAlpha},set_alpha:function(t){return this.mAlpha=t},addString:function(t,e,i,s){null==s&&(s=0);var n=this.mAtlas.getFormat();return 0==s&&(s=n.charSet.renderedSize),t=new Cs(t,e,i,s,this.applyKerning),this.mStringList.pushBack(t),this.mNumQuads=this.processQuads(t),this.mDirty=!0,this.mStringList._size-1},applyChanges:function(){if(_.prototype.applyChanges.call(this),this.mDirty){this.mDirty=!1;for(var t=0,e=this.mQuads.length;e>t;){var i=t++;this.mQuads[i].parent==this.node&&this.node.removeChild(this.mQuads[i])}for(t=0,e=this.mNumQuads;e>t;){var i=t++,i=this.mQuads[i],s=i.bitmapChar;-1!=s.code&&(this.node.addChild(i),i.local.setTranslate(i.bound.minX,i.bound.minY,0),i.local.setScale(s.w*i.sizeScale,s.h*i.sizeScale,1),Us.__cast(i.effect,qi).setFrameIndex(s.code))}for(this.node.updateGeometricState(0),this.node.updateRenderState(),t=0,e=this.mNumQuads;e>t;)i=t++,this.mQuads[i].effect.set_alpha(this.mAlpha)}},processQuads:function(t){for(var e=Us.__cast(this.mAtlas.getFormat(),ns).charSet,i=this.mQuads,s=0,n=t.bound.minX,a=t.bound.minY,r=0,o=t.size/e.renderedSize,_=t.bound.get_intervalX(),l=0,h=1,u=1,c=0,m=!0,p=t.text,f=t.align,g=0,b=p.length;b>g;){var w=g++,v=d.cca(p,w);p.charAt(w);var S,y=e.characters[v],x=y.offX*o,C=y.offY*o;S=(-1==this.monoSpaceWidth?y.stepX:this.monoSpaceWidth)*o+this.tracking;var B=y.w*o,T=y.h*o;if(a+C+T>t.bound.maxY)break;if(10==v||13==v||r+S>=_){switch(f[1]){case 1:n=t.bound.minX;break;case 2:n=t.bound.minX+.5*_;break;case 0:n=t.bound.maxX}var a=a+(e.lineHeight+this.leading)*o,I=0;if(r+S>=_&&1!=u){for(var E=0,A=r=0;s>A;){var k=A++,k=i[k],N=k.bitmapChar;switch(f[1]){case 1:k.lineNumber==h&&k.wordNumber==u&&(k.lineNumber++,k.wordNumber=1,k.set_minX(n+N.offX*o),k.set_minY(a+N.offY*o),n+=N.stepX*o,r+=N.stepX*o,t.kerning&&(this.mNextCode=k.character,E=e.kerning.get(this.mNextCode<<16|E),-2147483648!=E&&(n+=E*o,r+=E*o)));break;case 0:k.lineNumber==h&&k.wordNumber==u&&(k.lineNumber++,k.wordNumber=1,k.set_minX(n+N.offX*o),k.set_minY(a+N.offY*o),n+=N.stepX*o,r+=N.stepX*o,I+=N.stepX*o*.5,t.kerning&&(this.mNextCode=k.character,E=e.kerning.get(this.mNextCode<<16|E),-2147483648!=E&&(E*=o,n+=E,r+=E,I+=.5*E)));break;case 2:k.lineNumber==h&&k.wordNumber==u&&(k.lineNumber++,k.wordNumber=1,k.set_minX(n+N.offX*o),k.set_minY(a+N.offY*o),r+=N.stepX*o,n+=N.stepX*o,I+=N.stepX*o,t.kerning&&(this.mNextCode=k.character,E=e.kerning.get(this.mNextCode<<16|E),-2147483648!=E&&(E*=o,n+=E,r+=E,I+=E)))}E=k.character}switch(f[1]){case 0:case 2:for(u=0;s>u;)A=u++,A=i[A],A.lineNumber==h+1&&A.set_minX(A.bound.minX-I);for(n-=I,u=0;s>u;)A=u++,A=i[A],A.lineNumber==h&&A.set_minX(A.bound.minX+I)}}else m=!0,r=0;u=1,h++}if(10!=v&&13!=v&&9!=v){if(m)switch(f[1]){case 1:n=t.bound.minX;break;case 0:n=t.bound.minX+.5*_;break;case 2:n=t.bound.maxX}switch(I=0,t.kerning&&!m&&(this.mNextCode=d.cca(p,w),m=e.kerning.get(this.mNextCode<<16|l),-2147483648!=m&&(I=m*o,n+=I,r+=I,c+=I)),m=!1,32==v&&f==ys.Right&&(u++,c=0),c+=S,l=i[s],null==l&&(l=new Bs,l.effect=new qi(this.mAtlas),i[s]=l),s++,A=l.bound,A.minX=n+x,A.minY=a+C,A.maxX=A.minX+B,A.maxY=A.minY+T,l.lineNumber=h,l.wordNumber=u,l.wordWidth=c,l.bitmapChar=y,l.sizeScale=o,l.character=d.cca(p,w),32==v&&f==ys.Left&&(u++,c=0),n+=S,r+=S,l=d.cca(p,w),f[1]){case 0:for(S*=.5,t.kerning&&(S+=.5*I),w=0;s>w;)v=w++,v=i[v],v.lineNumber==h&&v.set_minX(v.bound.minX-S);n-=S;break;case 2:for(w=0,t.kerning&&(w+=I),v=0;s>v;)y=v++,y=i[y],y.lineNumber==h&&(w=S,y.set_minX(y.bound.minX-S));n-=w}}}return s},__class__:xs});var Cs=function(t,e,i,s,n){this.text=t,this.bound=e,this.align=i,this.size=s,this.kerning=n};Cs.__name__="de polygonal zz sprite _SpriteFont StringBlock".split(" "),Cs.prototype={__class__:Cs};var Bs=function(){ws.call(this,void 0),this.bound=new xi};Bs.__name__="de polygonal zz sprite _SpriteFont FontQuad".split(" "),Bs.__super__=Ss,Bs.prototype=e(Ss.prototype,{free:function(){Ss.prototype.free.call(this),this.bound=this.bitmapChar=null},set_minX:function(t){return this.bound.setMinX(t),t},set_minY:function(t){return this.bound.setMinY(t),t},__class__:Bs});var Ts=function(t,e){_.call(this,new bs(t)),this.node=this.spatial,null!=e&&e.addChild(this)};Ts.__name__=["de","polygonal","zz","sprite","SpriteGroup"],Ts.__super__=_,Ts.prototype=e(_.prototype,{applyChanges:function(){if(_.prototype.applyChanges.call(this),0!=(128&this.mFlags))for(var t=0,e=this.mDescendants;t<e.length;){var i=e[t];++t,0<(1&i.mFlags)&&(i.syncLocalXform(),i.mFlags&=-2)}else for(t=this.node.child;null!=t;)Us.__cast(t.mUserData,_).applyChanges(),t=t.mSibling},free:function(){this.node=null,_.prototype.free.call(this)},addChild:function(t){return this.node.addChild(t.spatial),this},removeChild:function(t){return this.node.removeChild(t.spatial),this},getChildAt:function(t){return Us.__cast(this.node.getChildAt(t).get_userData(),_)},getChildByName:function(t){return Us.__cast(this.node.getChildByName(t).get_userData(),_)},getChildren:function(t){for(var e=this.node.child,i=0,s=this.node.numChildren;s>i;){var n=i++;t[n]=e.mUserData,e=e.mSibling}return t},iterator:function(){var t=this.node.child;return{hasNext:function(){return null!=t},next:function(){var e=t.mUserData;return t=t.mSibling,e}}},freeChildren:function(){for(var t=this.node.child;null!=t;){var e=t.mSibling;Us.__cast(t.mUserData,_).free(),t=e}this.mFlags&=-129,this.mDescendants=[]},get_width:function(){this.node.updateGeometricState(0);var t=this.node.worldBound;return t.maxX-t.minX},set_width:function(t){var e=this.get_width();return this.set_scaleX(t/e),t},get_height:function(){this.node.updateGeometricState(0);var t=this.node.worldBound;return t.maxY-t.minY},set_height:function(t){var e=this.get_height();return this.set_scaleY(t/e),t},syncLocalXform:function(){_.prototype.syncLocalXform.call(this);var t=this.node.local;t._matrix.setIdentity(),t._translate.zero(),t._scale.x=1,t._scale.y=1,t._scale.z=1,t._bits|=31;var e=.017453292519943295*this.mRotationDeg,i=Math.sin(e),e=Math.cos(e),s=this.mScaleX,n=this.mScaleY,a=s*this.mPivotX,r=n*this.mPivotY;s==n?(t._scale.x=s,t._scale.y=s,t._bits&=-10,t._bits|=4,t._bits=1==s?8|t._bits:-9&t._bits):(t._scale.x=s,t._scale.y=n,t._scale.z=1,t._bits&=-14),s=t._matrix,s.m11=e,s.m12=-i,s.m21=i,s.m22=e,t._translate.x=-(a*e)+r*i+this.mPivotX+this.mX,t._translate.y=-(a*i)-r*e+this.mPivotY+this.mY,t._translate.z=1,t._bits&=-2},__class__:Ts});var Is=function(){};Is.__name__=["de","polygonal","zz","sprite","SpriteTools"],Is.tick=function(t,e){var i=Is.mStack;i[0]=t.node;for(var s,n=1;0!=n;)if(s=i[--n],i[n]=null,Us.__cast(s.mUserData,_).tick(e),0<(64&s.mFlags))for(s=s.child;null!=s;)i[n++]=s,s=s.mSibling};var Es=function(){Vi.call(this),this.active=!1};Es.__name__=["de","polygonal","zz","sprite","SpriteTweenController"],Es.__super__=Vi,Es.prototype=e(Vi.prototype,{free:function(){Vi.prototype.free.call(this),this.mInterpolation=this.mSpriteBase=null},tween:function(t,e,i,s,n){switch(this.appTime=ge.appTime,this._onComplete=n,this.field=t,t[1]){case 0:this.mSrcVal=this.mSpriteBase.mX;break;case 1:this.mSrcVal=this.mSpriteBase.mY;break;case 2:this.mSrcVal=this.mSpriteBase.mScaleX;break;case 3:this.mSrcVal=this.mSpriteBase.mScaleY;break;case 4:this.mSrcVal=this.mSpriteBase.mScaleX;break;case 5:this.mSrcVal=this.mSpriteBase.mRotationDeg;break;case 6:this.mSrcVal=this.mSpriteBase.get_alpha()}this.mDstVal=e,this.minTime=ge.appTime,this.maxTime=this.minTime+i,this.mInterpolation=Oe.create(null==s?Le.None:s),this.active=!0,this.mDisposeTime=this.maxTime+10},setObject:function(t){Vi.prototype.setObject.call(this,t),this.mSpriteBase=Us.__cast(t,gs).get_userData()},onUpdate:function(t){if(t>=this.maxTime&&this.repeat==Hi.Clamp)return this.active=!1,this.free(),null!=this._onComplete&&(this._onComplete(),this._onComplete=null),!1;switch(t=(this.getControlTime()-this.minTime)/(this.maxTime-this.minTime),t=oe.lerp(this.mSrcVal,this.mDstVal,this.mInterpolation.interpolate(t)),this.field[1]){case 0:this.mSpriteBase.set_x(t);break;case 1:this.mSpriteBase.set_y(t);break;case 2:this.mSpriteBase.set_scaleX(t);break;case 3:this.mSpriteBase.set_scaleY(t);break;case 4:this.mSpriteBase.set_scaleX(this.mSpriteBase.set_scaleY(t));break;case 5:this.mSpriteBase.set_rotation(t);break;case 6:this.mSpriteBase.set_alpha(t)}return!0},__class__:Es});var As={__ename__:!0,__constructs__:"X Y ScaleX ScaleY Scale Rotation Alpha".split(" "),X:["X",0]};As.X.toString=n,As.X.__enum__=As,As.Y=["Y",1],As.Y.toString=n,As.Y.__enum__=As,As.ScaleX=["ScaleX",2],As.ScaleX.toString=n,As.ScaleX.__enum__=As,As.ScaleY=["ScaleY",3],As.ScaleY.toString=n,As.ScaleY.__enum__=As,As.Scale=["Scale",4],As.Scale.toString=n,As.Scale.__enum__=As,As.Rotation=["Rotation",5],As.Rotation.toString=n,As.Rotation.__enum__=As,As.Alpha=["Alpha",6],As.Alpha.toString=n,As.Alpha.__enum__=As;var ks=function(t,e){this.high=0|t,this.low=0|e};ks.__name__=["haxe","Int64"],ks.sub=function(t,e){var i=t.high-e.high|0,s=t.low-e.low|0;return 0>ks.uicompare(t.low,e.low)&&i--,new ks(i,s)},ks.divMod=function(t,e){var i=new ks(0,0),s=0,n=1;for(e=new ks(e.high,e.low);0<=e.high;){var a=ks.ucompare(e,t);if(e.high=e.high<<1|0|e.low>>>31|0,e.low=e.low<<1|0,s=s<<1|0|n>>>31|0,n=n<<1|0,a>=0)break}for(;0!=(n|s|0);)0<=ks.ucompare(t,e)&&(i.high=i.high|s|0,i.low=i.low|n|0,t=ks.sub(t,e)),n=n>>>1|s<<31|0,s>>>=1,e.low=e.low>>>1|e.high<<31|0,e.high>>>=1;return{quotient:i,modulus:t}},ks.neg=function(t){var e=0|~t.high;return t=0|-t.low,0==t&&e++,new ks(e,t)},ks.uicompare=function(t,e){return 0>t?0>e?~e-~t|0:1:0>e?-1:t-e|0},ks.ucompare=function(t,e){var i=ks.uicompare(t.high,e.high);return 0!=i?i:ks.uicompare(t.low,e.low)},ks.prototype={toString:function(){if(0==(this.high|this.low))return"0";var t="",e=!1,i=this;0>i.high&&(e=!0,i=ks.neg(i));for(var s=new ks(0,10);0!=(i.high|i.low);)i=ks.divMod(i,s),t=i.modulus.low+t,i=i.quotient;return e&&(t="-"+t),t},__class__:ks};var Ns=function(){};Ns.__name__=["haxe","Timer"],Ns.stamp=function(){return(new Date).getTime()/1e3};var Ls=function(){this.h={}};Ls.__name__=["haxe","ds","IntMap"],Ls.__interfaces__=[S],Ls.prototype={set:function(t,e){this.h[t]=e},get:function(t){return this.h[t]},exists:function(t){return this.h.hasOwnProperty(t)},remove:function(t){return this.h.hasOwnProperty(t)?(delete this.h[t],!0):!1},keys:function(){var t,e=[];for(t in this.h)this.h.hasOwnProperty(t)&&e.push(0|t);return d.iter(e)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var t=this.it.next();return this.ref[t]}}},__class__:Ls};var Os=function(t){this.__x=t};Os.__name__=["haxe","xml","_Fast","NodeAccess"],Os.prototype={resolve:function(t){var e=this.__x.elementsNamed(t).next();if(null==e)throw(this.__x.nodeType==W.Document?"Document":this.__x.get_nodeName())+" is missing element "+t;return new Rs(e)},__class__:Os};var Ms=function(t){this.__x=t};Ms.__name__=["haxe","xml","_Fast","AttribAccess"],Ms.prototype={resolve:function(t){if(this.__x.nodeType==W.Document)throw""+t;var e=this.__x.get(t);if(null==e)throw this.__x.get_nodeName()+" is missing attribute "+t;return e},__class__:Ms};var Ps=function(t){this.__x=t};Ps.__name__=["haxe","xml","_Fast","HasAttribAccess"],Ps.prototype={__class__:Ps};var Fs=function(t){this.__x=t};Fs.__name__=["haxe","xml","_Fast","HasNodeAccess"],Fs.prototype={resolve:function(t){return this.__x.elementsNamed(t).hasNext()},__class__:Fs};var Ds=function(t){this.__x=t};Ds.__name__=["haxe","xml","_Fast","NodeListAccess"],Ds.prototype={resolve:function(t){var e=new b;for(t=this.__x.elementsNamed(t);t.hasNext();){var i=t.next();e.add(new Rs(i))}return e},__class__:Ds};var Rs=function(t){if(t.nodeType!=W.Document&&t.nodeType!=W.Element)throw""+X.string(t.nodeType);this.x=t,this.node=new Os(t),this.nodes=new Ds(t),this.att=new Ms(t),this.has=new Ps(t),this.hasNode=new Fs(t)};Rs.__name__=["haxe","xml","Fast"],Rs.prototype={__class__:Rs};var zs=function(){};zs.__name__=["haxe","xml","Parser"],zs.parse=function(t){var e=W.createDocument();return zs.doParse(t,0,e),e},zs.doParse=function(t,e,i){null==e&&(e=0);for(var s=null,n=1,a=1,r=null,o=0,_=0,l=0,h=t.charCodeAt(e),u=new Y;h==h;){switch(n){case 0:switch(h){case 10:case 13:case 9:case 32:break;default:n=a;continue}break;case 1:switch(h){case 60:n=0,a=2;break;default:o=e,n=13;continue}break;case 13:60==h?(a=W.createPCData(u.b+d.substr(t,o,e-o)),u=new Y,i.addChild(a),_++,n=0,a=2):38==h&&(u.addSub(t,o,e-o),n=18,a=13,o=e+1);break;case 17:93==h&&93==t.charCodeAt(e+1)&&62==t.charCodeAt(e+2)&&(n=W.createCData(d.substr(t,o,e-o)),i.addChild(n),_++,e+=2,n=1);break;case 2:switch(h){case 33:if(91==t.charCodeAt(e+1)){if(e+=2,"CDATA["!=d.substr(t,e,6).toUpperCase())throw"";e+=5,n=17}else if(68==t.charCodeAt(e+1)||100==t.charCodeAt(e+1)){if("OCTYPE"!=d.substr(t,e+2,6).toUpperCase())throw"";e+=8,n=16}else{if(45!=t.charCodeAt(e+1)||45!=t.charCodeAt(e+2))throw"";e+=2,n=15}o=e+1;break;case 63:n=14,o=e;break;case 47:if(null==i)throw"";o=e+1,n=0,a=10;break;default:n=3,o=e;continue}break;case 3:if(!(h>=97&&122>=h||h>=65&&90>=h||h>=48&&57>=h||58==h||46==h||95==h||45==h)){if(e==o)throw"";s=W.createElement(d.substr(t,o,e-o)),i.addChild(s),n=0,a=4;continue}break;case 4:switch(h){case 47:n=11,_++;break;case 62:n=9,_++;break;default:n=5,o=e;continue}break;case 5:if(!(h>=97&&122>=h||h>=65&&90>=h||h>=48&&57>=h||58==h||46==h||95==h||45==h)){if(o==e)throw"";if(r=d.substr(t,o,e-o),s.exists(r))throw"";n=0,a=6;continue}break;case 6:switch(h){case 61:n=0,a=7;break;default:throw""}break;case 7:switch(h){case 34:case 39:n=8,o=e;break;default:throw'Expected "'}break;case 8:h==t.charCodeAt(o)&&(a=d.substr(t,o+1,e-o-1),s.set(r,a),n=0,a=4);break;case 9:o=e=zs.doParse(t,e,s),n=1;break;case 11:switch(h){case 62:n=1;break;default:throw""}break;case 12:switch(h){case 62:return 0==_&&i.addChild(W.createPCData("")),e;default:throw""}case 10:if(!(h>=97&&122>=h||h>=65&&90>=h||h>=48&&57>=h||58==h||46==h||95==h||45==h)){if(o==e)throw"";if(d.substr(t,o,e-o)!=i.get_nodeName())throw""+i.get_nodeName()+">";n=0,a=12;continue}break;case 15:45==h&&45==t.charCodeAt(e+1)&&62==t.charCodeAt(e+2)&&(i.addChild(W.createComment(d.substr(t,o,e-o))),e+=2,n=1);break;case 16:91==h?l++:93==h?l--:62==h&&0==l&&(i.addChild(W.createDocType(d.substr(t,o,e-o))),n=1);break;case 14:63==h&&62==t.charCodeAt(e+1)&&(e++,n=d.substr(t,o+1,e-o-2),i.addChild(W.createProcessingInstruction(n)),n=1);break;case 18:59==h&&(o=d.substr(t,o,e-o),35==o.charCodeAt(0)?(o=X.parseInt(120==o.charCodeAt(1)?"0"+d.substr(o,1,o.length-1):d.substr(o,1,o.length-1)),u.add(String.fromCharCode(o))):zs.escapes.exists(o)?u.add(zs.escapes.get(o)):u.b+=X.string("&"+o+";"),o=e+1,n=a)}h=V.fastCodeAt(t,++e)}if(1==n&&(o=e,n=13),13==n)return e==o&&0!=_||i.addChild(W.createPCData(u.b+d.substr(t,o,e-o))),e;throw""};var Us=function(){};Us.__name__=["js","Boot"],Us.getClass=function(t){if(t instanceof Array&&null==t.__enum__)return Array;var e=t.__class__;return null!=e?e:(t=Us.__nativeClassName(t),null!=t?Us.__resolveNativeClass(t):null)},Us.__string_rec=function(t,e){if(null==t)return"null";if(5<=e.length)return"<...>";var i=typeof t;switch("function"==i&&(t.__name__||t.__ename__)&&(i="object"),i){case"object":if(t instanceof Array){if(t.__enum__){if(2==t.length)return t[0];i=t[0]+"(",e+="	";for(var s=2,n=t.length;n>s;)var a=s++,i=2!=a?i+(","+Us.__string_rec(t[a],e)):i+Us.__string_rec(t[a],e);return i+")"}for(i=t.length,s="[",e+="	",n=0;i>n;)a=n++,s+=(a>0?",":"")+Us.__string_rec(t[a],e);return s+"]"}try{s=t.toString}catch(r){return"???"}if(null!=s&&s!=Object.toString&&(i=t.toString(),"[object Object]"!=i))return i;i=null,s="{\n",e+="	",n=null!=t.hasOwnProperty;for(i in t)n&&!t.hasOwnProperty(i)||"prototype"==i||"__class__"==i||"__super__"==i||"__interfaces__"==i||"__properties__"==i||(2!=s.length&&(s+=", \n"),s+=e+i+" : "+Us.__string_rec(t[i],e));return e=e.substring(1),s+("\n"+e+"}");case"function":return"<function>";case"string":return t;default:return String(t)}},Us.__interfLoop=function(t,e){if(null==t)return!1;if(t==e)return!0;var i=t.__interfaces__;if(null!=i)for(var s=0,n=i.length;n>s;){var a=s++,a=i[a];if(a==e||Us.__interfLoop(a,e))return!0}return Us.__interfLoop(t.__super__,e)},Us.__instanceof=function(t,e){if(null==e)return!1;switch(e){case Hs:return(0|t)===t;case Ws:return"number"==typeof t;case js:return"boolean"==typeof t;case String:return"string"==typeof t;case Array:return t instanceof Array&&null==t.__enum__;case Gs:return!0;default:if(null==t)return!1;if("function"==typeof e){if(t instanceof e||Us.__interfLoop(Us.getClass(t),e))return!0}else if("object"==typeof e&&Us.__isNativeObj(e)&&t instanceof e)return!0;return e==qs&&null!=t.__name__||e==Zs&&null!=t.__ename__?!0:t.__enum__==e}},Us.__cast=function(t,e){if(Us.__instanceof(t,e))return t;throw""+X.string(t)+" to "+X.string(e)},Us.__nativeClassName=function(t){return t=Us.__toStr.call(t).slice(8,-1),"Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t},Us.__isNativeObj=function(t){return null!=Us.__nativeClassName(t)},Us.__resolveNativeClass=function(t){return"undefined"!=typeof window?window[t]:{}};var Xs=function(){};Xs.__name__=["js","Browser"],Xs.getLocalStorage=function(){try{var t=window.localStorage;return t.getItem(""),t}catch(e){return null}};var Ys,Vs=0;Array.prototype.indexOf&&(d.indexOf=function(t,e,i){return Array.prototype.indexOf.call(t,e,i)}),String.prototype.__class__=String,String.__name__=["String"],Array.__name__=["Array"],Date.prototype.__class__=Date,Date.__name__=["Date"];var Hs={__name__:["Int"]},Gs={__name__:["Dynamic"]},Ws=Number;Ws.__name__=["Float"];var js=Boolean;js.__ename__=["Bool"];var qs={__name__:["Class"]},Zs={};W.Element="element",W.PCData="pcdata",W.CData="cdata",W.Comment="comment",W.DocType="doctype",W.ProcessingInstruction="processingInstruction",W.Document="document",o.NUM_BUBBLE_TYPES=7,o.BUBBLE_TYPE_UNDEFINED=-1,o.BUBBLE_TYPE_BLOCKER=0,o.BUBBLE_TYPE_COLOR1=1,o.BUBBLE_TYPE_COLOR2=2,o.BUBBLE_TYPE_COLOR3=3,o.BUBBLE_TYPE_COLOR4=4,o.BUBBLE_TYPE_COLOR5=5,o.BUBBLE_TYPE_COLOR6=6,o.MATCHES_NEEDED_TO_BURST=3,o.MIN_TICK_FRAMERATE=30,o.MAX_RECURSIONS=1,h.ANIM_APPEAR=1,h.ANIM_BURST=2,h.ANIM_SNAP=3,u.NUM_BOTTOM_BUBBLES=6,u.BUBBLE_ANIM_FRAME_APPEAR=2,u.BUBBLE_ANIM_FRAME_APPEAR_END=25,u.BUBBLE_ANIM_FRAME_IDLE=26,u.BUBBLE_ANIM_FRAME_IDLE_END=31,u.BUBBLE_ANIM_FRAME_BURST=32,u.BUBBLE_ANIM_FRAME_BURST_END=43,u.BUBBLE_ANIM_FRAME_SNAP=44,u.BUBBLE_ANIM_FRAME_SNAP_END=59,u.BUBBLE_TOUCH_MAX_BOUNCE_AMOUNT=.5,u.BUBBLE_TOUCH_DISTANCE_FALLOFF=1,u.BUBBLE_TOUCH_BOUNCE_IN_TIME=.125,u.BUBBLE_TOUCH_BOUNCE_OUT_TIME=1,u.BUBBLE_SNAP_TWEEN_DURATION=.25,u.BUBBLE_APPEAR_DURATION=.4,u.BUBBLE_BURST_INITIAL_DELAY=.01,u.BUBBLE_BURST_PER_BUBBLE_DELAY=.1,u.BUBBLE_BURST_SHRINK_DURATION=.5,u.BUBBLE_DROP_INITIAL_DELAY=.01,u.BUBBLE_DROP_PER_BUBBLE_DELAY=.1,u.VISUAL_BUBBLE_RADIUS_SCALE=1,u.SCORE_UPDATE_TWEEN_TIME=.25,u.SCORE_UPDATE_INITIAL_DELAY=.5,u.SCORE_UPDATE_PER_DIGIT_DELAY=.025,u.BONUS_SOUND_EVERY_BUBBLE=5,u.AIM_DOT_BASE_SIZE=.002,u.MIN_FREE_ROWS_FOR_KILLING_LINE=2,u.POSITION_CHANGE_TWEEN_DURATION=.5,u.SUPPORTED_LANGUAGES=["en","de"],u.DEFAULT_LANGUAGE="en",u.FORCE_LANGUAGE="",u.MORE_GAMES_URL=window.famobi.__("more_games_url"),u.NATIVE_WIDTH=640,u.NATIVE_HEIGHT=960,u.DEFAULT_SCREEN_FADE_IN_TIME=.4,u.DEFAULT_SCREEN_FADE_OUT_TIME=.4,u.NUM_FREE_ROWS=7,u.KILLING_LINE_ROW_OFFSET=-1.5,u.BUBBLE_SPACING_PERCENT=.1,u.BUBBLE_PADDING=.015,u.BUBBLE_SNEAK=.7,u.POINTS_PER_BUBBLE=[10,10,10,25,50,100,250,500,1e3],u.MAX_SAME_COLORS_IN_A_ROW=5,u.SHOOTER_COLOR_BUBBLE_SPEED=2.25,u.MAX_SHOOTING_ARM_ANGLE=80,u.NUM_LOCAL_HIGHSCORE_ENTRIES=6,u.LEVEL_SETTINGS=[{level:1,bubbles_per_row:11,max_rows:15,start_rows:7,misses_until_new_row:5,colors:[1,2,3,4,5,6]},{level:2,bubbles_per_row:20,max_rows:20,start_rows:10,misses_until_new_row:3,colors:[1,2,5]},{level:3,bubbles_per_row:10,max_rows:12,start_rows:6,misses_until_new_row:1,colors:[4,4]}],m.GAME_STATUS_STOPPED=0,m.GAME_STATUS_RUNNING=2,m.GAME_STATUS_PAUSED=3,m.GAME_STATUS_LEVEL_COMPLETE=4,m.GAME_STATUS_LEVEL_FAILED=5,f.timeLastTouch=0,C.strings_json="res/strings.json",C.sprites_1_png="res/sprites_1.png",C.sprites_1_json="res/sprites_1.json",C.sprites_0_png="res/sprites_0.png",C.sprites_0_json="res/sprites_0.json",C.sounds_wav_tap_wav="res/sounds/wav/tap.wav",C.sounds_wav_start_wav="res/sounds/wav/start.wav",C.sounds_wav_snap_wav="res/sounds/wav/snap.wav",C.sounds_wav_shoot_wav="res/sounds/wav/shoot.wav",C.sounds_wav_new_row_wav="res/sounds/wav/new_row.wav",C.sounds_wav_game_over_success_wav="res/sounds/wav/game_over_success.wav",C.sounds_wav_game_over_failure_wav="res/sounds/wav/game_over_failure.wav",C.sounds_wav_burst_wav="res/sounds/wav/burst.wav",C.sounds_wav_bounce_wav="res/sounds/wav/bounce.wav",C.sounds_wav_bonus_wav="res/sounds/wav/bonus.wav",C.sounds_ogg_tap_ogg="res/sounds/ogg/tap.ogg",C.sounds_ogg_start_ogg="res/sounds/ogg/start.ogg",C.sounds_ogg_snap_ogg="res/sounds/ogg/snap.ogg",C.sounds_ogg_shoot_ogg="res/sounds/ogg/shoot.ogg",C.sounds_ogg_new_row_ogg="res/sounds/ogg/new_row.ogg",C.sounds_ogg_game_over_success_ogg="res/sounds/ogg/game_over_success.ogg",C.sounds_ogg_game_over_failure_ogg="res/sounds/ogg/game_over_failure.ogg",C.sounds_ogg_burst_ogg="res/sounds/ogg/burst.ogg",C.sounds_ogg_bounce_ogg="res/sounds/ogg/bounce.ogg",C.sounds_ogg_bonus_ogg="res/sounds/ogg/bonus.ogg",C.orientation_png="res/orientation.png",C.more_games_graphic_png=window.famobi.__("more_games_image3"),C.logo_png=window.famobi.__("preload_image"),C.chunkfive_e_png="res/chunkfive_e.png",C.chunkfive_d_png="res/chunkfive_d.png",C.chunkfive_c_png="res/chunkfive_c.png",C.chunkfive_b_png="res/chunkfive_b.png",C.chunkfive_a_png="res/chunkfive_a.png",C.chunkfive_fnt="res/chunkfive.fnt",C.all="res/strings.json res/sprites_1.png res/sprites_1.json res/sprites_0.png res/sprites_0.json res/sounds/wav/tap.wav res/sounds/wav/start.wav res/sounds/wav/snap.wav res/sounds/wav/shoot.wav res/sounds/wav/new_row.wav res/sounds/wav/game_over_success.wav res/sounds/wav/game_over_failure.wav res/sounds/wav/burst.wav res/sounds/wav/bounce.wav res/sounds/wav/bonus.wav res/sounds/ogg/tap.ogg res/sounds/ogg/start.ogg res/sounds/ogg/snap.ogg res/sounds/ogg/shoot.ogg res/sounds/ogg/new_row.ogg res/sounds/ogg/game_over_success.ogg res/sounds/ogg/game_over_failure.ogg res/sounds/ogg/burst.ogg res/sounds/ogg/bounce.ogg res/sounds/ogg/bonus.ogg res/orientation.png res/chunkfive_e.png res/chunkfive_d.png res/chunkfive_c.png res/chunkfive_b.png res/chunkfive_a.png res/chunkfive.fnt".split(" "),C.all.push(window.famobi.__("more_games_image3")),C.all.push(window.famobi.__("preload_image")),C.path="res",F.FADE_NONE=0,F.FADE_IN=1,F.FADE_OUT=2,F.NUM_FIELDS=3,U.soundSupported=!1,U.soundMute=!0,j._initialized=!1,ie._nextGUID=1,ge.useFixedTimeStep=!0,ge.tickRate=.01666666,ge.appTime=0,ge.gameTime=0,ge.appTimeDelta=0,ge.gameTimeDelta=0,ge.timeScale=1,ge.processedTicks=0,ge.processedFrames=0,ge.fps=60,ge.mAccumulator=0,ge.mAccumulatorLimit=10*ge.tickRate,ge.mFpsTicks=0,ge.mFpsTime=0,be.POOL_SIZE=4096,be.mInitialized=!1,be.mNextId=0,_i._counter=0,Ti.allowXhr=!0,Ai.mBlobSupported=!1,Oi.MAX_SOUND_CHANNELS=32,Oi.DUP_SOUND_THRESHOLD_SEC=.1,Oi._init=!1,Oi._initialized=!1,cs.NONE=new cs(_s.One,ls.Zero),fs._numStates=-1,vs._tmpMat1=new ae,vs._tmpMat2=new ae,Is.mStack=[],Es.TYPE=1,zs.escapes=function(t){return t=new Bi,t.set("lt","<"),t.set("gt",">"),t.set("amp","&"),t.set("quot",'"'),t.set("apos","'"),t.set("nbsp",String.fromCharCode(160)),t
}(this),Us.__toStr={}.toString}("undefined"!=typeof window?window:{});